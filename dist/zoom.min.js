!function(){"use strict";function e(t,n){n=n||0,window.require&&"function"==typeof window.require?t():n>15?console.error("ERROR: Cannot find requirejs"):window.setTimeout((function(){e(t,n+1)}),500)}function t(e,t){if(!e||!e.trim())return t;try{var n=parseInt(e);if(!isNaN(n))return n}catch(e){}return t}function n(e){e.forEach((function(e){var t=window.IB,n=e.meta;if(t.sd[n.name]&&"function"==typeof t.sd[n.name]._init)return console.error("Warning: component '".concat(n.name,"' loaded twice.")),void t.sd[n.name]._init();!function o(){t.sd[n.name]=t.sd[n.name]||{inst:{},_class:e,_init:o,_dispose:null};var r=n.query||'div[role="snptd_'.concat(n.name,'"], div[data-snptd="').concat(n.name,'"]');if("body"===r){if(window.IB.sd[n.name].singl)return void console.error("Singleton already defined");var i=document.querySelector("body"),a=new e(i);a.init(),window.IB.sd[n.name].singl=a,"_init: Initialized singleton '".concat(n.name,"' instance.")}else{var u=function(e){return document.querySelectorAll(e)}(r),c=0;u.forEach((function(t){var o=t.getAttribute("id");if(o||(o="sd_"+Math.random().toString(32).substring(2),t.setAttribute("id",o)),"1"!==t.dataset.active){var r=new e(t);r.init(),window.IB.sd[n.name].inst[o]=r,c++}else console.warn("Warning: Element '".concat(n.name,"' ").concat(o," already processed."))})),"_init: Initialized ".concat(c," '").concat(n.name,"' instances.")}}();t.sd[n.name]._dispose=function(){var e=0;Object.keys(window.IB.sd[n.name].inst).forEach((function(t){var o=window.IB.sd[n.name].inst[t];o&&(o.dispose(),e++,delete window.IB.sd[n.name].inst[t])})),"_dispose: Destroyed ".concat(e," '").concat(n.name,"' instances.")}}))}var o,r,i=function(t){window.IB=window.IB||{sd:{}},Array.isArray(t)||(t=[t]),t.map((function(e){return e.meta.use$||!1})).reduce((function(e,t){return t&&e}))?e((function(){requirejs(["jquery"],(function(e){e((function(){n(t)}))}))}),15):n(t)},a=(o={zoom:.03,maxZoom:10,initialZoom:1,initialX:.5,initialY:.5},r=function(e,t){if(e&&e.nodeName&&"IMG"===e.nodeName){var n,r,i,a,u,c,s,l,f,d={},m=function(t){e.removeEventListener("wheelzoom.destroy",m),e.removeEventListener("wheelzoom.reset",v),e.removeEventListener("load",h),e.removeEventListener("mouseup",w),e.removeEventListener("mousemove",b),e.removeEventListener("mousedown",g),e.removeEventListener("wheel",y),null!=f&&f.unobserve(e),e.style.backgroundImage=t.backgroundImage,e.style.backgroundRepeat=t.backgroundRepeat,e.src=t.src,e.style.cursor="default"}.bind(null,{backgroundImage:e.style.backgroundImage,backgroundRepeat:e.style.backgroundRepeat,src:e.src});e.addEventListener("wheelzoom.destroy",m),t=t||{},Object.keys(o).forEach((function(e){d[e]=void 0!==t[e]?t[e]:o[e]})),e.complete&&h(),e.addEventListener("load",h),null!=window.ResizeObserver&&(f=new ResizeObserver((function(){if(e.src==l){var t=Math.max(d.initialZoom,1),o=window.getComputedStyle(e,null);n=parseInt(o.width,10),r=parseInt(o.height,10),a=r*t,u=-((i=n*t)-n)*d.initialX,c=-(a-r)*d.initialY,e.style.backgroundSize=i+"px "+a+"px",e.style.backgroundPosition=u+"px "+c+"px"}}))).observe(e)}function p(){u>0?u=0:u<n-i&&(u=n-i),c>0?c=0:c<r-a&&(c=r-a),e.style.backgroundSize=i+"px "+a+"px",e.style.backgroundPosition=u+"px "+c+"px"}function v(){i=n,a=r,u=c=0,p()}function y(t){var o=0;t.preventDefault(),t.deltaY?o=t.deltaY:t.wheelDelta&&(o=-t.wheelDelta);var s=e.getBoundingClientRect(),l=t.pageX-s.left-window.pageXOffset,f=t.pageY-s.top-window.pageYOffset,m=(l-u)/i,y=(f-c)/a;o<0?(i+=i*d.zoom,a+=a*d.zoom):(i-=i*d.zoom,a-=a*d.zoom),d.maxZoom&&(i=Math.min(n*d.maxZoom,i),a=Math.min(r*d.maxZoom,a)),u=l-i*m,c=f-a*y,i<=n||a<=r?v():p()}function b(e){e.preventDefault(),u+=e.pageX-s.pageX,c+=e.pageY-s.pageY,s=e,p()}function w(){document.removeEventListener("mouseup",w),document.removeEventListener("mousemove",b)}function g(e){e.preventDefault(),s=e,document.addEventListener("mousemove",b),document.addEventListener("mouseup",w)}function h(){var t=Math.max(d.initialZoom,1);if(e.src!==l){var o=window.getComputedStyle(e,null);n=parseInt(o.width,10),r=parseInt(o.height,10),a=r*t,u=-((i=n*t)-n)*d.initialX,c=-(a-r)*d.initialY,function(e){e.style.backgroundRepeat="no-repeat",e.style.backgroundImage='url("'+e.src+'")',l="data:image/svg+xml;base64,"+window.btoa('<svg xmlns="http://www.w3.org/2000/svg" width="'+e.naturalWidth+'" height="'+e.naturalHeight+'"></svg>'),e.src=l}(e),e.style.backgroundSize=i+"px "+a+"px",e.style.backgroundPosition=u+"px "+c+"px",e.style.cursor="nesw-resize",e.addEventListener("wheelzoom.reset",v),e.addEventListener("wheel",y),e.addEventListener("mousedown",g)}}},function(e,t){"function"==typeof window.btoa&&r(e,t)});function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,i=void 0,i=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==u(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===u(i)?i:String(i)),o)}var r,i}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,y(o.key),o)}}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v(e);if(t){var r=v(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==l(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}var b,w,g,h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(u,e);var n,o,r,i=m(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).allImgs=[],t}return n=u,(o=[{key:"initImage",value:function(e,t){this.allImgs.push(e),e.style.maxWidth="98%","1"!==e.dataset.active&&(e.dataset.active="1",a(e,t))}},{key:"init",value:function(){var e=this,n=this.parent.dataset;if("1"!==n.active){n.active="1";var o={maxZoom:t(n.maxzoom,10)};window.setTimeout((function(){"IMG"===e.parent.nodeName?e.initImage(e.parent,o):e.parent.querySelectorAll("img").forEach((function(t){return e.initImage(t,o)}))}),600)}}},{key:"dispose",value:function(){"1"===this.parent.dataset.active&&(this.parent.removeAttribute("data-active"),this.allImgs.forEach((function(e){e.dispatchEvent(new Event("wheelzoom.destroy")),e.removeAttribute("data-active")})))}}])&&f(n.prototype,o),r&&f(n,r),Object.defineProperty(n,"prototype",{writable:!1}),u}(s((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t})));b=h,g={name:"zoom",author:"Josep Mulet Pol",version:"2.0",use$:!1,query:'[role="snptd_zoom"], [data-snptd="zoom"]'},(w=y(w="meta"))in b?Object.defineProperty(b,w,{value:g,enumerable:!0,configurable:!0,writable:!0}):b[w]=g,i(h)}();