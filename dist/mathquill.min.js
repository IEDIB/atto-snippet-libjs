!function(){var t={135:function(t,e,n){"use strict";var i=n(81),r=n.n(i),s=n(645),o=n.n(s)()(r());o.push([t.id,'@font-face{font-family:Symbola;src:url(https://piworld.es/iedib/mqwidgets2/fonts/Symbola.eot);src:local("Symbola Regular"),local("Symbola"),url(https://piworld.es/iedib/mqwidgets2/fonts/Symbola.woff2) format("woff2"),url(https://piworld.es/iedib/mqwidgets2/fonts/Symbola.woff) format("woff"),url(https://piworld.es/iedib/mqwidgets2/fonts/Symbola.ttf) format("truetype"),url(https://piworld.es/iedib/mqwidgets2/fonts/Symbola.svg#Symbola) format("svg")}.mq-editable-field{display:-moz-inline-box;display:inline-block}.mq-editable-field .mq-cursor{border-left:1px solid black;margin-left:-1px;position:relative;z-index:1;padding:0;display:-moz-inline-box;display:inline-block}.mq-editable-field .mq-cursor.mq-blink{visibility:hidden}.mq-editable-field,.mq-math-mode .mq-editable-field{border:1px solid gray}.mq-editable-field.mq-focused,.mq-math-mode .mq-editable-field.mq-focused{-webkit-box-shadow:#8bd 0 0 1px 2px,inset #6ae 0 0 2px 0;-moz-box-shadow:#8bd 0 0 1px 2px,inset #6ae 0 0 2px 0;box-shadow:#8bd 0 0 1px 2px,inset #6ae 0 0 2px 0;border-color:#709ac0;border-radius:1px}.mq-math-mode .mq-editable-field{margin:1px}.mq-editable-field .mq-latex-command-input{color:inherit;font-family:"Courier New",monospace;border:1px solid gray;padding-right:1px;margin-right:1px;margin-left:2px}.mq-editable-field .mq-latex-command-input.mq-empty{background:transparent}.mq-editable-field .mq-latex-command-input.mq-hasCursor{border-color:ActiveBorder}.mq-editable-field.mq-empty:after,.mq-editable-field.mq-text-mode:after,.mq-math-mode .mq-empty:after{visibility:hidden;content:\'c\'}.mq-editable-field .mq-cursor:only-child:after,.mq-editable-field .mq-textarea+.mq-cursor:last-child:after{visibility:hidden;content:\'c\'}.mq-editable-field .mq-text-mode .mq-cursor:only-child:after{content:\'\'}.mq-editable-field.mq-text-mode{overflow-x:auto;overflow-y:hidden}.mq-root-block,.mq-math-mode .mq-root-block{display:-moz-inline-box;display:inline-block;width:100%;padding:2px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;white-space:nowrap;overflow:hidden;vertical-align:middle}.mq-math-mode{font-variant:normal;font-weight:normal;font-style:normal;font-size:115%;line-height:1;display:-moz-inline-box;display:inline-block}.mq-math-mode .mq-non-leaf,.mq-math-mode .mq-scaled{display:-moz-inline-box;display:inline-block}.mq-math-mode var,.mq-math-mode .mq-text-mode,.mq-math-mode .mq-nonSymbola{font-family:"Times New Roman",Symbola,serif;line-height:.9}.mq-math-mode *{font-size:inherit;line-height:inherit;margin:0;padding:0;border-color:black;-webkit-user-select:none;-moz-user-select:none;user-select:none;box-sizing:border-box}.mq-math-mode .mq-empty{background:#ccc}.mq-math-mode .mq-empty.mq-root-block{background:transparent}.mq-math-mode.mq-empty{background:transparent}.mq-math-mode .mq-text-mode{display:inline-block;white-space:pre}.mq-math-mode .mq-text-mode.mq-hasCursor{box-shadow:inset darkgray 0 .1em .2em;padding:0 .1em;margin:0 -0.1em;min-width:1ex}.mq-math-mode .mq-font{font:1em "Times New Roman",Symbola,serif}.mq-math-mode .mq-font *{font-family:inherit;font-style:inherit}.mq-math-mode b,.mq-math-mode b.mq-font{font-weight:bolder}.mq-math-mode var,.mq-math-mode i,.mq-math-mode i.mq-font{font-style:italic}.mq-math-mode var.mq-f{margin-right:.2em;margin-left:.1em}.mq-math-mode .mq-roman var.mq-f{margin:0}.mq-math-mode big{font-size:200%}.mq-math-mode .mq-int>big{display:inline-block;-webkit-transform:scaleX(0.7);-moz-transform:scaleX(0.7);-ms-transform:scaleX(0.7);-o-transform:scaleX(0.7);transform:scaleX(0.7);vertical-align:-0.16em}.mq-math-mode .mq-int>.mq-supsub{font-size:80%;vertical-align:-1.1em;padding-right:.2em}.mq-math-mode .mq-int>.mq-supsub>.mq-sup>.mq-sup-inner{vertical-align:1.3em}.mq-math-mode .mq-int>.mq-supsub>.mq-sub{margin-left:-0.35em}.mq-math-mode .mq-roman{font-style:normal}.mq-math-mode .mq-sans-serif{font-family:sans-serif,Symbola,serif}.mq-math-mode .mq-monospace{font-family:monospace,Symbola,serif}.mq-math-mode .mq-overline{border-top:1px solid black;margin-top:1px}.mq-math-mode .mq-underline{border-bottom:1px solid black;margin-bottom:1px}.mq-math-mode .mq-binary-operator{padding:0 .2em;display:-moz-inline-box;display:inline-block}.mq-math-mode .mq-supsub{text-align:left;font-size:90%;vertical-align:-0.5em}.mq-math-mode .mq-supsub.mq-sup-only{vertical-align:.5em}.mq-math-mode .mq-supsub.mq-sup-only .mq-sup{display:inline-block;vertical-align:text-bottom}.mq-math-mode .mq-supsub .mq-sup{display:block}.mq-math-mode .mq-supsub .mq-sub{display:block;float:left}.mq-math-mode .mq-supsub .mq-binary-operator{padding:0 .1em}.mq-math-mode .mq-supsub .mq-fraction{font-size:70%}.mq-math-mode sup.mq-nthroot{font-size:80%;vertical-align:.8em;margin-right:-0.6em;margin-left:.2em;min-width:.5em}.mq-math-mode .mq-paren{padding:0 .1em;vertical-align:top;-webkit-transform-origin:center .06em;-moz-transform-origin:center .06em;-ms-transform-origin:center .06em;-o-transform-origin:center .06em;transform-origin:center .06em}.mq-math-mode .mq-paren.mq-ghost{color:silver}.mq-math-mode .mq-paren+span{margin-top:.1em;margin-bottom:.1em}.mq-math-mode .mq-array{vertical-align:middle;text-align:center}.mq-math-mode .mq-array>span{display:block}.mq-math-mode .mq-operator-name{font-family:Symbola,"Times New Roman",serif;line-height:.9;font-style:normal}.mq-math-mode var.mq-operator-name.mq-first{padding-left:.2em}.mq-math-mode var.mq-operator-name.mq-last,.mq-math-mode .mq-supsub.mq-after-operator-name{padding-right:.2em}.mq-math-mode .mq-fraction{font-size:90%;text-align:center;vertical-align:-0.4em;padding:0 .2em}.mq-math-mode .mq-fraction,.mq-math-mode .mq-large-operator,.mq-math-mode x:-moz-any-link{display:-moz-groupbox}.mq-math-mode .mq-fraction,.mq-math-mode .mq-large-operator,.mq-math-mode x:-moz-any-link,.mq-math-mode x:default{display:inline-block}.mq-math-mode .mq-numerator,.mq-math-mode .mq-denominator,.mq-math-mode .mq-dot-recurring{display:block}.mq-math-mode .mq-numerator{padding:0 .1em}.mq-math-mode .mq-denominator{border-top:1px solid;float:right;width:100%;padding:.1em}.mq-math-mode .mq-dot-recurring{text-align:center;height:.3em}.mq-math-mode .mq-sqrt-prefix{padding-top:0;position:relative;top:.1em;vertical-align:top;-webkit-transform-origin:top;-moz-transform-origin:top;-ms-transform-origin:top;-o-transform-origin:top;transform-origin:top}.mq-math-mode .mq-sqrt-stem{border-top:1px solid;margin-top:1px;padding-left:.15em;padding-right:.2em;margin-right:.1em;padding-top:1px}.mq-math-mode .mq-diacritic-above{display:block;text-align:center;line-height:.4em}.mq-math-mode .mq-diacritic-stem{display:block;text-align:center}.mq-math-mode .mq-hat-prefix{display:block;text-align:center;line-height:.95em;margin-bottom:-0.7em;transform:scaleX(1.5);-moz-transform:scaleX(1.5);-o-transform:scaleX(1.5);-webkit-transform:scaleX(1.5)}.mq-math-mode .mq-hat-stem{display:block}.mq-math-mode .mq-large-operator{vertical-align:-0.2em;padding:.2em;text-align:center}.mq-math-mode .mq-large-operator .mq-from,.mq-math-mode .mq-large-operator big,.mq-math-mode .mq-large-operator .mq-to{display:block}.mq-math-mode .mq-large-operator .mq-from,.mq-math-mode .mq-large-operator .mq-to{font-size:80%}.mq-math-mode .mq-large-operator .mq-from{float:right;width:100%}.mq-math-mode,.mq-math-mode .mq-editable-field{cursor:text;font-family:Symbola,"Times New Roman",serif}.mq-math-mode .mq-overarc{border-top:1px solid black;-webkit-border-top-right-radius:50% .3em;-moz-border-radius-topright:50% .3em;border-top-right-radius:50% .3em;-webkit-border-top-left-radius:50% .3em;-moz-border-radius-topleft:50% .3em;border-top-left-radius:50% .3em;margin-top:1px;padding-top:.15em}.mq-math-mode .mq-overarrow{min-width:.5em;border-top:1px solid black;margin-top:1px;padding-top:.2em;text-align:center}.mq-math-mode .mq-overarrow:before{display:block;position:relative;top:-0.34em;font-size:.5em;line-height:0;content:\'\\27A4\';text-align:right}.mq-math-mode .mq-overarrow.mq-arrow-left:before{-moz-transform:scaleX(-1);-o-transform:scaleX(-1);-webkit-transform:scaleX(-1);transform:scaleX(-1);filter:FlipH;-ms-filter:"FlipH"}.mq-math-mode .mq-overarrow.mq-arrow-both{vertical-align:text-bottom}.mq-math-mode .mq-overarrow.mq-arrow-both.mq-empty{min-height:1.23em}.mq-math-mode .mq-overarrow.mq-arrow-both.mq-empty:after{top:-0.34em}.mq-math-mode .mq-overarrow.mq-arrow-both:before{-moz-transform:scaleX(-1);-o-transform:scaleX(-1);-webkit-transform:scaleX(-1);transform:scaleX(-1);filter:FlipH;-ms-filter:"FlipH"}.mq-math-mode .mq-overarrow.mq-arrow-both:after{display:block;position:relative;top:-2.3em;font-size:.5em;line-height:0;content:\'\\27A4\';visibility:visible;text-align:right}.mq-math-mode .mq-matrix{vertical-align:middle;margin-left:.1em;margin-right:.1em}.mq-math-mode .mq-matrix table{width:auto;border-bottom:0;border-spacing:3px;border-collapse:separate}.mq-math-mode .mq-matrix table.mq-rows-1{vertical-align:middle;margin-bottom:1px}.mq-math-mode .mq-matrix td{border:0;width:auto;padding:.1em .3em;vertical-align:baseline}.mq-math-mode .mq-selection,.mq-editable-field .mq-selection,.mq-math-mode .mq-selection .mq-non-leaf,.mq-editable-field .mq-selection .mq-non-leaf,.mq-math-mode .mq-selection .mq-scaled,.mq-editable-field .mq-selection .mq-scaled{background:#b4d5fe !important;background:Highlight !important;color:HighlightText;border-color:HighlightText}.mq-math-mode .mq-selection .mq-matrixed,.mq-editable-field .mq-selection .mq-matrixed{background:#39F !important}.mq-math-mode .mq-selection .mq-matrixed-container,.mq-editable-field .mq-selection .mq-matrixed-container{filter:progid:DXImageTransform.Microsoft.Chroma(color=\'#3399FF\') !important}.mq-math-mode .mq-selection.mq-blur,.mq-editable-field .mq-selection.mq-blur,.mq-math-mode .mq-selection.mq-blur .mq-non-leaf,.mq-editable-field .mq-selection.mq-blur .mq-non-leaf,.mq-math-mode .mq-selection.mq-blur .mq-scaled,.mq-editable-field .mq-selection.mq-blur .mq-scaled,.mq-math-mode .mq-selection.mq-blur .mq-matrixed,.mq-editable-field .mq-selection.mq-blur .mq-matrixed{background:#d4d4d4 !important;color:black;border-color:black}.mq-math-mode .mq-selection.mq-blur .mq-matrixed-container,.mq-editable-field .mq-selection.mq-blur .mq-matrixed-container{filter:progid:DXImageTransform.Microsoft.Chroma(color=\'#D4D4D4\') !important}.mq-editable-field .mq-textarea,.mq-math-mode .mq-textarea{position:relative;-webkit-user-select:text;-moz-user-select:text;user-select:text}.mq-editable-field .mq-textarea *,.mq-math-mode .mq-textarea *,.mq-editable-field .mq-selectable,.mq-math-mode .mq-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text;position:absolute;clip:rect(1em 1em 1em 1em);-webkit-transform:scale(0);-moz-transform:scale(0);-ms-transform:scale(0);-o-transform:scale(0);transform:scale(0);resize:none;width:1px;height:1px;box-sizing:content-box}.mq-math-mode .mq-matrixed{background:white;display:-moz-inline-box;display:inline-block}.mq-math-mode .mq-matrixed-container{filter:progid:DXImageTransform.Microsoft.Chroma(color=\'white\');margin-top:-0.1em}table.mq-non-leaf td[mathquill-block-id]{padding:4px 8px;text-align:center}.mq-math-mode sup.mq-nthroot{font-size:75%;vertical-align:.4em}.mq-root-block{padding:5px}.mq-root-block,.mq-math-mode .mq-root-block{padding:5px}.mq-math-mode .mq-supsub.mq-sup-only>.mq-sup{font-size:90%}.mq-nthroot.mq-non-leaf{padding:8px 0 !important}div[data-pygen] span.mq-editable-field{min-width:250px}div[data-pygen] .pygen-cloze span.mq-editable-field{min-width:initial}div[data-pygen] .pw-me-editorinput{margin-bottom:40px}div.pw-me-tabmenu .mq-supsub.mq-non-leaf.mq-sup-only{vertical-align:super !important}',""]),e.Z=o},645:function(t){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,r,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<t.length;c++){var h=[].concat(t[c]);i&&o[h[0]]||(void 0!==s&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=s),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),r&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=r):h[4]="".concat(r)),e.push(h))}},e}},81:function(t){"use strict";t.exports=function(t){return t[1]}},379:function(t){"use strict";var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var s={},o=[],a=0;a<t.length;a++){var l=t[a],c=i.base?l[0]+i.base:l[0],h=s[c]||0,u="".concat(c," ").concat(h);s[c]=h+1;var m=n(u),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==m)e[m].references++,e[m].updater(f);else{var d=r(f,i);i.byIndex=a,e.splice(a,0,{identifier:u,updater:d,references:1})}o.push(u)}return o}function r(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var s=i(t=t||[],r=r||{});return function(t){t=t||[];for(var o=0;o<s.length;o++){var a=n(s[o]);e[a].references--}for(var l=i(t,r),c=0;c<s.length;c++){var h=n(s[c]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}s=l}}},569:function(t){"use strict";var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:function(t){"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:function(t,e,n){"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:function(t){"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:function(t){"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},953:function(){!function(){function t(){}function e(t){var e=t.length-1;return function(){var n=g.call(arguments,0,e),i=g.call(arguments,e);return t.apply(this,n.concat([i]))}}function n(t){return e((function(e,n){"function"!=typeof e&&(e=b(e));return t.call(this,(function(t){return e.apply(t,[t].concat(n))}))}))}function i(t){var e=g.call(arguments,1);return function(){return t.apply(this,e)}}function r(t,e){if(!e)throw new Error("prayer failed: "+t)}function s(t){r("a direction was passed",t===v||t===w)}function o(t,e,n){r("a parent is always present",t),r("leftward is properly set up",e?e[w]===n&&e.parent===t:t.ends[v]===n),r("rightward is properly set up",n?n[v]===e&&n.parent===t:t.ends[w]===e)}function a(){window.console&&console.warn('You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. Easiest fix is to do the following before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (2014–2015) → v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')}function l(t){return a(),zt(t)}function c(e){function n(t){var e,n;return t&&t.nodeType?(n=(e=x(t).children(".mq-root-block").attr(Mt))&&k.byId[e].controller)?r[n.KIND_OF_MQ](n):null:null}function i(t,e){var n,i,s;for(n in e&&e.handlers&&(e.handlers={fns:e.handlers,APIClasses:r}),e)e.hasOwnProperty(n)&&(i=e[n],s=E[n],t[n]=s?s(i):i)}var r,s,o;if(!(L<=e&&e<=R))throw"Only interface versions between "+L+" and "+R+" supported. You specified: "+e;for(o in r={},n.L=v,n.R=w,n.saneKeyboardEvents=M,n.config=function(t){return i(_.p,t),this},n.registerEmbed=function(t,e){if(!/^[a-z][a-z0-9]*$/i.test(t))throw"Embed name must start with letter and be only letters and digits";z[t]=e},s=r.AbstractMathQuill=q(A,(function(t){t.init=function(t){this.__controller=t,this.__options=t.options,this.id=t.id,this.data=t.data},t.__mathquillify=function(t){var e,n=this.__controller,i=n.root,r=n.container;n.createTextarea(),e=r.addClass(t).contents().detach(),i.jQ=x('<span class="mq-root-block"/>').attr(Mt,i.id).appendTo(r),this.latex(e.text()),this.revert=function(){return r.empty().unbind(".mathquill").removeClass("mq-editable-field mq-math-mode mq-text-mode").append(e)}},t.config=function(t){return i(this.__options,t),this},t.el=function(){return this.__controller.container[0]},t.text=function(){return this.__controller.exportText()},t.latex=function(t){return arguments.length>0?(this.__controller.renderLatexMath(t),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()},t.html=function(){return this.__controller.root.jQ.html().replace(/ mathquill-(?:command|block)-id="?\d+"?/g,"").replace(/<span class="?mq-cursor( mq-blink)?"?>.?<\/span>/i,"").replace(/ mq-hasCursor|mq-hasCursor ?/,"").replace(/ class=(""|(?= |>))/g,"")},t.reflow=function(){return this.__controller.root.postOrder("reflow"),this}})),n.prototype=s.prototype,r.EditableField=q(s,(function(e,n){e.__mathquillify=function(){return n.__mathquillify.apply(this,arguments),this.__controller.editable=!0,this.__controller.delegateMouseEvents(),this.__controller.editablesTextareaEvents(),this},e.focus=function(){return this.__controller.textarea.focus(),this},e.blur=function(){return this.__controller.textarea.blur(),this},e.write=function(t){return this.__controller.writeLatex(t),this.__controller.scrollHoriz(),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this},e.empty=function(){var t=this.__controller.root,e=this.__controller.cursor;return t.eachChild("postOrder","dispose"),t.ends[v]=t.ends[w]=0,t.jQ.empty(),delete e.selection,e.insAtRightEnd(t),this},e.cmd=function(t){var e,n=this.__controller.notify(),i=n.cursor;return/^\\[a-z]+$/i.test(t)?(t=t.slice(1),(e=T[t]||pt[t])&&(t=e(t),i.selection&&t.replaces(i.replaceSelection()),t.createLeftOf(i.show()),this.__controller.scrollHoriz())):i.parent.write(i,t),n.blurred&&i.hide().parent.blur(),this},e.select=function(){var t=this.__controller;for(t.notify("move").cursor.insAtRightEnd(t.root);t.cursor[v];)t.selectLeft();return this},e.clearSelection=function(){return this.__controller.cursor.clearSelection(),this},e.moveToDirEnd=function(t){return this.__controller.notify("move").cursor.insAtDirEnd(t,this.__controller.root),this},e.moveToLeftEnd=function(){return this.moveToDirEnd(v)},e.moveToRightEnd=function(){return this.moveToDirEnd(w)},e.keystroke=function(e){var n;for(e=e.replace(/^\s+|\s+$/g,"").split(/\s+/),n=0;n<e.length;n+=1)this.__controller.keystroke(e[n],{preventDefault:t});return this},e.typedText=function(t){for(var e=0;e<t.length;e+=1)this.__controller.typedText(t.charAt(e));return this},e.dropEmbedded=function(t,e,n){var i=t-x(window).scrollLeft(),r=e-x(window).scrollTop(),s=document.elementFromPoint(i,r);this.__controller.seek(x(s),t,e),dt().setOptions(n).createLeftOf(this.__controller.cursor)},e.clickAt=function(t,e,n){n=n||document.elementFromPoint(t,e);var i=this.__controller,r=i.root;return Rt.contains(r.jQ[0],n)||(n=r.jQ[0]),i.seek(x(n),t+pageXOffset,e+pageYOffset),i.blurred&&this.focus(),this},e.ignoreNextMousedown=function(t){return this.__controller.cursor.options.ignoreNextMousedown=t,this}})),n.EditableField=function(){throw"wtf don't call me, I'm 'abstract'"},n.EditableField.prototype=r.EditableField.prototype,D)!function(t,i){var s=r[t]=i(r);n[t]=function(i,r){var o,a=n(i);return a instanceof s||!i||!i.nodeType?a:((o=S(s.RootBlock(),x(i),_())).KIND_OF_MQ=t,s(o).__mathquillify(r,e))},n[t].prototype=s.prototype}(o,D[o]);return n}function h(t){var e,n="moveOutOf deleteOutOf selectOutOf upOutOf downOutOf".split(" ");for(e=0;e<n.length;e+=1)!function(e){t[e]=function(t){this.controller.handle(e,t)}}(n[e]);t.reflow=function(){this.controller.handle("reflow"),this.controller.handle("edited"),this.controller.handle("edit")}}function u(t,e,n){return q(V,{ctrlSeq:t,htmlTemplate:"<"+e+" "+n+">&0</"+e+">"})}function m(t){var e=this.parent,n=t;do{if(n[w])return t.insLeftOf(e);n=n.parent.parent}while(n!==e);t.insRightOf(e)}function f(t,e){t.jQadd=function(){e.jQadd.apply(this,arguments),this.delimjQs=this.jQ.children(":first").add(this.jQ.children(":last")),this.contentjQ=this.jQ.children(":eq(1)")},t.reflow=function(){var t=this.contentjQ.outerHeight()/parseFloat(this.contentjQ.css("fontSize"));Y(this.delimjQs,Bt(1+.2*(t-1),1.2),1.2*t)}}function d(t,e){e=e||t;var n=mt[t],r=mt[e];j[t]=i(ut,v,t,n,e,r),j[n]=i(ut,w,t,n,e,r)}var p,g,b,q,v,w,x,y,k,O,T,j,Q,C,S,D,_,E,A,z,L,R,I,M,B,F,N,P,$,H,X,U,W,V,G,K,Z,Y,J,tt,et,nt,it,rt,st,ot,at,lt,ct,ht,ut,mt,ft,dt,pt,gt,bt,qt,vt,wt,xt,yt,kt,Ot,Tt,jt,Qt,Ct,St,Dt,_t,Et,At,zt,Lt,Rt=window.jQuery,It="mathquill-command-id",Mt="mathquill-block-id",Bt=Math.min,Ft=Math.max;if(!Rt)throw"MathQuill requires jQuery 1.5.2+ to be loaded first";for(nt in g=[].slice,b=e((function(t,n){return e((function(e,i){if(t in e)return e[t].apply(e,n.concat(i))}))})),q=function(t,e,n){function i(t){return"object"==typeof t}function r(t){return"function"==typeof t}function s(){}return function t(n,o){function a(){var t=new l;return r(t.init)&&t.init.apply(t,arguments),t}function l(){}var c,h,u;return void 0===o&&(o=n,n=Object),a.Bare=l,c=s.prototype=n.prototype,(h=l.prototype=a.prototype=a.p=new s).constructor=a,a.extend=function(e){return t(a,e)},(a.open=function(t){if(u={},r(t)?u=t.call(a,h,c,a,n):i(t)&&(u=t),i(u))for(var s in u)e.call(u,s)&&(h[s]=u[s]);return r(h.init)||(h.init=n),a})(o)}}(0,{}.hasOwnProperty),v=-1,w=1,x=q(Rt,(function(t){t.insDirOf=function(t,e){return t===v?this.insertBefore(e.first()):this.insertAfter(e.last())},t.insAtDirEnd=function(t,e){return t===v?this.prependTo(e):this.appendTo(e)}})),y=q((function(t){t.parent=0,t[v]=0,t[w]=0,t.init=function(t,e,n){this.parent=t,this[v]=e,this[w]=n},this.copy=function(t){return y(t.parent,t[v],t[w])}})),k=q((function(t){t[v]=0,t[w]=0,t.parent=0;var e=0;this.byId={},t.init=function(){this.id=e+=1,k.byId[this.id]=this,this.ends={},this.ends[v]=0,this.ends[w]=0},t.dispose=function(){delete k.byId[this.id]},t.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"},t.jQ=x(),t.jQadd=function(t){return this.jQ=this.jQ.add(t)},t.jQize=function(t){function e(t){var n,i;for(t.getAttribute&&(n=t.getAttribute("mathquill-command-id"),i=t.getAttribute("mathquill-block-id"),n&&k.byId[n].jQadd(t),i&&k.byId[i].jQadd(t)),t=t.firstChild;t;t=t.nextSibling)e(t)}var n;for(t=x(t||this.html()),n=0;n<t.length;n+=1)e(t[n]);return t},t.createDir=function(t,e){s(t);var n=this;return n.jQize(),n.jQ.insDirOf(t,e.jQ),e[t]=n.adopt(e.parent,e[v],e[w]),n},t.createLeftOf=function(t){return this.createDir(v,t)},t.selectChildren=function(t,e){return C(t,e)},t.bubble=n((function(t){var e;for(e=this;e&&!1!==t(e);e=e.parent);return this})),t.postOrder=n((function(t){return function e(n){n.eachChild(e),t(n)}(this),this})),t.isEmpty=function(){return 0===this.ends[v]&&0===this.ends[w]},t.isStyleBlock=function(){return!1},t.children=function(){return O(this.ends[v],this.ends[w])},t.eachChild=function(){var t=this.children();return t.each.apply(t,arguments),this},t.foldChildren=function(t,e){return this.children().fold(t,e)},t.withDirAdopt=function(t,e,n,i){return O(this,this).withDirAdopt(t,e,n,i),this},t.adopt=function(t,e,n){return O(this,this).adopt(t,e,n),this},t.disown=function(){return O(this,this).disown(),this},t.remove=function(){return this.jQ.remove(),this.postOrder("dispose"),this.disown()}})),O=q((function(t){t.init=function(t,e,n){if(n===p&&(n=v),s(n),r("no half-empty fragments",!t==!e),this.ends={},t){r("withDir is passed to Fragment",t instanceof k),r("oppDir is passed to Fragment",e instanceof k),r("withDir and oppDir have the same parent",t.parent===e.parent),this.ends[n]=t,this.ends[-n]=e;var i=this.fold([],(function(t,e){return t.push.apply(t,e.jQ.get()),t}));this.jQ=this.jQ.add(i)}},t.jQ=x(),t.withDirAdopt=function(t,e,n,i){return t===v?this.adopt(e,n,i):this.adopt(e,i,n)},t.adopt=function(t,e,n){var i,r,s;return o(t,e,n),(i=this).disowned=!1,(r=i.ends[v])?(s=i.ends[w],e||(t.ends[v]=r),n?n[v]=s:t.ends[w]=s,i.ends[w][w]=n,i.each((function(n){n[v]=e,n.parent=t,e&&(e[w]=n),e=n})),i):this},t.disown=function(){var t,e,n=this,i=n.ends[v];return!i||n.disowned||(n.disowned=!0,t=n.ends[w],o(e=i.parent,i[v],i),o(e,t,t[w]),i[v]?i[v][w]=t[w]:e.ends[v]=t[w],t[w]?t[w][v]=i[v]:e.ends[w]=i[v]),n},t.remove=function(){return this.jQ.remove(),this.each("postOrder","dispose"),this.disown()},t.each=n((function(t){var e=this,n=e.ends[v];if(!n)return e;for(;n!==e.ends[w][w]&&!1!==t(n);n=n[w]);return e})),t.fold=function(t,e){return this.each((function(n){t=e.call(this,t,n)})),t}})),T={},j={},Q=q(y,(function(t){t.init=function(t,e){this.parent=t,this.options=e;var n=this.jQ=this._jQ=x('<span class="mq-cursor">&#8203;</span>');this.blink=function(){n.toggleClass("mq-blink")},this.upDownCache={}},t.show=function(){return this.jQ=this._jQ.removeClass("mq-blink"),"intervalId"in this?clearInterval(this.intervalId):(this[w]?this.selection&&this.selection.ends[v][v]===this[v]?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this[w].jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus()),this.intervalId=setInterval(this.blink,500),this},t.hide=function(){return"intervalId"in this&&clearInterval(this.intervalId),delete this.intervalId,this.jQ.detach(),this.jQ=x(),this},t.withDirInsertAt=function(t,e,n,i){var r=this.parent;this.parent=e,this[t]=n,this[-t]=i,r!==e&&r.blur&&r.blur(this)},t.insDirOf=function(t,e){return s(t),this.jQ.insDirOf(t,e.jQ),this.withDirInsertAt(t,e.parent,e[t],e),this.parent.jQ.addClass("mq-hasCursor"),this},t.insLeftOf=function(t){return this.insDirOf(v,t)},t.insRightOf=function(t){return this.insDirOf(w,t)},t.insAtDirEnd=function(t,e){return s(t),this.jQ.insAtDirEnd(t,e.jQ),this.withDirInsertAt(t,e,0,e.ends[t]),e.focus(),this},t.insAtLeftEnd=function(t){return this.insAtDirEnd(v,t)},t.insAtRightEnd=function(t){return this.insAtDirEnd(w,t)},t.jumpUpDown=function(t,e){var n,i,r=this;r.upDownCache[t.id]=y.copy(r),(n=r.upDownCache[e.id])?n[w]?r.insLeftOf(n[w]):r.insAtRightEnd(n.parent):(i=r.offset().left,e.seek(i,r))},t.offset=function(){var t=this.jQ.removeClass("mq-cursor").offset();return this.jQ.addClass("mq-cursor"),t},t.unwrapGramp=function(){var t=this.parent.parent,e=t.parent,n=t[w],i=t[v];if(t.disown().eachChild((function(r){r.isEmpty()||(r.children().adopt(e,i,n).each((function(e){e.jQ.insertBefore(t.jQ.first())})),i=r.ends[w])})),!this[w])if(this[v])this[w]=this[v][w];else for(;!this[w];){if(this.parent=this.parent[w],!this.parent){this[w]=t[w],this.parent=e;break}this[w]=this.parent.ends[v]}this[w]?this.insLeftOf(this[w]):this.insAtRightEnd(e),t.jQ.remove(),t[v].siblingDeleted&&t[v].siblingDeleted(this.options,w),t[w].siblingDeleted&&t[w].siblingDeleted(this.options,v)},t.startSelection=function(){var t,e=this.anticursor=y.copy(this),n=e.ancestors={};for(t=e;t.parent;t=t.parent)n[t.parent.id]=t},t.endSelection=function(){delete this.anticursor},t.select=function(){var t,e,n,i,s,o,a,l=this.anticursor;if(this[v]===l[v]&&this.parent===l.parent)return!1;for(t=this;t.parent;t=t.parent)if(t.parent.id in l.ancestors){e=t.parent;break}if(r("cursor and anticursor in the same tree",e),n=l.ancestors[e.id],o=w,t[v]!==n)for(a=t;a;a=a[w])if(a[w]===n[w]){o=v,i=t,s=n;break}return o===w&&(i=n,s=t),i instanceof y&&(i=i[w]),s instanceof y&&(s=s[v]),this.hide().selection=e.selectChildren(i,s),this.insDirOf(o,this.selection.ends[o]),this.selectionChanged(),!0},t.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.selectionChanged()),this},t.deleteSelection=function(){this.selection&&(this[v]=this.selection.ends[v][v],this[w]=this.selection.ends[w][w],this.selection.remove(),this.selectionChanged(),delete this.selection)},t.replaceSelection=function(){var t=this.selection;return t&&(this[v]=t.ends[v][v],this[w]=t.ends[w][w],delete this.selection),t}})),C=q(O,(function(t,e){t.init=function(){e.init.apply(this,arguments),this.jQ=this.jQ.wrapAll('<span class="mq-selection"></span>').parent()},t.adopt=function(){return this.jQ.replaceWith(this.jQ=this.jQ.children()),e.adopt.apply(this,arguments)},t.clear=function(){return this.jQ.replaceWith(this.jQ[0].childNodes),this},t.join=function(t){return this.fold("",(function(e,n){return e+n[t]()}))}})),S=q((function(t){t.init=function(t,e,n){this.id=t.id,this.data={},this.root=t,this.container=e,this.options=n,t.controller=this,this.cursor=t.cursor=Q(t,n)},t.handle=function(t,e){var n,i=this.options.handlers;i&&i.fns[t]&&(n=i.APIClasses[this.KIND_OF_MQ](this),e===v||e===w?i.fns[t](e,n):i.fns[t](n))};var e=[];this.onNotify=function(t){e.push(t)},t.notify=function(){for(var t=0;t<e.length;t+=1)e[t].apply(this.cursor,arguments);return this}})),D={},_=q(),E={},A=q(),z={},l.prototype=A.p,l.VERSION="v0.10.1",l.interfaceVersion=function(t){if(1!==t)throw"Only interface version 1 supported. You specified: "+t;return(a=function(){window.console&&console.warn('You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (2014–2015) → v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')})(),l},l.getInterface=c,L=c.MIN=1,R=c.MAX=2,l.noConflict=function(){return window.MathQuill=I,l},I=window.MathQuill,window.MathQuill=l,M=function(){function e(t){var e,i=t.which||t.keyCode,r=n[i],s=[];return t.ctrlKey&&s.push("Ctrl"),t.originalEvent&&t.originalEvent.metaKey&&s.push("Meta"),t.altKey&&s.push("Alt"),t.shiftKey&&s.push("Shift"),e=r||String.fromCharCode(i),s.length||r?(s.push(e),s.join("-")):e}var n={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"};return function(n,i){function r(t){p=t,clearTimeout(c),c=setTimeout(t)}function s(e){r((function(n){p=t,clearTimeout(c),e(n)}))}function o(){i.keystroke(e(u),u)}function a(){if(!function(){var t=f[0];return"selectionStart"in t&&t.selectionStart!==t.selectionEnd}()){var t=f.val();1===t.length?(f.val(""),i.typedText(t)):t&&f[0].select&&f[0].select()}}function l(){var t=f.val();f.val(""),t&&i.paste(t)}var c,h,u=null,m=null,f=Rt(n),d=Rt(i.container||f),p=t;return d.bind("keydown keypress input keyup focusout paste",(function(t){p(t)})),h=!1,d.bind({keydown:function(t){u=t,m=null,h&&s((function(t){t&&"focusout"===t.type||!f[0].select||f[0].select()})),o()},keypress:function(t){u&&m&&o(),m=t,r(a)},keyup:function(t){u&&!m&&r(a)},focusout:function(){u=m=null},cut:function(){s((function(){i.cut()}))},copy:function(){s((function(){i.copy()}))},paste:function(t){f.focus(),r(l)}}),{select:function(e){p(),p=t,clearTimeout(c),f.val(e),e&&f[0].select&&f[0].select(),h=!!e}}}}(),B=q((function(t,e,n){function i(t,e){throw"Parse Error: "+e+" at "+(t=t?"'"+t+"'":"EOF")}var s,o,a;t.init=function(t){this._=t},t.parse=function(t){return this.skip(a)._(""+t,(function(t,e){return e}),i)},t.or=function(t){r("or is passed a parser",t instanceof n);var e=this;return n((function(n,i,r){return e._(n,i,(function(e){return t._(n,i,r)}))}))},t.then=function(t){var e=this;return n((function(i,s,o){return e._(i,(function(e,i){var a=t instanceof n?t:t(i);return r("a parser is returned",a instanceof n),a._(e,s,o)}),o)}))},t.many=function(){var t=this;return n((function(e,n,i){function r(t,n){return e=t,o.push(n),!0}function s(){return!1}for(var o=[];t._(e,r,s););return n(e,o)}))},t.times=function(t,e){arguments.length<2&&(e=t);var i=this;return n((function(n,r,s){function o(t,e){return u.push(e),n=t,!0}function a(t,e){return c=e,n=t,!1}function l(t,e){return!1}var c,h,u=[],m=!0;for(h=0;h<t;h+=1)if(!(m=i._(n,o,a)))return s(n,c);for(;h<e&&m;h+=1)m=i._(n,o,l);return r(n,u)}))},t.result=function(t){return this.then(o(t))},t.atMost=function(t){return this.times(0,t)},t.atLeast=function(t){var e=this;return e.times(t).then((function(t){return e.many().map((function(e){return t.concat(e)}))}))},t.map=function(t){return this.then((function(e){return o(t(e))}))},t.skip=function(t){return this.then((function(e){return t.result(e)}))},this.string=function(t){var e=t.length,i="expected '"+t+"'";return n((function(n,r,s){var o=n.slice(0,e);return o===t?r(n.slice(e),o):s(n,i)}))},s=this.regex=function(t){r("regexp parser is anchored","^"===t.toString().charAt(1));var e="expected "+t;return n((function(n,i,r){var s,o=t.exec(n);return o?(s=o[0],i(n.slice(s.length),s)):r(n,e)}))},o=n.succeed=function(t){return n((function(e,n){return n(e,t)}))},n.fail=function(t){return n((function(e,n,i){return i(e,t)}))},n.letter=s(/^[a-z]/i),n.letters=s(/^[a-z]*/i),n.digit=s(/^[0-9]/),n.digits=s(/^[0-9]*/),n.whitespace=s(/^\s+/),n.optWhitespace=s(/^\s*/),n.any=n((function(t,e,n){return t?e(t.slice(1),t.charAt(0)):n(t,"expected any character")})),n.all=n((function(t,e,n){return e("",t)})),a=n.eof=n((function(t,e,n){return t?n(t,"expected EOF"):e(t,t)}))})),F=function(){function t(t){var e,n=t[0]||U();for(e=1;e<t.length;e+=1)t[e].children().adopt(n,n.ends[w],0);return n}var e=B.string,n=B.regex,i=B.letter,r=B.any,s=B.optWhitespace,o=B.succeed,a=B.fail,l=i.map((function(t){return xt(t)})),c=n(/^[^${}\\_^]/).map((function(t){return H(t)})),h=n(/^[^\\a-eg-zA-Z]/).or(e("\\").then(n(/^[a-z]+/i).or(n(/^\s+/).result(" ")).or(r))).then((function(t){var e=T[t];return e?e(t).parser():a("unknown command: \\"+t)})),u=h.or(l).or(c),m=e("{").then((function(){return d})).skip(e("}")),f=s.then(m.or(u.map((function(t){var e=U();return t.adopt(e,0,0),e})))),d=f.many().map(t).skip(s),p=e("[").then(f.then((function(t){return"]"!==t.join("latex")?o(t):a()})).many().map(t).skip(s)).skip(e("]")),g=d;return g.block=f,g.optBlock=p,g}(),S.open((function(t,e){t.exportLatex=function(){return this.root.latex().replace(/(\\[a-z]+) (?![a-z])/gi,"$1")},t.writeLatex=function(t){var e=this.notify("edit").cursor,n=B.all,i=B.eof,r=F.skip(i).or(n.result(!1)).parse(t);return r&&!r.isEmpty()&&(r.children().adopt(e.parent,e[v],e[w]),r.jQize().insertBefore(e.jQ),e[v]=r.ends[w],r.finalizeInsert(e.options,e),r.ends[w][w].siblingCreated&&r.ends[w][w].siblingCreated(e.options,v),r.ends[v][v].siblingCreated&&r.ends[v][v].siblingCreated(e.options,w),e.parent.bubble("reflow")),this},t.renderLatexMath=function(t){var e,n,i=this.root,r=this.cursor,s=B.all,o=B.eof,a=F.skip(o).or(s.result(!1)).parse(t);i.eachChild("postOrder","dispose"),i.ends[v]=i.ends[w]=0,a&&a.children().adopt(i,0,0),e=i.jQ,a?(n=a.join("html"),e.html(n),i.jQize(e.children()),i.finalizeInsert(r.options)):e.empty(),delete r.selection,r.insAtRightEnd(i)},t.renderLatexText=function(t){var e,n,i,r,s,o,a,l,c=this.root,h=this.cursor;if(c.jQ.children().slice(1).remove(),c.eachChild("postOrder","dispose"),c.ends[v]=c.ends[w]=0,delete h.selection,h.show().insAtRightEnd(c),e=B.regex,n=B.string,i=B.eof,r=B.all,s=n("$").then(F).skip(n("$").or(i)).map((function(t){var e,n=K(h);return n.createBlocks(),e=n.ends[v],t.children().adopt(e,0,0),n})),o=n("\\$").result("$").or(e(/^[^$]/)).map(H),a=s.or(o).many().skip(i).or(r.result(!1)).parse(t)){for(l=0;l<a.length;l+=1)a[l].adopt(c,c.ends[w],0);c.jQize().appendTo(c.jQ),c.finalizeInsert(h.options)}}})),S.open((function(t){t.focusBlurEvents=function(){function t(){clearTimeout(n),s.selection&&s.selection.jQ.addClass("mq-blur"),e()}function e(){s.hide().parent.blur(),i.container.removeClass("mq-focused"),x(window).unbind("blur",t)}var n,i=this,r=i.root,s=i.cursor;i.textarea.focus((function(){i.blurred=!1,clearTimeout(n),i.container.addClass("mq-focused"),s.parent||s.insAtRightEnd(r),s.selection?(s.selection.jQ.removeClass("mq-blur"),i.selectionChanged()):s.show()})).blur((function(){i.blurred=!0,n=setTimeout((function(){r.postOrder("intentionalBlur"),s.clearSelection().endSelection(),e()})),x(window).bind("blur",t)})),i.blurred=!0,s.hide().parent.blur()}})),S.open((function(t,e){t.exportText=function(){return this.root.foldChildren("",(function(t,e){return t+e.text()}))}})),S.open((function(t){t.keystroke=function(t,e){this.cursor.parent.keystroke(t,e,this)}})),k.open((function(t){t.keystroke=function(t,e,n){var i=n.cursor;switch(t){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":n.ctrlDeleteDir(v);break;case"Shift-Backspace":case"Backspace":n.backspace();break;case"Esc":case"Tab":return void n.escapeDir(w,t,e);case"Shift-Tab":case"Shift-Esc":return void n.escapeDir(v,t,e);case"End":n.notify("move").cursor.insAtRightEnd(i.parent);break;case"Ctrl-End":n.notify("move").cursor.insAtRightEnd(n.root);break;case"Shift-End":for(;i[w];)n.selectRight();break;case"Ctrl-Shift-End":for(;i[w]||i.parent!==n.root;)n.selectRight();break;case"Home":n.notify("move").cursor.insAtLeftEnd(i.parent);break;case"Ctrl-Home":n.notify("move").cursor.insAtLeftEnd(n.root);break;case"Shift-Home":for(;i[v];)n.selectLeft();break;case"Ctrl-Shift-Home":for(;i[v]||i.parent!==n.root;)n.selectLeft();break;case"Left":n.moveLeft();break;case"Shift-Left":n.selectLeft();break;case"Ctrl-Left":break;case"Right":n.moveRight();break;case"Shift-Right":n.selectRight();break;case"Ctrl-Right":break;case"Up":n.moveUp();break;case"Down":n.moveDown();break;case"Shift-Up":if(i[v])for(;i[v];)n.selectLeft();else n.selectLeft();case"Shift-Down":if(i[w])for(;i[w];)n.selectRight();else n.selectRight();case"Ctrl-Up":case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":n.ctrlDeleteDir(w);break;case"Shift-Del":case"Del":n.deleteForward();break;case"Meta-A":case"Ctrl-A":for(n.notify("move").cursor.insAtRightEnd(n.root);i[v];)n.selectLeft();break;default:return}e.preventDefault(),n.scrollHoriz()},t.moveOutOf=t.moveTowards=t.deleteOutOf=t.deleteTowards=t.unselectInto=t.selectOutOf=t.selectTowards=function(){r("overridden or never called on this node")}})),S.open((function(t){function e(t,e){var n=t.notify("upDown").cursor,i=e+"Into",r=e+"OutOf";return n[w][i]?n.insAtLeftEnd(n[w][i]):n[v][i]?n.insAtRightEnd(n[v][i]):n.parent.bubble((function(t){var e=t[r];if(e&&("function"==typeof e&&(e=t[r](n)),e instanceof k&&n.jumpUpDown(t,e),!0!==e))return!1})),t}this.onNotify((function(t){"move"!==t&&"upDown"!==t||this.show().clearSelection()})),t.escapeDir=function(t,e,n){s(t);var i=this.cursor;if(i.parent!==this.root&&n.preventDefault(),i.parent!==this.root)return i.parent.moveOutOf(t,i),this.notify("move")},E.leftRightIntoCmdGoes=function(t){if(t&&"up"!==t&&"down"!==t)throw'"up" or "down" required for leftRightIntoCmdGoes option, got "'+t+'"';return t},t.moveDir=function(t){s(t);var e=this.cursor,n=e.options.leftRightIntoCmdGoes;return e.selection?e.insDirOf(t,e.selection.ends[t]):e[t]?e[t].moveTowards(t,e,n):e.parent.moveOutOf(t,e,n),this.notify("move")},t.moveLeft=function(){return this.moveDir(v)},t.moveRight=function(){return this.moveDir(w)},t.moveUp=function(){return e(this,"up")},t.moveDown=function(){return e(this,"down")},this.onNotify((function(t){"upDown"!==t&&(this.upDownCache={})})),this.onNotify((function(t){"edit"===t&&this.show().deleteSelection()})),t.deleteDir=function(t){var e,n;return s(t),n=(e=this.cursor).selection,this.notify("edit"),n||(e[t]?e[t].deleteTowards(t,e):e.parent.deleteOutOf(t,e)),e[v].siblingDeleted&&e[v].siblingDeleted(e.options,w),e[w].siblingDeleted&&e[w].siblingDeleted(e.options,v),e.parent.bubble("reflow"),this},t.ctrlDeleteDir=function(t){s(t);var e=this.cursor;return!e[t]||e.selection?this.deleteDir(t):(this.notify("edit"),t===v?O(e.parent.ends[v],e[v]).remove():O(e[w],e.parent.ends[w]).remove(),e.insAtDirEnd(t,e.parent),e[v].siblingDeleted&&e[v].siblingDeleted(e.options,w),e[w].siblingDeleted&&e[w].siblingDeleted(e.options,v),e.parent.bubble("reflow"),this)},t.backspace=function(){return this.deleteDir(v)},t.deleteForward=function(){return this.deleteDir(w)},this.onNotify((function(t){"select"!==t&&this.endSelection()})),t.selectDir=function(t){var e,n=this.notify("select").cursor,i=n.selection;s(t),n.anticursor||n.startSelection(),(e=n[t])?i&&i.ends[t]===e&&n.anticursor[-t]!==e?e.unselectInto(t,n):e.selectTowards(t,n):n.parent.selectOutOf(t,n),n.clearSelection(),n.select()||n.show()},t.selectLeft=function(){return this.selectDir(v)},t.selectRight=function(){return this.selectDir(w)}})),S.open((function(t){_.p.substituteTextarea=function(){return x("<textarea autocapitalize=off autocomplete=off autocorrect=off spellcheck=false x-palm-disable-ste-all=true />")[0]},t.createTextarea=function(){var t,e=this.textareaSpan=x('<span class="mq-textarea"></span>'),n=this.options.substituteTextarea();if(!n.nodeType)throw"substituteTextarea() must return a DOM element, got "+n;n=this.textarea=x(n).appendTo(e),(t=this).cursor.selectionChanged=function(){t.selectionChanged()}},t.selectionChanged=function(){var t=this;J(t.container[0]),t.textareaSelectionTimeout===p&&(t.textareaSelectionTimeout=setTimeout((function(){t.setTextareaSelection()})))},t.setTextareaSelection=function(){this.textareaSelectionTimeout=p;var t="";this.cursor.selection&&(t=this.cursor.selection.join("latex"),this.options.statelessClipboard&&(t="$"+t+"$")),this.selectFn(t)},t.staticMathTextareaEvents=function(){function t(){r.detach(),e.blurred=!0}var e=this,n=(e.root,e.cursor),i=e.textarea,r=e.textareaSpan;this.container.prepend(Rt('<span class="mq-selectable">').text("$"+e.exportLatex()+"$")),e.blurred=!0,i.bind("cut paste",!1).bind("copy",(function(){e.setTextareaSelection()})).focus((function(){e.blurred=!1})).blur((function(){n.selection&&n.selection.clear(),setTimeout(t)})),e.selectFn=function(t){i.val(t),t&&i.select()}},_.p.substituteKeyboardEvents=M,t.editablesTextareaEvents=function(){var t=this.textarea,e=this.textareaSpan,n=this.options.substituteKeyboardEvents(t,this);this.selectFn=function(t){n.select(t)},this.container.prepend(e),this.focusBlurEvents()},t.typedText=function(t){if("\n"===t)return this.handle("enter");var e=this.notify().cursor;e.parent.write(e,t),this.scrollHoriz()},t.cut=function(){var t=this,e=t.cursor;e.selection&&setTimeout((function(){t.notify("edit"),e.parent.bubble("reflow")}))},t.copy=function(){this.setTextareaSelection()},t.paste=function(t){this.options.statelessClipboard&&(t="$"===t.slice(0,1)&&"$"===t.slice(-1)?t.slice(1,-1):"\\text{"+t+"}"),this.writeLatex(t).cursor.show()}})),S.open((function(e){_.p.ignoreNextMousedown=t,e.delegateMouseEvents=function(){var e=this.root.jQ;this.container.bind("mousedown.mathquill",(function(n){function i(t){s=x(t.target)}function r(t){l.anticursor||l.startSelection(),a.seek(s,t.pageX,t.pageY).cursor.select(),s=p}var s,o=x(n.target).closest(".mq-root-block"),a=k.byId[o.attr(Mt)||e.attr(Mt)].controller,l=a.cursor,c=l.blink,h=a.textareaSpan,u=a.textarea;n.preventDefault(),n.target.unselectable=!0,l.options.ignoreNextMousedown(n)||(l.options.ignoreNextMousedown=t,a.blurred&&(a.editable||o.prepend(h),u.focus()),l.blink=t,a.seek(x(n.target),n.pageX,n.pageY).cursor.startSelection(),o.mousemove(i),x(n.target.ownerDocument).mousemove(r).mouseup((function t(e){l.blink=c,l.selection||(a.editable?l.show():h.detach()),o.unbind("mousemove",i),x(e.target.ownerDocument).unbind("mousemove",r).unbind("mouseup",t)})))}))}})),S.open((function(t){t.seek=function(t,e,n){var i,s,o,a=this.notify("select").cursor;return t&&((i=t.attr(Mt)||t.attr(It))||(i=(s=t.parent()).attr(Mt)||s.attr(It))),r("nodeId is the id of some Node that exists",o=i?k.byId[i]:this.root),a.clearSelection().show(),o.seek(e,a),this.scrollHoriz(),this}})),S.open((function(t){t.scrollHoriz=function(){var t,e,n,i,r,s=this.cursor,o=s.selection,a=this.root.jQ[0].getBoundingClientRect();if(o)if(i=(n=o.jQ[0].getBoundingClientRect()).left-(a.left+20),r=n.right-(a.right-20),o.ends[v]===s[w])if(i<0)e=i;else{if(!(r>0))return;e=n.left-r<a.left+20?i:r}else if(r>0)e=r;else{if(!(i<0))return;e=n.right-i>a.right-20?r:i}else if((t=s.jQ[0].getBoundingClientRect().left)>a.right-20)e=t-(a.right-20);else{if(!(t<a.left+20))return;e=t-(a.left+20)}this.root.jQ.stop().animate({scrollLeft:"+="+e},100)}})),N=q(k,(function(t,e){t.finalizeInsert=function(t,e){var n=this;n.postOrder("finalizeTree",t),n.postOrder("contactWeld",e),n.postOrder("blur"),n.postOrder("reflow"),n[w].siblingCreated&&n[w].siblingCreated(t,v),n[v].siblingCreated&&n[v].siblingCreated(t,w),n.bubble("reflow")}})),P=q(N,(function(t,e){t.init=function(t,n,i){var r=this;e.init.call(r),r.ctrlSeq||(r.ctrlSeq=t),n&&(r.htmlTemplate=n),i&&(r.textTemplate=i)},t.replaces=function(t){t.disown(),this.replacedFragment=t},t.isEmpty=function(){return this.foldChildren(!0,(function(t,e){return t&&e.isEmpty()}))},t.parser=function(){var t=F.block,e=this;return t.times(e.numBlocks()).map((function(t){e.blocks=t;for(var n=0;n<t.length;n+=1)t[n].adopt(e,e.ends[w],0);return e}))},t.createLeftOf=function(t){var n=this,i=n.replacedFragment;n.createBlocks(),e.createLeftOf.call(n,t),i&&(i.adopt(n.ends[v],0,0),i.jQ.appendTo(n.ends[v].jQ)),n.finalizeInsert(t.options),n.placeCursor(t)},t.createBlocks=function(){var t,e=this,n=e.numBlocks(),i=e.blocks=Array(n);for(t=0;t<n;t+=1)(i[t]=U()).adopt(e,e.ends[w],0)},t.placeCursor=function(t){t.insAtRightEnd(this.foldChildren(this.ends[v],(function(t,e){return t.isEmpty()?t:e})))},t.moveTowards=function(t,e,n){var i=n&&this[n+"Into"];e.insAtDirEnd(-t,i||this.ends[-t])},t.deleteTowards=function(t,e){this.isEmpty()?e[t]=this.remove()[t]:this.moveTowards(t,e,null)},t.selectTowards=function(t,e){e[-t]=this,e[t]=this[t]},t.selectChildren=function(){return C(this,this)},t.unselectInto=function(t,e){e.insAtDirEnd(-t,e.anticursor.ancestors[this.id])},t.seek=function(t,e){function n(t){var e={};return e[v]=t.jQ.offset().left,e[w]=e[v]+t.jQ.outerWidth(),e}var i,r=this,s=n(r);return t<s[v]?e.insLeftOf(r):t>s[w]?e.insRightOf(r):(i=s[v],void r.eachChild((function(o){var a=n(o);return t<a[v]?(t-i<a[v]-t?o[v]?e.insAtRightEnd(o[v]):e.insLeftOf(r):e.insAtLeftEnd(o),!1):t>a[w]?void(o[w]?i=a[w]:s[w]-t<t-a[w]?e.insRightOf(r):e.insAtRightEnd(o)):(o.seek(t,e),!1)})))},t.numBlocks=function(){var t=this.htmlTemplate.match(/&\d+/g);return t?t.length:0},t.html=function(){var t,e,n,i=this,s=i.blocks,o=" mathquill-command-id="+i.id,a=i.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);for(r("no unmatched angle brackets",a.join("")===this.htmlTemplate),t=0,e=a[0];e;e=a[t+=1])if("/>"===e.slice(-2))a[t]=e.slice(0,-2)+o+"/>";else if("<"===e.charAt(0)){r("not an unmatched top-level close tag","/"!==e.charAt(1)),a[t]=e.slice(0,-1)+o+">",n=1;do{r("no missing close tags",e=a[t+=1]),"</"===e.slice(0,2)?n-=1:"<"===e.charAt(0)&&"/>"!==e.slice(-2)&&(n+=1)}while(n>0)}return a.join("").replace(/>&(\d+)/g,(function(t,e){return" mathquill-block-id="+s[e].id+">"+s[e].join("html")}))},t.latex=function(){return this.foldChildren(this.ctrlSeq,(function(t,e){return t+"{"+(e.latex()||" ")+"}"}))},t.textTemplate=[""],t.text=function(){var t=this,e=0;return t.foldChildren(t.textTemplate[e],(function(n,i){e+=1;var r=i.text();return n&&"("===t.textTemplate[e]&&"("===r[0]&&")"===r.slice(-1)?n+r.slice(1,-1)+t.textTemplate[e]:n+i.text()+(t.textTemplate[e]||"")}))}})),$=q(P,(function(e,n){e.init=function(t,e,i){i||(i=t&&t.length>1?t.slice(1):t),n.init.call(this,t,e,[i])},e.parser=function(){return B.succeed(this)},e.numBlocks=function(){return 0},e.replaces=function(t){t.remove()},e.createBlocks=t,e.moveTowards=function(t,e){e.jQ.insDirOf(t,this.jQ),e[-t]=this,e[t]=this[t]},e.deleteTowards=function(t,e){e[t]=this.remove()[t]},e.seek=function(t,e){t-this.jQ.offset().left<this.jQ.outerWidth()/2?e.insLeftOf(this):e.insRightOf(this)},e.latex=function(){return this.ctrlSeq},e.text=function(){return this.textTemplate},e.placeCursor=t,e.isEmpty=function(){return!0}})),H=q($,(function(t,e){t.init=function(t,n){e.init.call(this,t,"<span>"+(n||t)+"</span>")}})),X=q($,(function(t,e){t.init=function(t,n,i){e.init.call(this,t,'<span class="mq-binary-operator">'+n+"</span>",i)}})),U=q(N,(function(t,e){t.join=function(t){return this.foldChildren("",(function(e,n){return e+n[t]()}))},t.html=function(){return this.join("html")},t.latex=function(){return this.join("latex")},t.text=function(){return this.ends[v]===this.ends[w]&&0!==this.ends[v]?this.ends[v].text():this.join("text")},t.keystroke=function(t,n,i){return!i.options.spaceBehavesLikeTab||"Spacebar"!==t&&"Shift-Spacebar"!==t?e.keystroke.apply(this,arguments):(n.preventDefault(),void i.escapeDir("Shift-Spacebar"===t?v:w,t,n))},t.moveOutOf=function(t,e,n){n&&this.parent[n+"Into"]||!this[t]?e.insDirOf(t,this.parent):e.insAtDirEnd(-t,this[t])},t.selectOutOf=function(t,e){e.insDirOf(t,this.parent)},t.deleteOutOf=function(t,e){e.unwrapGramp()},t.seek=function(t,e){var n=this.ends[w];if(!n||n.jQ.offset().left+n.jQ.outerWidth()<t)return e.insAtRightEnd(this);if(t<this.ends[v].jQ.offset().left)return e.insAtLeftEnd(this);for(;t<n.jQ.offset().left;)n=n[v];return n.seek(t,e)},t.chToCmd=function(t,e){var n;return t.match(/^[a-eg-zA-Z]$/)?xt(t):/^\d$/.test(t)?vt(t):e&&e.typingSlashWritesDivisionSymbol&&"/"===t?T["÷"](t):e&&e.typingAsteriskWritesTimesSymbol&&"*"===t?T["×"](t):(n=j[t]||T[t])?n(t):H(t)},t.write=function(t,e){var n=this.chToCmd(e,t.options);t.selection&&n.replaces(t.replaceSelection()),n.createLeftOf(t.show())},t.focus=function(){return this.jQ.addClass("mq-hasCursor"),this.jQ.removeClass("mq-empty"),this},t.blur=function(){return this.jQ.removeClass("mq-hasCursor"),this.isEmpty()&&this.jQ.addClass("mq-empty"),this}})),D.StaticMath=function(t){return q(t.AbstractMathQuill,(function(e,n){this.RootBlock=U,e.__mathquillify=function(t,e){return this.config(t),n.__mathquillify.call(this,"mq-math-mode"),this.__controller.delegateMouseEvents(),this.__controller.staticMathTextareaEvents(),this},e.init=function(){n.init.apply(this,arguments),this.__controller.root.postOrder("registerInnerField",this.innerFields=[],t.MathField)},e.latex=function(){var e=n.latex.apply(this,arguments);return arguments.length>0&&this.__controller.root.postOrder("registerInnerField",this.innerFields=[],t.MathField),e}}))},W=q(U,h),D.MathField=function(e){return q(e.EditableField,(function(e,n){this.RootBlock=W,e.__mathquillify=function(e,i){return this.config(e),i>1&&(this.__controller.root.reflow=t),n.__mathquillify.call(this,"mq-editable-field mq-math-mode"),delete this.__controller.root.reflow,this}}))},V=q(k,(function(t,e){function n(t){var e,n;if(t.jQ[0].normalize(),e=t.jQ[0].firstChild)return r("only node in TextBlock span is Text node",3===e.nodeType),(n=G(e.data)).jQadd(e),t.children().disown(),n.adopt(t,0,0)}t.ctrlSeq="\\text",t.replaces=function(t){t instanceof O?this.replacedText=t.remove().jQ.text():"string"==typeof t&&(this.replacedText=t)},t.jQadd=function(t){e.jQadd.call(this,t),this.ends[v]&&this.ends[v].jQadd(this.jQ[0].firstChild)},t.createLeftOf=function(t){var n,i=this;if(e.createLeftOf.call(this,t),i[w].siblingCreated&&i[w].siblingCreated(t.options,v),i[v].siblingCreated&&i[v].siblingCreated(t.options,w),i.bubble("reflow"),t.insAtRightEnd(i),i.replacedText)for(n=0;n<i.replacedText.length;n+=1)i.write(t,i.replacedText.charAt(n))},t.parser=function(){var t=this,e=B.string,n=B.regex;return B.optWhitespace.then(e("{")).then(n(/^[^}]*/)).skip(e("}")).map((function(e){return 0===e.length?O():(G(e).adopt(t,0,0),t)}))},t.textContents=function(){return this.foldChildren("",(function(t,e){return t+e.text}))},t.text=function(){return'"'+this.textContents()+'"'},t.latex=function(){var t=this.textContents();return 0===t.length?"":"\\text{"+t.replace(/\\/g,"\\backslash ").replace(/[{}]/g,"\\$&")+"}"},t.html=function(){return'<span class="mq-text-mode" mathquill-command-id='+this.id+">"+this.textContents()+"</span>"},t.moveTowards=function(t,e){e.insAtDirEnd(-t,this)},t.moveOutOf=function(t,e){e.insDirOf(t,this)},t.unselectInto=t.moveTowards,t.selectTowards=P.prototype.selectTowards,t.deleteTowards=P.prototype.deleteTowards,t.selectOutOf=function(t,e){e.insDirOf(t,this)},t.deleteOutOf=function(t,e){this.isEmpty()&&e.insRightOf(this)},t.write=function(t,n){var i,r;t.show().deleteSelection(),"$"!==n?t[v]?t[v].appendText(n):G(n).createLeftOf(t):this.isEmpty()?(t.insRightOf(this),H("\\$","$").createLeftOf(t)):t[w]?t[v]?(i=V(),(r=this.ends[v]).disown().jQ.detach(),r.adopt(i,0,0),t.insLeftOf(this),e.createLeftOf.call(i,t)):t.insLeftOf(this):t.insRightOf(this)},t.seek=function(t,e){var i,r,s,o,a,l,c,h;for(e.hide(),i=n(this),r=this.jQ.width()/this.text.length,(s=Math.round((t-this.jQ.offset().left)/r))<=0?e.insAtLeftEnd(this):s>=i.text.length?e.insAtRightEnd(this):e.insLeftOf(i.splitRight(s)),l=a=(o=t-e.show().offset().left)&&o<0?v:w;e[a]&&o*l>0;)e[a].moveTowards(a,e),l=o,o=t-e.offset().left;a*o<-a*l&&e[-a].moveTowards(-a,e),e.anticursor?e.anticursor.parent===this&&(c=e[v]&&e[v].text.length,this.anticursorPosition===c?e.anticursor=y.copy(e):(this.anticursorPosition<c?(h=e[v].splitRight(this.anticursorPosition),e[v]=h):h=e[w].splitRight(this.anticursorPosition-c),e.anticursor=y(this,h[v],h))):this.anticursorPosition=e[v]&&e[v].text.length},t.blur=function(t){U.prototype.blur.call(this),t&&(""===this.textContents()?(this.remove(),t[v]===this?t[v]=this[v]:t[w]===this&&(t[w]=this[w])):n(this))},t.focus=U.prototype.focus})),G=q(k,(function(t,e){function n(t,e){return e.charAt(t===v?0:-1+e.length)}t.init=function(t){e.init.call(this),this.text=t},t.jQadd=function(t){this.dom=t,this.jQ=x(t)},t.jQize=function(){return this.jQadd(document.createTextNode(this.text))},t.appendText=function(t){this.text+=t,this.dom.appendData(t)},t.prependText=function(t){this.text=t+this.text,this.dom.insertData(0,t)},t.insTextAtDirEnd=function(t,e){s(e),e===w?this.appendText(t):this.prependText(t)},t.splitRight=function(t){var e=G(this.text.slice(t)).adopt(this.parent,this,this[w]);return e.jQadd(this.dom.splitText(t)),this.text=this.text.slice(0,t),e},t.moveTowards=function(t,e){var i,r;return s(t),i=n(-t,this.text),(r=this[-t])?r.insTextAtDirEnd(i,t):G(i).createDir(-t,e),this.deleteTowards(t,e)},t.latex=function(){return this.text},t.deleteTowards=function(t,e){this.text.length>1?t===w?(this.dom.deleteData(0,1),this.text=this.text.slice(1)):(this.dom.deleteData(-1+this.text.length,1),this.text=this.text.slice(0,-1)):(this.remove(),this.jQ.remove(),e[t]=this[t])},t.selectTowards=function(t,e){var i,r,o,a;return s(t),i=e.anticursor,r=n(-t,this.text),i[t]===this?(o=G(r).createDir(t,e),i[t]=o,e.insDirOf(t,o)):((a=this[-t])?a.insTextAtDirEnd(r,t):(o=G(r).createDir(-t,e)).jQ.insDirOf(-t,e.selection.jQ),1===this.text.length&&i[-t]===this&&(i[-t]=this[-t])),this.deleteTowards(t,e)}})),T.text=T.textnormal=T.textrm=T.textup=T.textmd=V,T.em=T.italic=T.italics=T.emph=T.textit=T.textsl=u("\\textit","i",'class="mq-text-mode"'),T.strong=T.bold=T.textbf=u("\\textbf","b",'class="mq-text-mode"'),T.sf=T.textsf=u("\\textsf","span",'class="mq-sans-serif mq-text-mode"'),T.tt=T.texttt=u("\\texttt","span",'class="mq-monospace mq-text-mode"'),T.textsc=u("\\textsc","span",'style="font-variant:small-caps" class="mq-text-mode"'),T.uppercase=u("\\uppercase","span",'style="text-transform:uppercase" class="mq-text-mode"'),T.lowercase=u("\\lowercase","span",'style="text-transform:lowercase" class="mq-text-mode"'),K=q(P,(function(t,e){t.init=function(t){e.init.call(this,"$"),this.cursor=t},t.htmlTemplate='<span class="mq-math-mode">&0</span>',t.createBlocks=function(){e.createBlocks.call(this),this.ends[v].cursor=this.cursor,this.ends[v].write=function(t,e){"$"!==e?U.prototype.write.call(this,t,e):this.isEmpty()?(t.insRightOf(this.parent),this.parent.deleteTowards(dir,t),H("\\$","$").createLeftOf(t.show())):t[w]?t[v]?U.prototype.write.call(this,t,e):t.insLeftOf(this.parent):t.insRightOf(this.parent)}},t.latex=function(){return"$"+this.ends[v].latex()+"$"}})),Z=q(W,(function(t,e){t.keystroke=function(t){if("Spacebar"!==t&&"Shift-Spacebar"!==t)return e.keystroke.apply(this,arguments)},t.write=function(t,e){var n;(t.show().deleteSelection(),"$"===e)?K(t).createLeftOf(t):("<"===e?n="&lt;":">"===e&&(n="&gt;"),H(e,n).createLeftOf(t))}})),D.TextField=function(t){return q(t.EditableField,(function(t,e){this.RootBlock=Z,t.__mathquillify=function(){return e.__mathquillify.call(this,"mq-editable-field mq-text-mode")},t.latex=function(t){return arguments.length>0?(this.__controller.renderLatexText(t),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()}}))},j["\\"]=q(P,(function(t,e){t.ctrlSeq="\\",t.replaces=function(t){this._replacedFragment=t.disown(),this.isEmpty=function(){return!1}},t.htmlTemplate='<span class="mq-latex-command-input mq-non-leaf">\\<span>&0</span></span>',t.textTemplate=["\\"],t.createBlocks=function(){e.createBlocks.call(this),this.ends[v].focus=function(){return this.parent.jQ.addClass("mq-hasCursor"),this.isEmpty()&&this.parent.jQ.removeClass("mq-empty"),this},this.ends[v].blur=function(){return this.parent.jQ.removeClass("mq-hasCursor"),this.isEmpty()&&this.parent.jQ.addClass("mq-empty"),this},this.ends[v].write=function(t,e){t.show().deleteSelection(),e.match(/[a-z]/i)?H(e).createLeftOf(t):(this.parent.renderCommand(t),"\\"===e&&this.isEmpty()||t.parent.write(t,e))},this.ends[v].keystroke=function(t,n,i){return"Tab"===t||"Enter"===t||"Spacebar"===t?(this.parent.renderCommand(i.cursor),void n.preventDefault()):e.keystroke.apply(this,arguments)}},t.createLeftOf=function(t){if(e.createLeftOf.call(this,t),this._replacedFragment){var n=this.jQ[0];this.jQ=this._replacedFragment.jQ.addClass("mq-blur").bind("mousedown mousemove",(function(t){return x(t.target=n).trigger(t),!1})).insertBefore(this.jQ).add(this.jQ)}},t.latex=function(){return"\\"+this.ends[v].latex()+" "},t.renderCommand=function(t){var e,n;this.jQ=this.jQ.last(),this.remove(),this[w]?t.insLeftOf(this[w]):t.insAtRightEnd(this.parent),(e=this.ends[v].latex())||(e=" "),(n=T[e]||pt[e])?(n=n(e),this._replacedFragment&&n.replaces(this._replacedFragment),n.createLeftOf(t)):((n=V()).replaces(e),n.createLeftOf(t),t.insRightOf(n),this._replacedFragment&&this._replacedFragment.remove())}})),J=t,tt=document.createElement("div").style,{transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1})if(nt in tt){et=nt;break}for(jt in et?Y=function(t,e,n){t.css(et,"scale("+e+","+n+")")}:"filter"in tt?(J=function(t){t.className=t.className},Y=function(t,e,n){function i(){t.css("marginRight",(r.width()-1)*(e-1)/e+"px")}var r,s;e/=1+(n-1)/2,t.css("fontSize",n+"em"),t.hasClass("mq-matrixed-container")||t.addClass("mq-matrixed-container").wrapInner('<span class="mq-matrixed"></span>'),r=t.children().css("filter","progid:DXImageTransform.Microsoft.Matrix(M11="+e+",SizingMethod='auto expand')"),i(),s=setInterval(i),x(window).load((function(){clearTimeout(s),i()}))}):Y=function(t,e,n){t.css("fontSize",n+"em")},it=q(P,(function(t,e){t.init=function(t,n,i){e.init.call(this,t,"<"+n+" "+i+">&0</"+n+">")}})),T.mathrm=i(it,"\\mathrm","span",'class="mq-roman mq-font"'),T.mathit=i(it,"\\mathit","i",'class="mq-font"'),T.mathbf=i(it,"\\mathbf","b",'class="mq-font"'),T.mathsf=i(it,"\\mathsf","span",'class="mq-sans-serif mq-font"'),T.mathtt=i(it,"\\mathtt","span",'class="mq-monospace mq-font"'),T.underline=i(it,"\\underline","span",'class="mq-non-leaf mq-underline"'),T.overline=T.bar=i(it,"\\overline","span",'class="mq-non-leaf mq-overline"'),T.overrightarrow=i(it,"\\overrightarrow","span",'class="mq-non-leaf mq-overarrow mq-arrow-right"'),T.overleftarrow=i(it,"\\overleftarrow","span",'class="mq-non-leaf mq-overarrow mq-arrow-left"'),T.overleftrightarrow=i(it,"\\overleftrightarrow","span",'class="mq-non-leaf mq-overarrow mq-arrow-both"'),T.overarc=i(it,"\\overarc","span",'class="mq-non-leaf mq-overarc"'),T.dot=q(P,(function(t,e){t.init=function(){e.init.call(this,"\\dot",'<span class="mq-non-leaf"><span class="mq-dot-recurring-inner"><span class="mq-dot-recurring">&#x2d9;</span><span class="mq-empty-box">&0</span></span></span>')}})),T.textcolor=q(P,(function(t,e){t.setColor=function(t){this.color=t,this.htmlTemplate='<span class="mq-textcolor" style="color:'+t+'">&0</span>'},t.latex=function(){return"\\textcolor{"+this.color+"}{"+this.blocks[0].latex()+"}"},t.parser=function(){var t=this,n=B.optWhitespace,i=B.string,r=B.regex;return n.then(i("{")).then(r(/^[#\w\s.,()%-]*/)).skip(i("}")).then((function(n){return t.setColor(n),e.parser.call(t)}))},t.isStyleBlock=function(){return!0}})),T.class=q(P,(function(t,e){t.parser=function(){var t=this,n=B.string,i=B.regex;return B.optWhitespace.then(n("{")).then(i(/^[-\w\s\\\xA0-\xFF]*/)).skip(n("}")).then((function(n){return t.cls=n||"",t.htmlTemplate='<span class="mq-class '+n+'">&0</span>',e.parser.call(t)}))},t.latex=function(){return"\\class{"+this.cls+"}{"+this.blocks[0].latex()+"}"},t.isStyleBlock=function(){return!0}})),rt=q(P,(function(t,e){t.ctrlSeq="_{...}^{...}",t.createLeftOf=function(t){if(this.replacedFragment||t[v]||!t.options.supSubsRequireOperand)return e.createLeftOf.apply(this,arguments)},t.contactWeld=function(t){var e,n,i,r,s,o;for(e=v;e;e=e===v&&w)if(this[e]instanceof rt){for(n="sub";n;n="sub"===n&&"sup")i=this[n],r=this[e][n],i&&(r?i.isEmpty()?o=y(r,0,r.ends[v]):(i.jQ.children().insAtDirEnd(-e,r.jQ),s=i.children().disown(),o=y(r,s.ends[w],r.ends[v]),e===v?s.adopt(r,r.ends[w],0):s.adopt(r,0,r.ends[v])):this[e].addBlock(i.disown()),this.placeCursor=function(t,n){return function(i){i.insAtDirEnd(-e,t||n)}}(r,i));this.remove(),t&&t[v]===this&&(e===w&&o?o[v]?t.insRightOf(o[v]):t.insAtLeftEnd(o.parent):t.insRightOf(this[e]));break}},_.p.charsThatBreakOutOfSupSub="",t.finalizeTree=function(){this.ends[v].write=function(t,e){if(t.options.autoSubscriptNumerals&&this===this.parent.sub){if("_"===e)return;var n=this.chToCmd(e,t.options);return n instanceof $?t.deleteSelection():t.clearSelection().insRightOf(this.parent),n.createLeftOf(t.show())}t[v]&&!t[w]&&!t.selection&&t.options.charsThatBreakOutOfSupSub.indexOf(e)>-1&&t.insRightOf(this.parent),U.p.write.apply(this,arguments)}},t.moveTowards=function(t,n,i){n.options.autoSubscriptNumerals&&!this.sup?n.insDirOf(t,this):e.moveTowards.apply(this,arguments)},t.deleteTowards=function(t,n){if(n.options.autoSubscriptNumerals&&this.sub){var i=this.sub.ends[-t];i instanceof $?i.remove():i&&i.deleteTowards(t,n.insAtDirEnd(-t,this.sub)),this.sub.isEmpty()&&(this.sub.deleteOutOf(v,n.insAtLeftEnd(this.sub)),this.sup&&n.insDirOf(-t,this))}else e.deleteTowards.apply(this,arguments)},t.latex=function(){function t(t,e){var n=e&&e.latex();return e?t+(1===n.length?n:"{"+(n||" ")+"}"):""}return t("_",this.sub)+t("^",this.sup)},t.addBlock=function(t){"sub"===this.supsub?(this.sup=this.upInto=this.sub.upOutOf=t,t.adopt(this,this.sub,0).downOutOf=this.sub,t.jQ=x('<span class="mq-sup"/>').append(t.jQ.children()).attr(Mt,t.id).prependTo(this.jQ)):(this.sub=this.downInto=this.sup.downOutOf=t,t.adopt(this,0,this.sup).upOutOf=this.sup,t.jQ=x('<span class="mq-sub"></span>').append(t.jQ.children()).attr(Mt,t.id).appendTo(this.jQ.removeClass("mq-sup-only")),this.jQ.append('<span style="display:inline-block;width:0">&#8203;</span>'));for(var e=0;e<2;e+=1)!function(t,e,n,i){t[e].deleteOutOf=function(r,s){if(s.insDirOf(this[r]?-r:r,this.parent),!this.isEmpty()){var o=this.ends[r];this.children().disown().withDirAdopt(r,s.parent,s[r],s[-r]).jQ.insDirOf(-r,s.jQ),s[-r]=o}t.supsub=n,delete t[e],delete t[i+"Into"],t[n][i+"OutOf"]=m,delete t[n].deleteOutOf,"sub"===e&&x(t.jQ.addClass("mq-sup-only")[0].lastChild).remove(),this.remove()}}(this,"sub sup".split(" ")[e],"sup sub".split(" ")[e],"down up".split(" ")[e])}})),T.subscript=T._=q(rt,(function(t,e){t.supsub="sub",t.htmlTemplate='<span class="mq-supsub mq-non-leaf"><span class="mq-sub">&0</span><span style="display:inline-block;width:0">&#8203;</span></span>',t.textTemplate=["_"],t.finalizeTree=function(){this.downInto=this.sub=this.ends[v],this.sub.upOutOf=m,e.finalizeTree.call(this)}})),T.superscript=T.supscript=T["^"]=q(rt,(function(t,e){t.supsub="sup",t.htmlTemplate='<span class="mq-supsub mq-non-leaf mq-sup-only"><span class="mq-sup">&0</span></span>',t.textTemplate=["^"],t.finalizeTree=function(){this.upInto=this.sup=this.ends[w],this.sup.downOutOf=m,e.finalizeTree.call(this)},t.reflow=function(){var t=this.jQ,e=t.prev().innerHeight();e*=.6,t.css("vertical-align",e+"px")}})),st=q(P,(function(t,e){t.init=function(t,e){var n='<span class="mq-large-operator mq-non-leaf"><span class="mq-to"><span>&1</span></span><big>'+e+'</big><span class="mq-from"><span>&0</span></span></span>';$.prototype.init.call(this,t,n)},t.createLeftOf=function(t){e.createLeftOf.apply(this,arguments),t.options.sumStartsWithNEquals&&(xt("n").createLeftOf(t),At().createLeftOf(t))},t.latex=function(){function t(t){return 1===t.length?t:"{"+(t||" ")+"}"}return this.ctrlSeq+"_"+t(this.ends[v].latex())+"^"+t(this.ends[w].latex())},t.parser=function(){var t,e=B.string,n=B.optWhitespace,i=B.succeed,r=F.block,s=this,o=s.blocks=[U(),U()];for(t=0;t<o.length;t+=1)o[t].adopt(s,s.ends[w],0);return n.then(e("_").or(e("^"))).then((function(t){var e=o["_"===t?0:1];return r.then((function(t){return t.children().adopt(e,e.ends[w],0),i(s)}))})).many().result(s)},t.finalizeTree=function(){this.downInto=this.ends[v],this.upInto=this.ends[w],this.ends[v].upOutOf=this.ends[w],this.ends[w].downOutOf=this.ends[v]}})),T["∑"]=T.sum=T.summation=i(st,"\\sum ","&sum;"),T["∏"]=T.prod=T.product=i(st,"\\prod ","&prod;"),T.coprod=T.coproduct=i(st,"\\coprod ","&#8720;"),T["∫"]=T.int=T.integral=q(st,(function(t,e){t.init=function(){$.prototype.init.call(this,"\\int ",'<span class="mq-int mq-non-leaf"><big>&int;</big><span class="mq-supsub mq-non-leaf"><span class="mq-sup"><span class="mq-sup-inner">&1</span></span><span class="mq-sub">&0</span><span style="display:inline-block;width:0">&#8203</span></span></span>')},t.createLeftOf=P.p.createLeftOf})),ot=T.frac=T.dfrac=T.cfrac=T.fraction=q(P,(function(t,e){t.ctrlSeq="\\frac",t.htmlTemplate='<span class="mq-fraction mq-non-leaf"><span class="mq-numerator">&0</span><span class="mq-denominator">&1</span><span style="display:inline-block;width:0">&#8203;</span></span>',t.textTemplate=["(",")/(",")"],t.finalizeTree=function(){this.upInto=this.ends[w].upOutOf=this.ends[v],this.downInto=this.ends[v].downOutOf=this.ends[w]}})),at=T.over=j["/"]=q(ot,(function(e,n){e.createLeftOf=function(e){if(!this.replacedFragment){for(var i=e[v];i&&!(i instanceof X||i instanceof(T.text||t)||i instanceof st||"\\ "===i.ctrlSeq||/^[,;:]$/.test(i.ctrlSeq));)i=i[v];i instanceof st&&i[w]instanceof rt&&((i=i[w])[w]instanceof rt&&i[w].ctrlSeq!=i.ctrlSeq&&(i=i[w])),i!==e[v]&&(this.replaces(O(i[w]||e.parent.ends[v],e[v])),e[v]=i)}n.createLeftOf.call(this,e)}})),lt=T.sqrt=T["√"]=q(P,(function(t,e){t.ctrlSeq="\\sqrt",t.htmlTemplate='<span class="mq-non-leaf"><span class="mq-scaled mq-sqrt-prefix">&radic;</span><span class="mq-non-leaf mq-sqrt-stem">&0</span></span>',t.textTemplate=["sqrt(",")"],t.parser=function(){return F.optBlock.then((function(t){return F.block.map((function(e){var n=ct();return n.blocks=[t,e],t.adopt(n,0,0),e.adopt(n,t,0),n}))})).or(e.parser.call(this))},t.reflow=function(){var t=this.ends[w].jQ;Y(t.prev(),1,t.innerHeight()/+t.css("fontSize").slice(0,-2)-.1)}})),T.hat=q(P,(function(t,e){t.ctrlSeq="\\hat",t.htmlTemplate='<span class="mq-non-leaf"><span class="mq-hat-prefix">^</span><span class="mq-hat-stem">&0</span></span>',t.textTemplate=["hat(",")"]})),ct=T.nthroot=q(lt,(function(t,e){t.htmlTemplate='<sup class="mq-nthroot mq-non-leaf">&0</sup><span class="mq-scaled"><span class="mq-sqrt-prefix mq-scaled">&radic;</span><span class="mq-sqrt-stem mq-non-leaf">&1</span></span>',t.textTemplate=["sqrt[","](",")"],t.latex=function(){return"\\sqrt["+this.ends[v].latex()+"]{"+this.ends[w].latex()+"}"}})),ht=q(P,(function(t,e){t.init=function(t,n,i){var r='<span class="mq-non-leaf"><span class="mq-diacritic-above">'+n+'</span><span class="mq-diacritic-stem">&0</span></span>';e.init.call(this,t,r,i)}})),T.vec=i(ht,"\\vec","&rarr;",["vec(",")"]),T.tilde=i(ht,"\\tilde","~",["tilde(",")"]),ut=q(q(P,f),(function(e,n){e.init=function(t,e,i,r,s){n.init.call(this,"\\left"+r,p,[e,i]),this.side=t,this.sides={},this.sides[v]={ch:e,ctrlSeq:r},this.sides[w]={ch:i,ctrlSeq:s}},e.numBlocks=function(){return 1},e.html=function(){return this.htmlTemplate='<span class="mq-non-leaf"><span class="mq-scaled mq-paren'+(this.side===w?" mq-ghost":"")+'">'+this.sides[v].ch+'</span><span class="mq-non-leaf">&0</span><span class="mq-scaled mq-paren'+(this.side===v?" mq-ghost":"")+'">'+this.sides[w].ch+"</span></span>",n.html.call(this)},e.latex=function(){return"\\left"+this.sides[v].ctrlSeq+this.ends[v].latex()+"\\right"+this.sides[w].ctrlSeq},e.matchBrack=function(t,e,n){return n instanceof ut&&n.side&&n.side!==-e&&(!t.restrictMismatchedBrackets||mt[this.sides[this.side].ch]===n.sides[n.side].ch||{"(":"]","[":")"}[this.sides[v].ch]===n.sides[w].ch)&&n},e.closeOpposing=function(t){t.side=0,t.sides[this.side]=this.sides[this.side],t.delimjQs.eq(this.side===v?0:1).removeClass("mq-ghost").html(this.sides[this.side].ch)},e.createLeftOf=function(t){var e,i,r;this.replacedFragment||(e=t.options,i="|"===this.sides[v].ch?this.matchBrack(e,w,t[w])||this.matchBrack(e,v,t[v])||this.matchBrack(e,0,t.parent.parent):this.matchBrack(e,-this.side,t[-this.side])||this.matchBrack(e,-this.side,t.parent.parent)),i?(r=this.side=-i.side,this.closeOpposing(i),i===t.parent.parent&&t[r]&&O(t[r],t.parent.ends[r],-r).disown().withDirAdopt(-r,i.parent,i,i[r]).jQ.insDirOf(r,i.jQ),i.bubble("reflow")):(r=(i=this).side,i.replacedFragment?i.side=0:t[-r]&&(i.replaces(O(t[-r],t.parent.ends[-r],r)),t[-r]=0),n.createLeftOf.call(i,t)),r===v?t.insAtLeftEnd(i.ends[v]):t.insRightOf(i)},e.placeCursor=t,e.unwrap=function(){this.ends[v].children().disown().adopt(this.parent,this,this[w]).jQ.insertAfter(this.jQ),this.remove()},e.deleteSide=function(t,e,n){var i,r,s,o=this.parent,a=this[t],l=o.ends[t];if(t===this.side)return this.unwrap(),void(a?n.insDirOf(-t,a):n.insAtDirEnd(t,o));if(i=n.options,r=!this.side,this.side=-t,this.matchBrack(i,t,this.ends[v].ends[this.side]))this.closeOpposing(this.ends[v].ends[this.side]),s=this.ends[v].ends[t],this.unwrap(),s.siblingCreated&&s.siblingCreated(n.options,t),a?n.insDirOf(-t,a):n.insAtDirEnd(t,o);else{if(this.matchBrack(i,t,this.parent.parent))this.parent.parent.closeOpposing(this),this.parent.parent.unwrap();else{if(e&&r)return this.unwrap(),void(a?n.insDirOf(-t,a):n.insAtDirEnd(t,o));this.sides[t]={ch:mt[this.sides[this.side].ch],ctrlSeq:mt[this.sides[this.side].ctrlSeq]},this.delimjQs.removeClass("mq-ghost").eq(t===v?0:1).addClass("mq-ghost").html(this.sides[t].ch)}a?(s=this.ends[v].ends[t],O(a,l,-t).disown().withDirAdopt(-t,this.ends[v],s,0).jQ.insAtDirEnd(t,this.ends[v].jQ.removeClass("mq-empty")),s.siblingCreated&&s.siblingCreated(n.options,t),n.insDirOf(-t,a)):e?n.insDirOf(t,this):n.insAtDirEnd(t,this.ends[v])}},e.deleteTowards=function(t,e){this.deleteSide(-t,!1,e)},e.finalizeTree=function(){this.ends[v].deleteOutOf=function(t,e){this.parent.deleteSide(t,!0,e)},this.finalizeTree=this.intentionalBlur=function(){this.delimjQs.eq(this.side===v?1:0).removeClass("mq-ghost"),this.side=0}},e.siblingCreated=function(t,e){e===-this.side&&this.finalizeTree()}})),mt={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{","\\{":"\\}","\\}":"\\{","&lang;":"&rang;","&rang;":"&lang;","\\langle ":"\\rangle ","\\rangle ":"\\langle ","|":"|","\\lVert ":"\\rVert ","\\rVert ":"\\lVert "},d("("),d("["),d("{","\\{"),T.langle=i(ut,v,"&lang;","&rang;","\\langle ","\\rangle "),T.rangle=i(ut,w,"&lang;","&rang;","\\langle ","\\rangle "),j["|"]=i(ut,v,"|","|","|","|"),T.lVert=i(ut,v,"&#8741;","&#8741;","\\lVert ","\\rVert "),T.rVert=i(ut,w,"&#8741;","&#8741;","\\lVert ","\\rVert "),T.left=q(P,(function(t){t.parser=function(){var t=B.regex,e=B.string,n=(B.succeed,B.optWhitespace);return n.then(t(/^(?:[([|]|\\\{|\\langle\b|\\lVert\b)/)).then((function(i){var r="\\"===i.charAt(0)?i.slice(1):i;return"\\langle"==i&&(r="&lang;",i+=" "),"\\lVert"==i&&(r="&#8741;",i+=" "),F.then((function(s){return e("\\right").skip(n).then(t(/^(?:[\])|]|\\\}|\\rangle\b|\\rVert\b)/)).map((function(t){var e,n="\\"===t.charAt(0)?t.slice(1):t;return"\\rangle"==t&&(n="&rang;",t+=" "),"\\rVert"==t&&(n="&#8741;",t+=" "),(e=ut(0,r,n,i,t)).blocks=[s],s.adopt(e,0,0),e}))}))}))}})),T.right=q(P,(function(t){t.parser=function(){return B.fail("unmatched \\right")}})),ft=T.binom=T.binomial=q(q(P,f),(function(t,e){t.ctrlSeq="\\binom",t.htmlTemplate='<span class="mq-non-leaf"><span class="mq-paren mq-scaled">(</span><span class="mq-non-leaf"><span class="mq-array mq-non-leaf"><span>&0</span><span>&1</span></span></span><span class="mq-paren mq-scaled">)</span></span>',t.textTemplate=["choose(",",",")"]})),T.choose=q(ft,(function(t){t.createLeftOf=at.prototype.createLeftOf})),T.editable=T.MathQuillMathField=q(P,(function(t,e){t.ctrlSeq="\\MathQuillMathField",t.htmlTemplate='<span class="mq-editable-field"><span class="mq-root-block">&0</span></span>',t.parser=function(){var t=this,n=B.string,i=B.regex,r=B.succeed;return n("[").then(i(/^[a-z][a-z0-9]*/i)).skip(n("]")).map((function(e){t.name=e})).or(r()).then(e.parser.call(t))},t.finalizeTree=function(t){var e=S(this.ends[v],this.jQ,t);e.KIND_OF_MQ="MathField",e.editable=!0,e.createTextarea(),e.editablesTextareaEvents(),e.cursor.insAtRightEnd(e.root),h(e.root)},t.registerInnerField=function(t,e){t.push(t[this.name]=e(this.ends[v].controller))},t.latex=function(){return this.ends[v].latex()},t.text=function(){return this.ends[v].text()}})),dt=T.embed=q($,(function(t,e){t.setOptions=function(t){function e(){return""}return this.text=t.text||e,this.htmlTemplate=t.htmlString||"",this.latex=t.latex||e,this},t.parser=function(){var t=this,e=B.string,n=B.regex,i=B.succeed;return e("{").then(n(/^[a-z][a-z0-9]*/i)).skip(e("}")).then((function(r){return e("[").then(n(/^[-\w\s]*/)).skip(e("]")).or(i()).map((function(e){return t.setOptions(z[r](e))}))}))}})),pt={},T.begin=q(P,(function(t,e){t.parser=function(){var t=B.string,e=B.regex;return t("{").then(e(/^[a-z]+/i)).skip(t("}")).then((function(e){return(pt[e]?pt[e]().parser():B.fail("unknown environment type: "+e)).skip(t("\\end{"+e+"}"))}))}})),gt=q(P,(function(t,e){t.template=[["\\begin{","}"],["\\end{","}"]],t.wrappers=function(){return[t.template[0].join(this.environment),t.template[1].join(this.environment)]}})),bt=pt.matrix=q(gt,(function(t,e){var n="&",i="\\\\";t.parentheses={left:null,right:null},t.environment="matrix",t.reflow=function(){var t=this.jQ.children("table"),e=t.outerHeight()/+t.css("fontSize").slice(0,-2),n=this.jQ.children(".mq-paren");n.length&&Y(n,Bt(1+.2*(e-1),1.2),1.05*e)},t.latex=function(){var t,e="";return this.eachChild((function(r){void 0!==t&&(e+=t!==r.row?i:n),t=r.row,e+=r.latex()})),this.wrappers().join(e)},t.html=function(){function t(t){return t?'<span class="mq-scaled mq-paren">'+t+"</span>":""}var n,i=[],r="",s=0;return this.eachChild((function(t){n!==t.row&&(n=t.row,r+="<tr>$tds</tr>",i[n]=[]),i[n].push("<td>&"+s+++"</td>")})),this.htmlTemplate='<span class="mq-matrix mq-non-leaf">'+t(this.parentheses.left)+'<table class="mq-non-leaf">'+r.replace(/\$tds/g,(function(){return i.shift().join("")}))+"</table>"+t(this.parentheses.right)+"</span>",e.html.call(this)},t.createBlocks=function(){this.blocks=[qt(0,this),qt(0,this),qt(1,this),qt(1,this)]},t.parser=function(){var t=this,e=B.optWhitespace,r=B.string;return e.then(r(n).or(r(i)).or(F.block)).many().skip(e).then((function(e){function n(){t.blocks.push(qt(o,t,s)),s=[]}var r,s=[],o=0;for(t.blocks=[],r=0;r<e.length;r+=1)e[r]instanceof U?s.push(e[r]):(n(),e[r]===i&&(o+=1));return n(),t.autocorrect(),B.succeed(t)}))},t.finalizeTree=function(){var t=this.jQ.find("table");t.toggleClass("mq-rows-1",1===t.find("tr").length),this.relink()},t.getEntryPoint=function(t,e,n){return"up"===n?t===v?this.blocks[this.rowSize-1]:this.blocks[0]:t===v?this.blocks[this.blocks.length-1]:this.blocks[this.blocks.length-this.rowSize]},t.atExitPoint=function(t,e){var n=this.blocks.indexOf(e.parent);return t===v?n%this.rowSize==0:(n+1)%this.rowSize==0},t.moveTowards=function(t,e,n){var i=n&&this.getEntryPoint(t,e,n);e.insAtDirEnd(-t,i||this.ends[-t])},t.relink=function(){var t,e,n,i,r=this.blocks,s=[];for(this.rowSize=r.length,i=0;i<r.length;i+=1)t!==(n=r[i]).row&&(1===n.row&&(this.rowSize=e),s[t=n.row]=[],e=0),s[t][e]=n,n[w]=r[i+1],n[v]=r[i-1],s[t-1]&&s[t-1][e]&&(n.upOutOf=s[t-1][e],s[t-1][e].downOutOf=n),e+=1;this.ends[v]=r[0],this.ends[w]=r[r.length-1]},t.autocorrect=function(t){var e,n,i,r,s,o,a=[];for(t=[],e=this.blocks,o=0;o<e.length;o+=1)t[s=e[o].row]=t[s]||[],t[s].push(e[o]),a[s]=t[s].length;if((n=Math.max.apply(null,a))!==Math.min.apply(null,a)){for(o=0;o<t.length;o+=1)for(i=n-t[o].length;i;)r=n*o+t[o].length,e.splice(r,0,qt(o,this)),i-=1;this.relink()}},t.deleteCell=function(t){function e(t){var e,n=[];for(e=0;e<t.length;e+=1)t[e].isEmpty()&&n.push(t[e]);return n.length===t.length}function n(t){for(var e=0;e<t.length;e+=1)c.indexOf(t[e])>-1&&(t[e].remove(),c.splice(c.indexOf(t[e]),1))}var i,r,s=[],o=[],a=[],l=[],c=this.blocks;this.eachChild((function(e){i!==e.row&&(i=e.row,s[i]=[],r=0),o[r]=o[r]||[],o[r].push(e),s[i].push(e),e===t&&(a=s[i],l=o[r]),r+=1})),e(a)&&l.length>1&&(i=s.indexOf(a),this.eachChild((function(t){t.row>i&&(t.row-=1)})),n(a),this.jQ.find("tr").eq(i).remove()),e(l)&&a.length>1&&n(l),this.finalizeTree()},t.addRow=function(t){var e,n,i,r=[],s=[],o=[],a=x("<tr></tr>"),l=t.row,c=0;for(this.eachChild((function(e){e.row<=l&&r.push(e),e.row===l&&(e===t&&(n=c),c+=1),e.row>l&&(e.row+=1,o.push(e))})),i=0;i<c;i+=1)(e=qt(l+1)).parent=this,s.push(e),e.jQ=x('<td class="mq-empty">').attr(Mt,e.id).appendTo(a);return this.jQ.find("tr").eq(l).after(a),this.blocks=r.concat(s,o),s[n]},t.addColumn=function(t){var e,n,i,r=[],s=[];for(this.eachChild((function(n){r[n.row]=r[n.row]||[],r[n.row].push(n),n===t&&(e=r[n.row].length)})),i=0;i<r.length;i+=1)(n=qt(i)).parent=this,s.push(n),r[i].splice(e,0,n),n.jQ=x('<td class="mq-empty">').attr(Mt,n.id);return this.jQ.find("tr").each((function(t){x(this).find("td").eq(e-1).after(r[t][e].jQ)})),this.blocks=[].concat.apply([],r),s[t.row]},t.insert=function(t,e){var n=this[t](e);this.cursor=this.cursor||this.parent.cursor,this.finalizeTree(),this.bubble("reflow").cursor.insAtRightEnd(n)},t.backspace=function(t,e,n,i){var r=t[e];if(t.isEmpty()){for(this.deleteCell(t);r&&r[e]&&-1===this.blocks.indexOf(r);)r=r[e];r&&n.insAtDirEnd(-e,r),1===this.blocks.length&&this.blocks[0].isEmpty()&&(i(),this.finalizeTree()),this.bubble("edited")}}})),pt.pmatrix=q(bt,(function(t,e){t.environment="pmatrix",t.parentheses={left:"(",right:")"}})),pt.bmatrix=q(bt,(function(t,e){t.environment="bmatrix",t.parentheses={left:"[",right:"]"}})),pt.Bmatrix=q(bt,(function(t,e){t.environment="Bmatrix",t.parentheses={left:"{",right:"}"}})),pt.vmatrix=q(bt,(function(t,e){t.environment="vmatrix",t.parentheses={left:"|",right:"|"}})),pt.Vmatrix=q(bt,(function(t,e){t.environment="Vmatrix",t.parentheses={left:"&#8214;",right:"&#8214;"}})),qt=q(U,(function(t,e){t.init=function(t,n,i){if(e.init.call(this),this.row=t,n&&this.adopt(n,n.ends[w],0),i)for(var r=0;r<i.length;r++)i[r].children().adopt(this,this.ends[w],0)},t.keystroke=function(t,n,i){switch(t){case"Shift-Spacebar":return n.preventDefault(),this.parent.insert("addColumn",this);case"Shift-Enter":return this.parent.insert("addRow",this)}return e.keystroke.apply(this,arguments)},t.deleteOutOf=function(t,n){var i=this,r=arguments;this.parent.backspace(this,t,n,(function(){return e.deleteOutOf.apply(i,r)}))},t.moveOutOf=function(t,e,n){n&&this.parent.atExitPoint(t,e)||!this[t]?e.insDirOf(t,this.parent):e.insAtDirEnd(-t,this[t])}})),T.notin=T.cong=T.equiv=T.oplus=T.otimes=q(X,(function(t,e){t.init=function(t){e.init.call(this,"\\"+t+" ","&"+t+";")}})),T["≠"]=T.ne=T.neq=i(X,"\\ne ","&ne;"),T["∗"]=T.ast=T.star=T.loast=T.lowast=i(X,"\\ast ","&lowast;"),T.therefor=T.therefore=i(X,"\\therefore ","&there4;"),T.cuz=T.because=i(X,"\\because ","&#8757;"),T.prop=T.propto=i(X,"\\propto ","&prop;"),T["≈"]=T.asymp=T.approx=i(X,"\\approx ","&asymp;"),T.isin=T.in=i(X,"\\in ","&isin;"),T.ni=T.contains=i(X,"\\ni ","&ni;"),T.notni=T.niton=T.notcontains=T.doesnotcontain=i(X,"\\not\\ni ","&#8716;"),T.sub=T.subset=i(X,"\\subset ","&sub;"),T.sup=T.supset=T.superset=i(X,"\\supset ","&sup;"),T.nsub=T.notsub=T.nsubset=T.notsubset=i(X,"\\not\\subset ","&#8836;"),T.nsup=T.notsup=T.nsupset=T.notsupset=T.nsuperset=T.notsuperset=i(X,"\\not\\supset ","&#8837;"),T.sube=T.subeq=T.subsete=T.subseteq=i(X,"\\subseteq ","&sube;"),T.supe=T.supeq=T.supsete=T.supseteq=T.supersete=T.superseteq=i(X,"\\supseteq ","&supe;"),T.nsube=T.nsubeq=T.notsube=T.notsubeq=T.nsubsete=T.nsubseteq=T.notsubsete=T.notsubseteq=i(X,"\\not\\subseteq ","&#8840;"),T.nsupe=T.nsupeq=T.notsupe=T.notsupeq=T.nsupsete=T.nsupseteq=T.notsupsete=T.notsupseteq=T.nsupersete=T.nsuperseteq=T.notsupersete=T.notsuperseteq=i(X,"\\not\\supseteq ","&#8841;"),T.N=T.naturals=T.Naturals=i(H,"\\mathbb{N}","&#8469;"),T.P=T.primes=T.Primes=T.projective=T.Projective=T.probability=T.Probability=i(H,"\\mathbb{P}","&#8473;"),T.Z=T.integers=T.Integers=i(H,"\\mathbb{Z}","&#8484;"),T.Q=T.rationals=T.Rationals=i(H,"\\mathbb{Q}","&#8474;"),T.R=T.reals=T.Reals=i(H,"\\mathbb{R}","&#8477;"),T.C=T.complex=T.Complex=T.complexes=T.Complexes=T.complexplane=T.Complexplane=T.ComplexPlane=i(H,"\\mathbb{C}","&#8450;"),T.H=T.Hamiltonian=T.quaternions=T.Quaternions=i(H,"\\mathbb{H}","&#8461;"),T.quad=T.emsp=i(H,"\\quad ","    "),T.qquad=i(H,"\\qquad ","        "),T.diamond=i(H,"\\diamond ","&#9671;"),T.bigtriangleup=i(H,"\\bigtriangleup ","&#9651;"),T.ominus=i(H,"\\ominus ","&#8854;"),T.uplus=i(H,"\\uplus ","&#8846;"),T.bigtriangledown=i(H,"\\bigtriangledown ","&#9661;"),T.sqcap=i(H,"\\sqcap ","&#8851;"),T.triangleleft=i(H,"\\triangleleft ","&#8882;"),T.sqcup=i(H,"\\sqcup ","&#8852;"),T.triangleright=i(H,"\\triangleright ","&#8883;"),T.odot=T.circledot=i(H,"\\odot ","&#8857;"),T.bigcirc=i(H,"\\bigcirc ","&#9711;"),T.dagger=i(H,"\\dagger ","&#0134;"),T.ddagger=i(H,"\\ddagger ","&#135;"),T.wr=i(H,"\\wr ","&#8768;"),T.amalg=i(H,"\\amalg ","&#8720;"),T.models=i(H,"\\models ","&#8872;"),T.prec=i(H,"\\prec ","&#8826;"),T.succ=i(H,"\\succ ","&#8827;"),T.preceq=i(H,"\\preceq ","&#8828;"),T.succeq=i(H,"\\succeq ","&#8829;"),T.simeq=i(H,"\\simeq ","&#8771;"),T.mid=i(H,"\\mid ","&#8739;"),T.ll=i(H,"\\ll ","&#8810;"),T.gg=i(H,"\\gg ","&#8811;"),T.parallel=i(H,"\\parallel ","&#8741;"),T.nparallel=i(H,"\\nparallel ","&#8742;"),T.bowtie=i(H,"\\bowtie ","&#8904;"),T.sqsubset=i(H,"\\sqsubset ","&#8847;"),T.sqsupset=i(H,"\\sqsupset ","&#8848;"),T.smile=i(H,"\\smile ","&#8995;"),T.sqsubseteq=i(H,"\\sqsubseteq ","&#8849;"),T.sqsupseteq=i(H,"\\sqsupseteq ","&#8850;"),T.doteq=i(H,"\\doteq ","&#8784;"),T.frown=i(H,"\\frown ","&#8994;"),T.vdash=i(H,"\\vdash ","&#8870;"),T.dashv=i(H,"\\dashv ","&#8867;"),T.nless=i(H,"\\nless ","&#8814;"),T.ngtr=i(H,"\\ngtr ","&#8815;"),T.longleftarrow=i(H,"\\longleftarrow ","&#8592;"),T.longrightarrow=i(H,"\\longrightarrow ","&#8594;"),T.Longleftarrow=i(H,"\\Longleftarrow ","&#8656;"),T.Longrightarrow=i(H,"\\Longrightarrow ","&#8658;"),T.longleftrightarrow=i(H,"\\longleftrightarrow ","&#8596;"),T.updownarrow=i(H,"\\updownarrow ","&#8597;"),T.Longleftrightarrow=i(H,"\\Longleftrightarrow ","&#8660;"),T.Updownarrow=i(H,"\\Updownarrow ","&#8661;"),T.mapsto=i(H,"\\mapsto ","&#8614;"),T.nearrow=i(H,"\\nearrow ","&#8599;"),T.hookleftarrow=i(H,"\\hookleftarrow ","&#8617;"),T.hookrightarrow=i(H,"\\hookrightarrow ","&#8618;"),T.searrow=i(H,"\\searrow ","&#8600;"),T.leftharpoonup=i(H,"\\leftharpoonup ","&#8636;"),T.rightharpoonup=i(H,"\\rightharpoonup ","&#8640;"),T.swarrow=i(H,"\\swarrow ","&#8601;"),T.leftharpoondown=i(H,"\\leftharpoondown ","&#8637;"),T.rightharpoondown=i(H,"\\rightharpoondown ","&#8641;"),T.nwarrow=i(H,"\\nwarrow ","&#8598;"),T.ldots=i(H,"\\ldots ","&#8230;"),T.cdots=i(H,"\\cdots ","&#8943;"),T.vdots=i(H,"\\vdots ","&#8942;"),T.ddots=i(H,"\\ddots ","&#8945;"),T.surd=i(H,"\\surd ","&#8730;"),T.triangle=i(H,"\\triangle ","&#9651;"),T.ell=i(H,"\\ell ","&#8467;"),T.top=i(H,"\\top ","&#8868;"),T.flat=i(H,"\\flat ","&#9837;"),T.natural=i(H,"\\natural ","&#9838;"),T.sharp=i(H,"\\sharp ","&#9839;"),T.wp=i(H,"\\wp ","&#8472;"),T.bot=i(H,"\\bot ","&#8869;"),T.clubsuit=i(H,"\\clubsuit ","&#9827;"),T.diamondsuit=i(H,"\\diamondsuit ","&#9826;"),T.heartsuit=i(H,"\\heartsuit ","&#9825;"),T.spadesuit=i(H,"\\spadesuit ","&#9824;"),T.parallelogram=i(H,"\\parallelogram ","&#9649;"),T.square=i(H,"\\square ","&#11036;"),T.oint=i(H,"\\oint ","&#8750;"),T.bigcap=i(H,"\\bigcap ","&#8745;"),T.bigcup=i(H,"\\bigcup ","&#8746;"),T.bigsqcup=i(H,"\\bigsqcup ","&#8852;"),T.bigvee=i(H,"\\bigvee ","&#8744;"),T.bigwedge=i(H,"\\bigwedge ","&#8743;"),T.bigodot=i(H,"\\bigodot ","&#8857;"),T.bigotimes=i(H,"\\bigotimes ","&#8855;"),T.bigoplus=i(H,"\\bigoplus ","&#8853;"),T.biguplus=i(H,"\\biguplus ","&#8846;"),T.lfloor=i(H,"\\lfloor ","&#8970;"),T.rfloor=i(H,"\\rfloor ","&#8971;"),T.lceil=i(H,"\\lceil ","&#8968;"),T.rceil=i(H,"\\rceil ","&#8969;"),T.opencurlybrace=T.lbrace=i(H,"\\lbrace ","{"),T.closecurlybrace=T.rbrace=i(H,"\\rbrace ","}"),T.lbrack=i(H,"["),T.rbrack=i(H,"]"),T.slash=i(H,"/"),T.vert=i(H,"|"),T.perp=T.perpendicular=i(H,"\\perp ","&perp;"),T.nabla=T.del=i(H,"\\nabla ","&nabla;"),T.hbar=i(H,"\\hbar ","&#8463;"),T.AA=T.Angstrom=T.angstrom=i(H,"\\text\\AA ","&#8491;"),T.ring=T.circ=T.circle=i(H,"\\circ ","&#8728;"),T.bull=T.bullet=i(H,"\\bullet ","&bull;"),T.setminus=T.smallsetminus=i(H,"\\setminus ","&#8726;"),T.not=T["¬"]=T.neg=i(H,"\\neg ","&not;"),T["…"]=T.dots=T.ellip=T.hellip=T.ellipsis=T.hellipsis=i(H,"\\dots ","&hellip;"),T.converges=T.darr=T.dnarr=T.dnarrow=T.downarrow=i(H,"\\downarrow ","&darr;"),T.dArr=T.dnArr=T.dnArrow=T.Downarrow=i(H,"\\Downarrow ","&dArr;"),T.diverges=T.uarr=T.uparrow=i(H,"\\uparrow ","&uarr;"),T.uArr=T.Uparrow=i(H,"\\Uparrow ","&uArr;"),T.to=i(X,"\\to ","&rarr;"),T.rarr=T.rightarrow=i(H,"\\rightarrow ","&rarr;"),T.implies=i(X,"\\Rightarrow ","&rArr;"),T.rArr=T.Rightarrow=i(H,"\\Rightarrow ","&rArr;"),T.gets=i(X,"\\gets ","&larr;"),T.larr=T.leftarrow=i(H,"\\leftarrow ","&larr;"),T.impliedby=i(X,"\\Leftarrow ","&lArr;"),T.lArr=T.Leftarrow=i(H,"\\Leftarrow ","&lArr;"),T.harr=T.lrarr=T.leftrightarrow=i(H,"\\leftrightarrow ","&harr;"),T.iff=i(X,"\\Leftrightarrow ","&hArr;"),T.hArr=T.lrArr=T.Leftrightarrow=i(H,"\\Leftrightarrow ","&hArr;"),T.Re=T.Real=T.real=i(H,"\\Re ","&real;"),T.Im=T.imag=T.image=T.imagin=T.imaginary=T.Imaginary=i(H,"\\Im ","&image;"),T.part=T.partial=i(H,"\\partial ","&part;"),T.infty=T.infin=T.infinity=i(H,"\\infty ","&infin;"),T.alef=T.alefsym=T.aleph=T.alephsym=i(H,"\\aleph ","&alefsym;"),T.xist=T.xists=T.exist=T.exists=i(H,"\\exists ","&exist;"),T.nexists=T.nexist=i(H,"\\nexists ","&#8708;"),T.and=T.land=T.wedge=i(X,"\\wedge ","&and;"),T.or=T.lor=T.vee=i(X,"\\vee ","&or;"),T.o=T.O=T.empty=T.emptyset=T.oslash=T.Oslash=T.nothing=T.varnothing=i(X,"\\varnothing ","&empty;"),T.cup=T.union=i(X,"\\cup ","&cup;"),T.cap=T.intersect=T.intersection=i(X,"\\cap ","&cap;"),T.deg=T.degree=i(H,"\\degree ","&deg;"),T.ang=T.angle=i(H,"\\angle ","&ang;"),T.measuredangle=i(H,"\\measuredangle ","&#8737;"),vt=q(H,(function(t,e){t.createLeftOf=function(t){t.options.autoSubscriptNumerals&&t.parent!==t.parent.parent.sub&&(t[v]instanceof wt&&!1!==t[v].isItalic||t[v]instanceof rt&&t[v][v]instanceof wt&&!1!==t[v][v].isItalic)?(T._().createLeftOf(t),e.createLeftOf.call(this,t),t.insRightOf(t.parent.parent)):e.createLeftOf.call(this,t)}})),wt=q($,(function(t,e){t.init=function(t,n){e.init.call(this,t,"<var>"+(n||t)+"</var>")},t.text=function(){var t=this.ctrlSeq;return this.isPartOfOperator?"\\"==t[0]?t=t.slice(1,t.length):" "==t[t.length-1]&&(t=t.slice(0,-1)):(!this[v]||this[v]instanceof wt||this[v]instanceof X||"\\ "===this[v].ctrlSeq||(t="*"+t),!this[w]||this[w]instanceof X||this[w]instanceof rt||(t+="*")),t}})),_.p.autoCommands={_maxLength:0},E.autoCommands=function(t){var e,n,i,r,s;if(!/^[a-z]+(?: [a-z]+)*$/i.test(t))throw'"'+t+'" not a space-delimited list of only letters';for(e=t.split(" "),n={},i=0,r=0;r<e.length;r+=1){if((s=e[r]).length<2)throw'autocommand "'+s+'" not minimum length of 2';if(T[s]===Tt)throw'"'+s+'" is a built-in operator name';n[s]=1,i=Ft(i,s.length)}return n._maxLength=i,n},xt=q(wt,(function(t,e){function n(t){return!t||t instanceof X||t instanceof st}t.init=function(t){return e.init.call(this,this.letter=t)},t.createLeftOf=function(t){var n,i,r,s,o;if(e.createLeftOf.apply(this,arguments),(i=(n=t.options.autoCommands)._maxLength)>0){for(r="",s=this,o=0;s instanceof xt&&s.ctrlSeq===s.letter&&o<i;)r=s.letter+r,s=s[v],o+=1;for(;r.length;){if(n.hasOwnProperty(r)){for(o=1,s=this;o<r.length;o+=1,s=s[v]);return O(s,this).remove(),t[v]=s[v],T[r](r).createLeftOf(t)}r=r.slice(1)}}},t.italicize=function(t){return this.isItalic=t,this.isPartOfOperator=!t,this.jQ.toggleClass("mq-operator-name",!t),this},t.finalizeTree=t.siblingDeleted=t.siblingCreated=function(t,e){e!==v&&this[w]instanceof xt||this.autoUnItalicize(t)},t.autoUnItalicize=function(t){var e,i,r,s,o,a,l,c,h,u,m,f,d=t.autoOperatorNames;if(0!==d._maxLength){for(e=this.letter,i=this[v];i instanceof xt;i=i[v])e=i.letter+e;for(r=this[w];r instanceof xt;r=r[w])e+=r.letter;O(i[w]||this.parent.ends[v],r[v]||this.parent.ends[w]).each((function(t){t.italicize(!0).jQ.removeClass("mq-first mq-last mq-followed-by-supsub"),t.ctrlSeq=t.letter}));t:for(s=0,o=i[w]||this.parent.ends[v];s<e.length;s+=1,o=o[w])for(a=Bt(d._maxLength,e.length-s);a>0;a-=1)if(l=e.slice(s,s+a),d.hasOwnProperty(l)){for(c=0,h=o;c<a;c+=1,h=h[w])h.italicize(!1),u=h;m=yt.hasOwnProperty(l),o.ctrlSeq=(m?"\\":"\\operatorname{")+o.ctrlSeq,u.ctrlSeq+=m?" ":"}",Ot.hasOwnProperty(l)&&u[v][v][v].jQ.addClass("mq-last"),n(o[v])||o.jQ.addClass("mq-first"),n(u[w])||(u[w]instanceof rt?((f=u[w]).siblingCreated=f.siblingDeleted=function(){f.jQ.toggleClass("mq-after-operator-name",!(f[w]instanceof ut))})():u.jQ.toggleClass("mq-last",!(u[w]instanceof ut))),s+=a-1,o=u;continue t}}}})),yt={},kt=_.p.autoOperatorNames={_maxLength:9},Ot={limsup:1,liminf:1,projlim:1,injlim:1},function(){var t,e,n,i,r="arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" ");for(t=0;t<r.length;t+=1)yt[r[t]]=kt[r[t]]=1;for(e="sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" "),t=0;t<e.length;t+=1)yt[e[t]]=1;for(n="sin cos tan sec cosec csc cotan cot ctg".split(" "),t=0;t<n.length;t+=1)kt[n[t]]=kt["arc"+n[t]]=kt[n[t]+"h"]=kt["ar"+n[t]+"h"]=kt["arc"+n[t]+"h"]=1;for(i="gcf hcf lcm proj span".split(" "),t=0;t<i.length;t+=1)kt[i[t]]=1}(),E.autoOperatorNames=function(t){var e,n,i,r,s;if(!/^[a-z]+(?: [a-z]+)*$/i.test(t))throw'"'+t+'" not a space-delimited list of only letters';for(e=t.split(" "),n={},i=0,r=0;r<e.length;r+=1){if((s=e[r]).length<2)throw'"'+s+'" not minimum length of 2';n[s]=1,i=Ft(i,s.length)}return n._maxLength=i,n},Tt=q($,(function(t,e){t.init=function(t){this.ctrlSeq=t},t.createLeftOf=function(t){var e,n=this.ctrlSeq;for(e=0;e<n.length;e+=1)xt(n.charAt(e)).createLeftOf(t)},t.parser=function(){var t,e=this.ctrlSeq,n=U();for(t=0;t<e.length;t+=1)xt(e.charAt(t)).adopt(n,n.ends[w],0);return B.succeed(n.children())}})),kt)kt.hasOwnProperty(jt)&&(T[jt]=Tt);for(Lt in T.operatorname=q(P,(function(e){e.createLeftOf=t,e.numBlocks=function(){return 1},e.parser=function(){return F.block.map((function(t){return t.children()}))}})),T.f=q(xt,(function(t,e){t.init=function(){$.p.init.call(this,this.letter="f",'<var class="mq-f">f</var>')},t.italicize=function(t){return this.jQ.html("f").toggleClass("mq-f",t),e.italicize.apply(this,arguments)}})),T[" "]=T.space=i(H,"\\ ","&nbsp;"),T["'"]=T.prime=i(H,"'","&prime;"),T["″"]=T.dprime=i(H,"″","&Prime;"),T.backslash=i(H,"\\backslash ","\\"),j["\\"]||(j["\\"]=T.backslash),T.$=i(H,"\\$","$"),Qt=q($,(function(t,e){t.init=function(t,n){e.init.call(this,t,'<span class="mq-nonSymbola">'+(n||t)+"</span>")}})),T["@"]=Qt,T["&"]=i(Qt,"\\&","&amp;"),T["%"]=i(Qt,"\\%","%"),T.alpha=T.beta=T.gamma=T.delta=T.zeta=T.eta=T.theta=T.iota=T.kappa=T.mu=T.nu=T.xi=T.rho=T.sigma=T.tau=T.chi=T.psi=T.omega=q(wt,(function(t,e){t.init=function(t){e.init.call(this,"\\"+t+" ","&"+t+";")}})),T.phi=i(wt,"\\phi ","&#981;"),T.phiv=T.varphi=i(wt,"\\varphi ","&phi;"),T.epsilon=i(wt,"\\epsilon ","&#1013;"),T.epsiv=T.varepsilon=i(wt,"\\varepsilon ","&epsilon;"),T.piv=T.varpi=i(wt,"\\varpi ","&piv;"),T.sigmaf=T.sigmav=T.varsigma=i(wt,"\\varsigma ","&sigmaf;"),T.thetav=T.vartheta=T.thetasym=i(wt,"\\vartheta ","&thetasym;"),T.upsilon=T.upsi=i(wt,"\\upsilon ","&upsilon;"),T.gammad=T.Gammad=T.digamma=i(wt,"\\digamma ","&#989;"),T.kappav=T.varkappa=i(wt,"\\varkappa ","&#1008;"),T.rhov=T.varrho=i(wt,"\\varrho ","&#1009;"),T.pi=T["π"]=i(Qt,"\\pi ","&pi;"),T.lambda=i(Qt,"\\lambda ","&lambda;"),T.Upsilon=T.Upsi=T.upsih=T.Upsih=i($,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>'),T.Gamma=T.Delta=T.Theta=T.Lambda=T.Xi=T.Pi=T.Sigma=T.Phi=T.Psi=T.Omega=T.forall=q(H,(function(t,e){t.init=function(t){e.init.call(this,"\\"+t+" ","&"+t+";")}})),Ct=q(P,(function(t){t.init=function(t){this.latex=t},t.createLeftOf=function(t){var e=F.parse(this.latex);e.children().adopt(t.parent,t[v],t[w]),t[v]=e.ends[w],e.jQize().insertBefore(t.jQ),e.finalizeInsert(t.options,t),e.ends[w][w].siblingCreated&&e.ends[w][w].siblingCreated(t.options,v),e.ends[v][v].siblingCreated&&e.ends[v][v].siblingCreated(t.options,w),t.parent.bubble("reflow")},t.parser=function(){var t=F.parse(this.latex).children();return B.succeed(t)}})),T["¹"]=i(Ct,"^1"),T["²"]=i(Ct,"^2"),T["³"]=i(Ct,"^3"),T["¼"]=i(Ct,"\\frac14"),T["½"]=i(Ct,"\\frac12"),T["¾"]=i(Ct,"\\frac34"),St=q(X,(function(t){t.init=H.prototype.init,t.contactWeld=t.siblingCreated=t.siblingDeleted=function(t,e){if(e!==w)return this.jQ[0].className=function t(e){return e[v]?e[v]instanceof X||/^[,;:\(\[]$/.test(e[v].ctrlSeq)?"":"mq-binary-operator":e.parent&&e.parent.parent&&e.parent.parent.isStyleBlock()?t(e.parent.parent):""}(this),this}})),T["+"]=i(St,"+","+"),T["–"]=T["-"]=i(St,"-","&minus;"),T["±"]=T.pm=T.plusmn=T.plusminus=i(St,"\\pm ","&plusmn;"),T.mp=T.mnplus=T.minusplus=i(St,"\\mp ","&#8723;"),j["*"]=T.sdot=T.cdot=i(X,"\\cdot ","&middot;","*"),Dt=q(X,(function(t,e){t.init=function(t,n){this.data=t,this.strict=n;var i=n?"Strict":"";e.init.call(this,t["ctrlSeq"+i],t["html"+i],t["text"+i])},t.swap=function(t){this.strict=t;var e=t?"Strict":"";this.ctrlSeq=this.data["ctrlSeq"+e],this.jQ.html(this.data["html"+e]),this.textTemplate=[this.data["text"+e]]},t.deleteTowards=function(t,n){if(t===v&&!this.strict)return this.swap(!0),void this.bubble("reflow");e.deleteTowards.apply(this,arguments)}})),_t={ctrlSeq:"\\le ",html:"&le;",text:"≤",ctrlSeqStrict:"<",htmlStrict:"&lt;",textStrict:"<"},Et={ctrlSeq:"\\ge ",html:"&ge;",text:"≥",ctrlSeqStrict:">",htmlStrict:"&gt;",textStrict:">"},T["<"]=T.lt=i(Dt,_t,!0),T[">"]=T.gt=i(Dt,Et,!0),T["≤"]=T.le=T.leq=i(Dt,_t,!1),T["≥"]=T.ge=T.geq=i(Dt,Et,!1),At=q(X,(function(t,e){t.init=function(){e.init.call(this,"=","=")},t.createLeftOf=function(t){if(t[v]instanceof Dt&&t[v].strict)return t[v].swap(!1),void t[v].bubble("reflow");e.createLeftOf.apply(this,arguments)}})),T["="]=At,T["×"]=T.times=i(X,"\\times ","&times;","[x]"),T["÷"]=T.div=T.divide=T.divides=i(X,"\\div ","&divide;","[/]"),j["~"]=T.sim=i(X,"\\sim ","~","~"),zt=c(1))!function(t,e){"function"==typeof e?(l[t]=function(){return a(),e.apply(this,arguments)},l[t].prototype=e.prototype):l[t]=e}(Lt,zt[Lt])}()}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={id:i,exports:{}};return t[i](s,s.exports,n),s.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.nc=void 0,function(){"use strict";var t=n(379),e=n.n(t),i=n(795),r=n.n(i),s=n(569),o=n.n(s),a=n(565),l=n.n(a),c=n(216),h=n.n(c),u=n(589),m=n.n(u),f=n(135),d={};d.styleTagTransform=m(),d.setAttributes=l(),d.insert=o().bind(null,"head"),d.domAPI=r(),d.insertStyleElement=h();e()(f.Z,d),f.Z&&f.Z.locals&&f.Z.locals,n(953)}()}();