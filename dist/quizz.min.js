!function(){"use strict";var t={707:function(t,e,n){var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,".ib-quizz-right{margin-left:8px;border-radius:50%;background-color:#438c43;color:white;width:23px;display:inline-block;height:23px;text-align:center}.ib-quizz-wrong{margin-left:8px;border-radius:50%;background-color:#a43c3c;color:white;width:23px;display:inline-block;height:23px;text-align:center}.ib-quizz-error{margin-left:8px;border-radius:50%;background-color:#72395a;color:white;width:23px;display:inline-block;height:23px;text-align:center}.ib-quizz-hint,.ib-quizz-feedback{margin-left:8px;border-radius:50%;background-color:#a3a3a3;color:black;width:23px;display:inline-block;height:23px;text-align:center;cursor:pointer}",""]),e.Z=a},645:function(t){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var u=0;u<this.length;u++){var s=this[u][0];null!=s&&(a[s]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);r&&a[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),e.push(l))}},e}},81:function(t){t.exports=function(t){return t[1]}},379:function(t){var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var i={},a=[],u=0;u<t.length;u++){var s=t[u],c=r.base?s[0]+r.base:s[0],l=i[c]||0,f="".concat(c," ").concat(l);i[c]=l+1;var p=n(f),d={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==p)e[p].references++,e[p].updater(d);else{var h=o(d,r);r.byIndex=u,e.splice(u,0,{identifier:f,updater:h,references:1})}a.push(f)}return a}function o(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var i=r(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var u=n(i[a]);e[u].references--}for(var s=r(t,o),c=0;c<i.length;c++){var l=n(i[c]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}i=s}}},569:function(t){var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:function(t){t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:function(t,e,n){t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:function(t){t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:function(t){t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,exports:{}};return t[r](i,i.exports,n),i.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.nc=void 0,function(){function t(n,o,i){return t=e()?Reflect.construct.bind():function(t,e,n){var o=[null];o.push.apply(o,e);var i=new(Function.bind.apply(t,o));return n&&r(i,n.prototype),i},t.apply(null,arguments)}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){e=e||0,window.require&&"function"==typeof window.require?t():e>15?console.error("ERROR: Cannot find requirejs"):window.setTimeout((function(){a(t,e+1)}),500)}function u(t,e){var n=document.createElement(t);return Object.keys(e).forEach((function(t){var r=e[t];"class"===t?r.trim().split(/\s+/).forEach((function(t){n.classList.add(t)})):"style"===t?r.split(";").forEach((function(t){var e=t.split(":");2===e.length&&n.style.setProperty(e[0].trim(),e[1].trim())})):"html"===t?n.innerHTML=r:n.setAttribute(t,r)})),n}function s(e,n){e=e||{};var r=Object.keys(e),i=[].concat(r,["expr","return eval(expr)"]),a=t(Function,o(i)),u=Object.values(e),s=[].concat(u,[n]);return a.apply(void 0,o(s))}function c(t){t.forEach((function(t){var e=window.IB;if(t.meta){var n=t.meta;if(e.sd[n.name]&&"function"==typeof e.sd[n.name].init)return console.error("Warning: component '".concat(n.name,"' loaded twice.")),void e.sd[n.name].init();!function r(){e.sd[n.name]=e.sd[n.name]||{inst:{},_class:t,init:r,dispose:null};var o=n.query||'div[role="snptd_'.concat(n.name,'"], div[data-snptd="').concat(n.name,'"]');if("body"===o){if(e.sd[n.name].singl)return void console.error("Singleton already defined");var i=document.querySelector("body"),a=new t(i);a.init(),e.sd[n.name].singl=a,"_init: Initialized singleton '".concat(n.name,"' instance.")}else{var u=function(t){return document.querySelectorAll(t)}(o),s=0;u.forEach((function(r){var o=r,i=o.getAttribute("id");if(i||(i="sd_"+Math.random().toString(32).substring(2),o.setAttribute("id",i)),"1"!==o.dataset.active){var a=new t(o);a.init(),null!=e.sd[n.name].inst&&(e.sd[n.name].inst[i]=a),s++}else console.warn("Warning: Element '".concat(n.name,"' ").concat(i," already processed."))})),"_init: Initialized ".concat(s," '").concat(n.name,"' instances.")}}();e.sd[n.name].dispose=function(){var t=0;window.IB&&window.IB.sd&&window.IB.sd[n.name]&&window.IB.sd[n.name].inst&&(Object.keys(window.IB.sd[n.name].inst).forEach((function(r){var o=window.IB.sd[n.name].inst[r];o&&(o.dispose(),t++,delete e.sd[n.name].inst[r])})),"_dispose: Destroyed ".concat(t," '").concat(n.name,"' instances."))}}else console.error("Missing meta in class ",t,". Annotate it with @Component")}))}var l=function(t){window.IB=window.IB||{sd:{}};var e=t;e.map((function(t){var e;return(null===(e=t.meta)||void 0===e?void 0:e.use$)||!1})).reduce((function(t,e){return e||t}))?a((function(){requirejs(["jquery"],(function(){$((function(){var t;"function"==typeof(null===(t=window.IB)||void 0===t?void 0:t.on$Ready)&&window.IB.on$Ready(),c(e)}))}))}),15):c(e)},f=n(379),p=n.n(f),d=n(795),h=n.n(d),y=n(569),v=n.n(y),b=n(565),m=n.n(b),g=n(216),w=n.n(g),O=n(589),S=n.n(O),C=n(707),j={};j.styleTagTransform=S(),j.setAttributes=m(),j.insert=v().bind(null,"head"),j.domAPI=h(),j.insertStyleElement=w();p()(C.Z,j),C.Z&&C.Z.locals&&C.Z.locals;function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===k(i)?i:String(i)),r)}var o,i}function x(t,e,n){return e&&E(t.prototype,e),n&&E(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var P=x((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.parent=e}));function _(t){return function(t){if(Array.isArray(t))return A(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var R={name:"",author:"",version:"1.0",use$:!1};function T(t){return function(e){var n=e.prototype.connectedCallback,r=t.elementName,o=t.classes,i=t.styles;e.prototype.connectedCallback=function(){var t;o&&(t=this.classList).add.apply(t,_(o));i&&Object.assign(this.style,i),n&&n.apply(this)},customElements.define(r,e)}}var z,I={ca:{check:"Comprova",chooseone:"Tria una opció",right:"Ben fet!",wrong:"Ho sento. Intentau-ho de nou",error:"Hi ha hagut un error processant la resposta",random_msg:"Aquestes activitats contenen preguntes aleatòries que es generen cada vegada que es carrega la pàgina."},es:{check:"Comprueba",chooseone:"Elige una opción",right:"¡Bien hecho!",wrong:"Lo siento. Inténtalo de nuevo.",error:"Ha habido un error procesando la respuesta",random_msg:"Estas actividades contienen preguntas aleatorias que se generan cada vez que se carga la página."},en:{check:"Check",chooseone:"Choose one",right:"Well done!",wrong:"Try it again.",error:"There has been an error processing the answer",random_msg:"These activities contain random questions that are generated at every page load."},fr:{check:"Vérifier",chooseone:"Choisis une option",right:"¡Bien hecho!",wrong:"Lo siento. Inténtalo de nuevo.",error:"Ha habido un error procesando la respuesta",random_msg:"Estas actividades contienen preguntas aleatorias que se generan cada vez que se carga la página."},de:{check:"Prüfen",chooseone:"Wähle eine option",right:"¡Bien hecho!",wrong:"Lo siento. Inténtalo de nuevo.",error:"Ha habido un error procesando la respuesta",random_msg:"Estas actividades contienen preguntas aleatorias que se generan cada vez que se carga la página."}};function L(t,e){var n=I[t];return n||(n=I.ca),n[e]||e}function N(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[n],t[n]=r}}function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function q(t){return function(t){if(Array.isArray(t))return B(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return B(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function D(t){var e=[];return t.split(".").forEach((function(t){var n=t.split("["),r=n[0].trim();r.length&&(e.push(r),n.length>1&&e.push("["+n[1].trim()))})),e}function H(t,e){if(0===t.length)return null;if(1===t.length)return e;for(var n=e,r=0,o=t.length-1;null!=n&&r<o;){var i=t[r];if(i.indexOf("[")>=0){var a=parseInt(i.replace(/[[\]]/g,""));if(Array.isArray(n)){var u=n;a<u.length?n=u[a]:(console.error("Index out of bounds ",t.join(""),a,u),n=null)}else console.error("Not an array",t.join(""),n),n=null}else{var s=n;n=null!=s[i]?s[i]:null}r++}return n}function F(t,e,n){var r=H(t,e),o=!1;if(null!=r){var i=t[t.length-1];if(i.indexOf("[")>=0){if(Array.isArray(r)){var a=r,u=parseInt(i.replace(/[[\]]/g,""));u<a.length&&(a[u]=n,o=!0)}}else if("object"===M(r))r[i]=n,o=!0}return o}function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function V(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==U(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===U(i)?i:String(i)),r)}var o,i}!function(t){t[t.CLOSE=0]="CLOSE",t[t.CANCEL_ACCEPT=1]="CANCEL_ACCEPT",t[t.CANCEL_ACCEPT_FORM=2]="CANCEL_ACCEPT_FORM",t[t.CANCEL_ACCEPT_FORM_VALIDATION=3]="CANCEL_ACCEPT_FORM_VALIDATION"}(z||(z={}));var J=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Diàleg";V(this,t),this.type=n;var o=n===z.CANCEL_ACCEPT_FORM||n===z.CANCEL_ACCEPT_FORM_VALIDATION;this.hasValidation=n===z.CANCEL_ACCEPT_FORM_VALIDATION;var i="",a="";o&&(i="<form".concat(this.hasValidation?' class="needs-validation" novalidate':"",">"),a="</form>");var u='<button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">'.concat(n===z.CLOSE?"Tancar":"Cancel·lar","</button>");n!==z.CLOSE&&(u+='<button type="'.concat(o?"submit":"button",'" class="btn btn-sm btn-primary">Acceptar</button>')),this.elem=$('\n            <div class="modal fade moodle-dialogue" id="'.concat(e,'" tabindex="-1" aria-labelledby="bsdialog" aria-hidden="true">\n            <div class="modal-dialog">\n                <div class="modal-content">\n                  <div class="modal-header">\n                    <h5 class="modal-title">').concat(r,'</h5>\n                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                      <span aria-hidden="true">&times;</span>\n                    </button>\n                  </div>\n                  ').concat(i,'\n                  <div class="modal-body" style="max-height:400px;overflow-y:auto;font-size:90%;">\n                  </div>\n                  <div class="modal-footer">\n                    ').concat(u,"\n                  </div>\n                  ").concat(a,"\n                </div>\n                </div>")),this.body=this.elem.find("div.modal-body"),this.header=this.elem.find("h5.modal-title"),this.primaryButton=this.elem.find("button.btn.btn-primary"),this.form=this.elem.find("form"),this.validationDiv=this.elem.find("div.alert.alert-danger"),$("body").append(this.elem)}var e,n,r;return e=t,(n=[{key:"resetDialog",value:function(){this.body.html(""),this.primaryButton&&this.primaryButton.off(),this.form&&(this.form.off(),this.form.removeClass("was-validated")),this.validationDiv.css("display","none"),this.validationDiv.html("")}},{key:"setBody",value:function(t){var e=this;this.resetDialog();var n=$(t);this.validationDiv=$('<div class="alert alert-danger" style="display:none;max-height:100px;overflow-y:auto;"></div>'),this.body.append(this.validationDiv),this.body.append(n),this.primaryButton&&(this.form?this.form.on("submit",(function(t){if(t.preventDefault(),t.stopPropagation(),e.hasValidation){e.form.addClass("was-validated"),e.updateValues();var n=e.customValidation();if(n&&null!=e.validationDiv)return e.validationDiv.css("display",""),e.validationDiv.html(n),void(e.validationDiv.offset()&&e.body.animate({scrollTop:0}));e.form[0].checkValidity()&&(e.elem.modal("hide"),e.acceptCb&&e.acceptCb(e.scope))}else e.updateValues(),e.acceptCb&&e.acceptCb(e.scope)})):this.primaryButton.on("click",(function(t){t.preventDefault(),e.acceptCb&&e.acceptCb(),e.elem.modal("hide")})))}},{key:"setValues",value:function(t){this.scope=t,this.body.find("input[id], textarea[id], select[id]").each((function(e,n){var r=(n.getAttribute("id")||"").split("_");if(!(r.length<2)){var o=function(t,e){var n=H([].concat(q(t),[""]),e);return null!=n?["string","boolean","number"].includes(M(n))?n+"":JSON.stringify(n):null}(D(r[r.length-1]),t);if("TEXTAREA"===n.nodeName)n.value=o||"";else{var i=n,a=(i.getAttribute("type")||"").toLowerCase();"radio"===a||"checkbox"===a?i.checked="true"===o:i.value=o||""}}}))}},{key:"updateValues",value:function(){var t=this;null!=this.scope&&this.body.find("input[id], textarea[id], select[id]").each((function(e,n){var r=(n.getAttribute("id")||"").split("_");if(!(r.length<2)){var o=D(r[r.length-1]);if("TEXTAREA"===n.nodeName){var i=n.value||"";F(o,t.scope,i)}else{var a=n,u=(a.getAttribute("type")||"").toLowerCase(),s="radio"===u||"checkbox"===u;F(o,t.scope,s?a.checked:a.value)}}}))}},{key:"setBodyBindings",value:function(t,e){var n=u("div",{style:"width:100%;padding:10px",html:t});this.setBody(n),this.setValues(e)}},{key:"customValidation",value:function(){return null}},{key:"setTitle",value:function(t){this.header.html(t)}},{key:"show",value:function(t){var e=this;this.elem.modal("show"),window.setTimeout((function(){return e.body.scrollTop(0)}),400),this.acceptCb=t}}])&&G(e.prototype,n),r&&G(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==W(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===W(i)?i:String(i)),r)}var o,i}function Z(t,e){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Z(t,e)}function X(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Y(t);if(e){var o=Y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return K(this,n)}}function K(t,e){if(e&&("object"===W(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Y(t){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Y(t)}var tt,et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Z(t,e)}(i,t);var e,n,r,o=X(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t,z.CLOSE,"")}return e=i,n&&Q(e.prototype,n),r&&Q(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(J),nt={};function rt(t,e){var n=nt[t];return n||(n=new et(t),nt[t]=n),n.setTitle(e),n}function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function it(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ut(r.key),r)}}function at(t,e,n){return(e=ut(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ut(t){var e=function(t,e){if("object"!==ot(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ot(e)?e:String(e)}!function(t){t[t.ERROR=0]="ERROR",t[t.UNSET=1]="UNSET",t[t.WRONG=2]="WRONG",t[t.RIGHT=3]="RIGHT"}(tt||(tt={}));var st=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),at(this,"status",tt.UNSET),at(this,"lang","ca"),this.spanStatus=document.createElement("span"),this.spanStatus.setAttribute("data-toggle","tooltip"),this.spanHint=u("span",{dataToggle:"tooltip",class:"ib-quizz-hint",title:"Mostrar pista",style:"display:none;",html:'<i class="'.concat("fa fas fa-life-ring",'"></i>')}),this.feedbackSpan=u("span",{class:"ib-quizz-feedback",dataToggle:"tooltip",title:"Mostrar solució",style:"display:none;",html:'<i class="'.concat("fa fas fa-question",'"></i>')}),this.divBlock=u("div",{style:"display:inline-block;"}),this.divBlock.append(this.spanStatus),this.divBlock.append(this.spanHint),this.divBlock.append(this.feedbackSpan)}var e,n,r;return e=t,(n=[{key:"setStatus",value:function(t,e){this.status=t;var n=this.spanStatus.classList,r=e;switch(t){case tt.UNSET:n.remove("ib-quizz-right","ib-quizz-wrong","ib-quizz-error"),this.spanStatus.innerHTML="";break;case tt.RIGHT:n.add("ib-quizz-right"),r||(r=L(this.lang,"right")),this.spanStatus.innerHTML='<i class="'.concat("fa fas fa-check",'"></i>');break;case tt.WRONG:n.add("ib-quizz-wrong"),r||(r=L(this.lang,"wrong")),this.spanStatus.innerHTML='<i class="'.concat("fa fas fa-times",'"></i>');break;default:n.add("ib-quizz-error"),r||(r=L(this.lang,"error")),this.spanStatus.innerHTML='<i class="'.concat("fa fas fa-exclamation",'"></i>')}r&&this.spanStatus.setAttribute("title",r)}},{key:"getStatus",value:function(){return this.status}},{key:"setLang",value:function(t){this.lang=t}},{key:"setHint",value:function(t){this.spanHint.addEventListener("click",(function(){var e=rt("ib-quizz-modal-dlg","Una pista..."),n=u("div",{html:t});e.setBody(n),e.show()})),this.spanHint.style.setProperty("display","")}},{key:"setFeedback",value:function(t){this.feedbackSpan.addEventListener("click",(function(){var e=rt("ib-quizz-modal-dlg","Retroacció"),n=u("div",{html:t});e.setBody(n),e.show()})),this.spanHint.style.setProperty("display","none"),this.feedbackSpan.style.setProperty("display","")}},{key:"getElement",value:function(){return this.divBlock}}])&&it(e.prototype,n),r&&it(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function lt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wt(r.key),r)}}function pt(t,e){if(e&&("object"===ct(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return dt(t)}function dt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ht(t){var e="function"==typeof Map?new Map:void 0;return ht=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return yt(t,arguments,mt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),bt(r,t)},ht(t)}function yt(t,e,n){return yt=vt()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&bt(o,n.prototype),o},yt.apply(null,arguments)}function vt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function bt(t,e){return bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bt(t,e)}function mt(t){return mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mt(t)}function gt(t,e,n){return(e=wt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wt(t){var e=function(t,e){if("object"!==ct(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ct(e)?e:String(e)}var Ot,St=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bt(t,e)}(u,t);var e,n,r,o,i,a=(e=u,n=vt(),function(){var t,r=mt(e);if(n){var o=mt(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return pt(this,t)});function u(){var t;lt(this,u);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return gt(dt(t=a.call.apply(a,[this].concat(n))),"lang","ca"),gt(dt(t),"_syncCount",0),gt(dt(t),"attempts",0),gt(dt(t),"hintSet",!1),gt(dt(t),"feedbackSet",!1),t}return r=u,(o=[{key:"init",value:function(t){if(t){var e=document.createElement("span");e.innerHTML=t,this.prepend(e)}}},{key:"connectedCallback",value:function(){this.innerHTML="",this.classList.add("d-print-none"),this.statusDisplay=new st;var t=this.dataset.src||"";try{t=atob(t),this.widgetConfig=JSON.parse(t)}catch(t){return void console.error(t)}this.widgetConfig,this._syncCount++,3===this._syncCount&&this.render()}},{key:"reflowLatex",value:function(){window.MathJax&&(window.MathJax.typesetPromise&&window.MathJax.typesetPromise(),window.MathJax.Hub&&window.MathJax.Hub.Queue&&window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub]))}},{key:"setLang",value:function(t){var e;this.lang=t,null===(e=this.statusDisplay)||void 0===e||e.setLang(t),this._syncCount++,3===this._syncCount&&this.render()}},{key:"setGroupContext",value:function(t){this.groupContext=t,this.groupContext,this._syncCount++,3===this._syncCount&&this.render()}},{key:"setStatus",value:function(t,e){var n;null===(n=this.statusDisplay)||void 0===n||n.setStatus(t,e)}},{key:"incAttempts",value:function(){var t,e,n,r;this.attempts++;var o,i,a,u,s=(null===(t=this.groupContext)||void 0===t?void 0:t.o.hint)||0,c=(null===(e=this.groupContext)||void 0===e?void 0:e.o.ans)||0;!this.hintSet&&s>0&&this.attempts>=s&&null!==(n=this.widgetConfig)&&void 0!==n&&n.hint&&(this.hintSet=!0,null===(o=this.statusDisplay)||void 0===o||o.setHint(null===(i=this.widgetConfig)||void 0===i?void 0:i.hint)),!this.feedbackSet&&c>0&&this.attempts>=c&&null!==(r=this.widgetConfig)&&void 0!==r&&r.fbk&&(this.feedbackSet=!0,null===(a=this.statusDisplay)||void 0===a||a.setFeedback(null===(u=this.widgetConfig)||void 0===u?void 0:u.fbk))}},{key:"showFeedback",value:function(){var t,e,n;!this.feedbackSet&&null!==(t=this.widgetConfig)&&void 0!==t&&t.fbk&&(this.feedbackSet=!0,null===(e=this.statusDisplay)||void 0===e||e.setFeedback(null===(n=this.widgetConfig)||void 0===n?void 0:n.fbk))}}])&&ft(r.prototype,o),i&&ft(r,i),Object.defineProperty(r,"prototype",{writable:!1}),u}(ht(HTMLElement));function Ct(t){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct(t)}function jt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,It(r.key),r)}}function Et(){return Et="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=xt(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Et.apply(this,arguments)}function xt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tt(t)););return t}function Pt(t,e){return Pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pt(t,e)}function _t(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Tt(t);if(e){var o=Tt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return At(this,n)}}function At(t,e){if(e&&("object"===Ct(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Rt(t)}function Rt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tt(t){return Tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Tt(t)}function zt(t,e,n){return(e=It(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function It(t){var e=function(t,e){if("object"!==Ct(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ct(e)?e:String(e)}var Lt;T({elementName:"ib-quizz-dropdown",classes:["ib-quizz-elem"],styles:{display:"inline-block"}})(Ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pt(t,e)}(i,t);var e,n,r,o=_t(i);function i(){var t;jt(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return zt(Rt(t=o.call.apply(o,[this].concat(n))),"userAns",-1),t}return e=i,(n=[{key:"enable",value:function(t){this.button&&(this.button.disabled=!t)}},{key:"getUserInput",value:function(){return this.userAns+""}},{key:"displayRightAnswer",value:function(){this.enable(!1)}},{key:"check",value:function(){var t,e=(null===(t=this.widgetConfig)||void 0===t?void 0:t.ans)===this.userAns+"";return this.setStatus(e?tt.RIGHT:tt.WRONG),this.enable(!e),e?this.showFeedback():this.incAttempts(),e}},{key:"setLang",value:function(t){Et(Tt(i.prototype),"setLang",this).call(this,t),this.button&&(this.button.innerHTML=L(t,"chooseone"))}},{key:"render",value:function(){var t,e,n,r,o,a=this;if(this.widgetConfig){if(null!==(t=this.groupContext)&&void 0!==t&&t.s.length){var s,c=(null===(s=this.widgetConfig)||void 0===s?void 0:s.vars)||[];c.forEach((function(t,e){t.indexOf("#")<0||(c[e]=t.replace(/#([a-zA-Z0-9_]+)/g,(function(t,e){var n;return(null===(n=a.groupContext)||void 0===n?void 0:n._s[e])||t})))}))}if(this.dropdown=u("div",{class:"dropdown",style:"display:inline-block;"}),this.widgetConfig,this.widgetConfig){this.button=u("button",{class:"btn btn-outline-primary dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",html:L(this.lang,"chooseone")}),this.options=u("div",{class:"dropdown-menu","aria-labelledby":"dropdownMenuButton"});for(var l=(null===(e=this.widgetConfig)||void 0===e||null===(n=e.vars)||void 0===n?void 0:n.length)||0,f=new Array(l),p=0;p<l;p++)f[p]=p;null!==(r=this.widgetConfig)&&void 0!==r&&null!==(o=r.opts)&&void 0!==o&&o.shuffle&&N(f),f.forEach((function(t){var e,n,r=((null===(e=a.widgetConfig)||void 0===e?void 0:e.vars)||[])[t],o=u("a",{class:"dropdown-item",href:"#","data-index":t+"",html:r});o.addEventListener("click",(function(e){a.userAns=t,e.preventDefault(),a.button&&(a.button.innerHTML=r),r.indexOf("\\(")>=0&&a.reflowLatex(),a.setStatus(tt.UNSET)})),null===(n=a.options)||void 0===n||n.append(o)})),this.dropdown.append(this.button),this.dropdown.append(this.options),Et(Tt(i.prototype),"init",this).call(this,this.widgetConfig.pre),this.append(this.dropdown),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}}}}])&&kt(e.prototype,n),r&&kt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(St));function Nt(t){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nt(t)}function Mt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$t(r.key),r)}}function Bt(){return Bt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Dt(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Bt.apply(this,arguments)}function Dt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gt(t)););return t}function Ht(t,e){return Ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ht(t,e)}function Ft(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Gt(t);if(e){var o=Gt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ut(this,n)}}function Ut(t,e){if(e&&("object"===Nt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Vt(t)}function Vt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gt(t){return Gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gt(t)}function Jt(t,e,n){return(e=$t(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $t(t){var e=function(t,e){if("object"!==Nt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Nt(e)?e:String(e)}function Wt(t){return function(t){if(Array.isArray(t))return Qt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Qt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Zt;T({elementName:"ib-quizz-mchoice",classes:["iedib-quizz-widget"],styles:{display:"flex","align-items":"center"}})(Lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ht(t,e)}(i,t);var e,n,r,o=Ft(i);function i(){var t;Mt(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Jt(Vt(t=o.call.apply(o,[this].concat(n))),"radios",[]),Jt(Vt(t),"userAnsSet",new Set),t}return e=i,(n=[{key:"enable",value:function(t){var e;null===(e=this.radios)||void 0===e||e.forEach((function(e){var n,r;t?(e.disabled=!1,null===(n=e.parentElement)||void 0===n||n.classList.remove("disabled")):(e.disabled=!0,null===(r=e.parentElement)||void 0===r||r.classList.add("disabled"))}))}},{key:"getUserInput",value:function(){return Wt(this.userAnsSet).join(",")}},{key:"displayRightAnswer",value:function(){this.enable(!1)}},{key:"check",value:function(){var t,e,n,r,o=((null===(t=this.widgetConfig)||void 0===t?void 0:t.ans)||"").split(",").map((function(t){return t.trim()})),i=new Set(o),a=(e=this.userAnsSet,n=i,(r=new Set([].concat(Wt(e),Wt(n)))).size==e.size&&r.size==n.size);return this.setStatus(a?tt.RIGHT:tt.WRONG),this.enable(!a),a?this.showFeedback():this.incAttempts(),a}},{key:"render",value:function(){var t,e,n,r,o,a,s=this;if(this.groupContext,this.widgetConfig,this.widgetConfig){if(null!==(t=this.groupContext)&&void 0!==t&&t.s.length){var c,l=(null===(c=this.widgetConfig)||void 0===c?void 0:c.vars)||[];l.forEach((function(t,e){t.indexOf("#")<0||(l[e]=t.replace(/#([a-zA-Z0-9_]+)/g,(function(t,e){var n;return(null===(n=s.groupContext)||void 0===n?void 0:n._s[e])||t})))}))}this.form=document.createElement("form"),this.form.style.setProperty("display","inline-block");for(var f=(null===(e=this.widgetConfig)||void 0===e?void 0:e.ans.indexOf(","))>0,p=(null===(n=this.widgetConfig)||void 0===n||null===(r=n.vars)||void 0===r?void 0:r.length)||0,d=new Array(p),h=0;h<p;h++)d[h]=h;null!==(o=this.widgetConfig)&&void 0!==o&&null!==(a=o.opts)&&void 0!==a&&a.shuffle&&N(d);var y="g"+Math.random().toString(32).substring(2);d.forEach((function(t){var e,n,r=((null===(e=s.widgetConfig)||void 0===e?void 0:e.vars)||[])[t],o=u("div",{class:"form-check"});null===(n=s.form)||void 0===n||n.append(o);var i=u("input",{class:"form-check-input",type:f?"checkbox":"radio",name:y,id:y+"_"+t}),a=u("label",{class:"form-check-label",for:y+"_"+t,html:r});o.appendChild(i),o.appendChild(a),s.radios.push(i),i.addEventListener("click",(function(e){i.checked?s.userAnsSet.add(t+""):s.userAnsSet.delete(t+""),s.setStatus(tt.UNSET)}))})),Bt(Gt(i.prototype),"init",this).call(this,this.widgetConfig.pre),this.append(this.form),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}}}])&&qt(e.prototype,n),r&&qt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(St));function Xt(t){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xt(t)}function Kt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,se(r.key),r)}}function te(){return te="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=ee(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},te.apply(this,arguments)}function ee(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ae(t)););return t}function ne(t,e){return ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ne(t,e)}function re(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ae(t);if(e){var o=ae(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return oe(this,n)}}function oe(t,e){if(e&&("object"===Xt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ie(t)}function ie(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ae(t){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ae(t)}function ue(t,e,n){return(e=se(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function se(t){var e=function(t,e){if("object"!==Xt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Xt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Xt(e)?e:String(e)}var ce;T({elementName:"ib-quizz-numeric",classes:["iedib-quizz-widget"],styles:{display:"inline-block"}})(Zt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ne(t,e)}(i,t);var e,n,r,o=re(i);function i(){var t;Kt(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ue(ie(t=o.call.apply(o,[this].concat(n))),"userAns",-1),t}return e=i,(n=[{key:"enable",value:function(t){this.input&&(this.input.disabled=!t)}},{key:"getUserInput",value:function(){var t;return(null===(t=this.input)||void 0===t?void 0:t.value)||""}},{key:"displayRightAnswer",value:function(){var t;this.input&&(this.input.value=(null===(t=this.widgetConfig)||void 0===t?void 0:t.ans)||"",this.enable(!1))}},{key:"check",value:function(){var t=!1;try{var e,n,r=parseFloat(this.getUserInput()),o=parseFloat((null===(e=this.widgetConfig)||void 0===e?void 0:e.ans)||"0");if(isNaN(r)||isNaN(o))return console.error("ERROR",this.getUserInput(),null===(n=this.widgetConfig)||void 0===n?void 0:n.ans),this.setStatus(tt.ERROR),!1;var i,a,u,s,c=(null===(i=this.widgetConfig)||void 0===i||null===(a=i.opts)||void 0===a?void 0:a.err)||0,l=(null===(u=this.widgetConfig)||void 0===u||null===(s=u.opts)||void 0===s?void 0:s.errunit)||"absolute";"%"===l&&(c*=.01),0===o&&(l="absolute"),t="absolute"===l?Math.abs(r-o)<=c:Math.abs(r/o-1)<=c}catch(t){return console.error(t),this.setStatus(tt.ERROR),!1}return this.setStatus(t?tt.RIGHT:tt.WRONG),this.getUserInput(),this.enable(!t),t?this.showFeedback():this.incAttempts(),t}},{key:"render",value:function(){var t,e=this;if(this.widgetConfig){if(null!==(t=this.groupContext)&&void 0!==t&&t.s.length&&this.widgetConfig){var n=this.widgetConfig.ans||"";n.indexOf("#")>=0&&(n=n.replace(/#/g,""),this.widgetConfig.ans=""+s(this.groupContext._s||{},n))}this.input=u("input",{class:"form-control",type:"number",style:"display:inline-block;width:100px;"}),this.input.addEventListener("change",(function(t){e.setStatus(tt.UNSET)})),te(ae(i.prototype),"init",this).call(this,this.widgetConfig.pre),this.append(this.input),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}}}])&&Yt(e.prototype,n),r&&Yt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(St));function le(t,e,n){return le=fe()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&pe(o,n.prototype),o},le.apply(null,arguments)}function fe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function pe(t,e){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pe(t,e)}function de(t,e,n){e=e||{},n=n||{};var r=Object.keys(e),o=Object.values(e);return le(Function,r.concat(['"use strict"\n'+t])).apply(n,o)}function he(t){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},he(t)}function ye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==he(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==he(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===he(i)?i:String(i)),r)}var o,i}function be(){return be="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=me(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},be.apply(this,arguments)}function me(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Se(t)););return t}function ge(t,e){return ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ge(t,e)}function we(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Se(t);if(e){var o=Se(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Oe(this,n)}}function Oe(t,e){if(e&&("object"===he(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Se(t){return Se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Se(t)}var Ce;T({elementName:"ib-quizz-cloze",classes:["iedib-quizz-widget"],styles:{display:"inline-block"}})(ce=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ge(t,e)}(i,t);var e,n,r,o=we(i);function i(){return ye(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"enable",value:function(t){for(var e,n=(null===(e=this.mathInput)||void 0===e?void 0:e.innerFields)||[],r=0,o=n.length;r<o;r++)n[r].__controller.editable=t}},{key:"getUserInput",value:function(){return JSON.stringify(this.getUserInputArray())}},{key:"getUserInputArray",value:function(){var t,e,n=[];null===(t=this.mathInput)||void 0===t||t.innerFields;for(var r=(null===(e=this.mathInput)||void 0===e?void 0:e.innerFields)||[],o=0,i=r.length;o<i;o++)n.push((r[o].latex()||"").replace(/\\\s/g,"").trim());return n}},{key:"displayRightAnswer",value:function(){if(this.mathInput){for(var t,e=JSON.parse((null===(t=this.widgetConfig)||void 0===t?void 0:t.ans)||"[]"),n=this.mathInput.innerFields||[],r=0,o=n.length;r<o;r++)r<e.length&&e.push(n[r].latex(e[r]));this.enable(!1)}}},{key:"check",value:function(){var t=!1;try{var e;if(null!==(e=this.widgetConfig)&&void 0!==e&&e.cfn){var n,r,o,i={u:this.getUserInputArray()};Object.assign(i,null===(n=this.groupContext)||void 0===n?void 0:n._s),i.u.forEach((function(t,e){return i["u"+e]=t}));var a=((null===(r=this.widgetConfig)||void 0===r?void 0:r.cfn)||"return true").replace(/#/g,"");t=de("var _this=this;\n"+a.replace(/#/g,"_this."),i,(null===(o=this.groupContext)||void 0===o?void 0:o._s)||{})}else{var u,s=(null===(u=this.widgetConfig)||void 0===u?void 0:u.ans)||"[]";"string"==typeof s&&(s=JSON.parse(s));var c=this.getUserInputArray();t=!0;for(var l=0,f=c.length;l<f;l++)t=l<s.length&&t&&s[l]==(c[l]||"").trim()}}catch(t){return console.error(t),this.setStatus(tt.ERROR),!1}return this.setStatus(t?tt.RIGHT:tt.WRONG),this.getUserInput(),this.enable(!t),t?this.showFeedback():this.incAttempts(),t}},{key:"render",value:function(){var t,e=this;if(this.widgetConfig){if(this.widgetConfig,null!==(t=this.groupContext)&&void 0!==t&&t.s.length&&this.widgetConfig){var n=this.widgetConfig.ans||"";n.indexOf("#")>=0&&(n=n.replace(/#/g,""),this.widgetConfig.ans=""+s(this.groupContext._s||{},n))}var r;this.input=document.createElement("span"),this.input.innerText=(r=this.widgetConfig.ini||"?")?r.replace(/V\[(\d+)\]/g,(function(t,e){var n=parseInt(e);return"\\left("+new Array(n).fill("\\MathQuillMathField{}").join(",")+"\\right)"})).replace(/M\[(\d+)x(\d+)\]/g,(function(t,e,n){var r=parseInt(e),o=parseInt(n),i=new Array(r).fill("\\MathQuillMathField{}").join(" & ");return"\\begin{pmatrix}"+new Array(o).fill(i).join(" \\\\ ")+"\\end{pmatrix}"})).replace(/\?/g,"\\MathQuillMathField{ }"):r,this.input.innerText,this.append(this.input);var o=window.MathQuill.getInterface(2);this.mathInput=o.StaticMath(this.input),this.mathInput.innerFields.forEach((function(t){t.__controller.textarea.on("keyup",(function(t){t.preventDefault(),e.setStatus(tt.UNSET)}))})),be(Se(i.prototype),"init",this).call(this,this.widgetConfig.pre),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}}}])&&ve(e.prototype,n),r&&ve(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(St));function je(t){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je(t)}function ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Re(r.key),r)}}function Ee(t,e){return Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ee(t,e)}function xe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ae(t);if(e){var o=Ae(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pe(this,n)}}function Pe(t,e){if(e&&("object"===je(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _e(t)}function _e(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ae(t){return Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ae(t)}function Re(t){var e=function(t,e){if("object"!==je(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===je(e)?e:String(e)}var Te,ze;l([(Te={name:"quizz",author:"Josep Mulet Pol",version:"1.0",query:"[data-quizz-group]",use$:!0},(ze=Object.assign({},R,Te)).query||(ze.query='[role="snptd_'.concat(ze.name,'"],[data-snptd="').concat(ze.name,'"]')),function(t){t.meta=ze}(Ce=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ee(t,e)}(i,t);var e,n,r,o=xe(i);function i(t){var e,n,r,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t),n=_e(e),a={s:"",_s:{},o:{hint:2,ans:4}},(r=Re(r="groupContext"))in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a;var s,c=t.getAttribute("data-lang");c||(c=(null===(s=t.parentElement)||void 0===s?void 0:s.getAttribute("data-lang"))||null);var l=t.getAttribute("data-quizz-group")||"";try{var f=atob(l)||"{}",p=JSON.parse(f);e.groupContext=Object.assign(e.groupContext,p),e.groupContext}catch(t){console.error(t)}return e.lang=c||"ca",e.generateGroup(),e.findPlaceholders(),e.allQuizzElements=e.parent.querySelectorAll("ib-quizz-numeric, ib-quizz-dropdown, ib-quizz-mchoice"),e.allClozeElements=document.querySelectorAll("ib-quizz-cloze"),e.allQuizzElements,e.allClozeElements,e.checkButton=u("button",{class:"btn btn-sm btn-primary d-print-none",style:"margin: 10px",html:'<i class="fa fas fa-check"></i> '+L(e.lang,"check")}),e.parent.append(e.checkButton),e.listener=function(t){t.preventDefault();var n=!0;e.allQuizzElements.forEach((function(t){var e=t.check();n=n&&e})),e.allClozeElements.forEach((function(t){var e=t.check();n=n&&e})),n&&e.checkButton.setAttribute("disabled","true")},e}return e=i,(n=[{key:"generateGroup",value:function(){var t={};Object.defineProperty(t,"alea",{value:function(t,e){return Math.floor((e-t)*Math.random())+t},enumerable:!0,configurable:!1,writable:!1}),Object.defineProperty(t,"dec",{value:function(t,e){var n=Math.pow(10,e);return Math.floor(t*n)/n},enumerable:!0,configurable:!1,writable:!1});try{de("var _this=this;\n"+this.groupContext.s.replace(/#/g,"_this."),t,this.groupContext._s)}catch(t){console.error("GroupContext:: No es pot interpretar el codi.\n",t)}if(this.groupContext.s.trim().length){var e=u("div",{class:"alert alert-info",html:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" style="height:20px;"><path fill="#154b5e" d="M592 192H473.26c12.69 29.59 7.12 65.2-17 89.32L320 417.58V464c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48V240c0-26.51-21.49-48-48-48zM480 376c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm-46.37-186.7L258.7 14.37c-19.16-19.16-50.23-19.16-69.39 0L14.37 189.3c-19.16 19.16-19.16 50.23 0 69.39L189.3 433.63c19.16 19.16 50.23 19.16 69.39 0L433.63 258.7c19.16-19.17 19.16-50.24 0-69.4zM96 248c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm128 128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm0-128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm0-128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm128 128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"/></svg> \n                <small>'.concat(L(this.lang,"random_msg"),"</small>")}),n=this.parent.querySelector(":nth-child(2)");"H4"===(null==n?void 0:n.nodeName)?this.parent.insertBefore(e,n.nextSibling):this.parent.prepend(e)}}},{key:"findPlaceholders",value:function(){var t=this;0!==this.groupContext.s.trim().length&&function(t){for(var e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null),r=n.nextNode();null!=r;)e.push(r),r=n.nextNode();return e}(this.parent).forEach((function(e){var n=e.nodeValue||"";if(!(n.indexOf("#")<0)){var r=n.replace(/#([a-zA-Z0-9_]+)/g,(function(e,n){return t.groupContext._s[n]}));e.nodeValue=r}}))}},{key:"init",value:function(){var t=this,e=this.parent.dataset;if("1"!==e.active&&(e.active="1",this.checkButton.addEventListener("click",this.listener),this.allQuizzElements.forEach((function(e){"function"==typeof e.setLang?(e.setLang(t.lang),e.setGroupContext(t.groupContext)):console.error("No custom element registered for ",e)})),this.allClozeElements.length)){var n="https://piworld.es/iedib/snippets/sd/mathquill.min.js",r=document.body.querySelector('script[src$="/sd/quizz.min.js"]');r&&(n=(r.getAttribute("src")||"").replace("/sd/quizz.min.js","/sd/mathquill.min.js")),function(t,e,n,r){if(!e||null==document.head.querySelector("script#"+e)){var o=document.createElement("script");o.type="text/javascript",o.src=t,e&&o.setAttribute("id",e),o.onload=function(){n&&n()},o.onerror=function(){console.error("Error loading ",t),r&&r()},document.head.append(o)}}(n,"mathquill.matrix4quizz",(function(){t.allClozeElements.forEach((function(e){"function"==typeof e.setLang?(e.setLang(t.lang),e.setGroupContext(t.groupContext)):console.error("No custom element registered for ",e)}))}))}}},{key:"dispose",value:function(){"0"!==this.parent.dataset.active&&(this.parent.removeAttribute("data-active"),this.checkButton.removeEventListener("click",this.listener))}}])&&ke(e.prototype,n),r&&ke(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(P))||Ce)])}()}();