!function(){"use strict";var t={707:function(t,e,n){var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,"[data-quizz-group]{padding:5px;border-left:3px solid lightblue}.ib-quizz-right{margin-left:8px;border-radius:50%;background-color:#438c43;color:white;width:23px;display:inline-block;height:23px;text-align:center}.ib-quizz-wrong{margin-left:8px;border-radius:50%;background-color:#a43c3c;color:white;width:23px;display:inline-block;height:23px;text-align:center}.ib-quizz-error{margin-left:8px;border-radius:50%;background-color:#72395a;color:white;width:23px;display:inline-block;height:23px;text-align:center}.ib-quizz-hint,.ib-quizz-feedback{margin-left:8px;border-radius:50%;background-color:#a3a3a3;color:black;width:23px;display:inline-block;height:23px;text-align:center;cursor:pointer}",""]),e.Z=a},645:function(t){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var u=0;u<this.length;u++){var s=this[u][0];null!=s&&(a[s]=!0)}for(var l=0;l<t.length;l++){var c=[].concat(t[l]);r&&a[c[0]]||(void 0!==i&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=i),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),e.push(c))}},e}},81:function(t){t.exports=function(t){return t[1]}},379:function(t){var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var i={},a=[],u=0;u<t.length;u++){var s=t[u],l=r.base?s[0]+r.base:s[0],c=i[l]||0,f="".concat(l," ").concat(c);i[l]=c+1;var p=n(f),d={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==p)e[p].references++,e[p].updater(d);else{var h=o(d,r);r.byIndex=u,e.splice(u,0,{identifier:f,updater:h,references:1})}a.push(f)}return a}function o(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var i=r(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var u=n(i[a]);e[u].references--}for(var s=r(t,o),l=0;l<i.length;l++){var c=n(i[l]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}i=s}}},569:function(t){var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:function(t){t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:function(t,e,n){t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:function(t){t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:function(t){t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,exports:{}};return t[r](i,i.exports,n),i.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.nc=void 0,function(){function t(n,o,i){return t=e()?Reflect.construct.bind():function(t,e,n){var o=[null];o.push.apply(o,e);var i=new(Function.bind.apply(t,o));return n&&r(i,n.prototype),i},t.apply(null,arguments)}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e,n,r){r=r||0;var o=window;o[t]&&"function"==typeof o[t]?e&&e():r>15?n&&n():window.setTimeout((function(){a(t,e,n,r+1)}),50*(r+1))}function u(t,e){if(t&&"number"==typeof t)return t;if(!t||!(t+"").trim())return e;try{var n=parseInt(t+"");if(!isNaN(n))return n}catch(t){}return e}function s(t,e){var n=document.createElement(t);return Object.keys(e).forEach((function(t){var r=e[t];"class"===t?r.trim().split(/\s+/).forEach((function(t){n.classList.add(t)})):"style"===t?r.split(";").forEach((function(t){var e=t.split(":");2===e.length&&n.style.setProperty(e[0].trim(),e[1].trim())})):"html"===t?n.innerHTML=r:n.setAttribute(t,r)})),n}function l(e,n){e=e||{};var r=Object.keys(e),i=[].concat(r,["expr","return eval(expr)"]),a=t(Function,o(i)),u=Object.values(e),s=[].concat(u,[n]);return a.apply(void 0,o(s))}function c(t){return t=t||"",JSON.parse(atob(t)||"{}")}function f(t){t.forEach((function(t){var e=window.IB;if(t.meta){var n=t.meta;if(e.sd[n.name]&&"function"==typeof e.sd[n.name].init)return console.error("Warning: component '".concat(n.name,"' loaded twice.")),void e.sd[n.name].init();!function r(){e.sd[n.name]=e.sd[n.name]||{inst:{},_class:t,init:r,dispose:null};var o=n.query||'div[role="snptd_'.concat(n.name,'"], div[data-snptd="').concat(n.name,'"]');if("body"===o){if(e.sd[n.name].singl)return void console.error("Singleton already defined");var i=document.querySelector("body"),a=new t(i);a.init(),e.sd[n.name].singl=a,"_init: Initialized singleton '".concat(n.name,"' instance.")}else{var u=function(t){return document.querySelectorAll(t)}(o),s=0;u.forEach((function(r){var o=r,i=o.getAttribute("id");if(i||(i="sd_"+Math.random().toString(32).substring(2),o.setAttribute("id",i)),"1"!==o.dataset.active){var a=new t(o);a.init(),null!=e.sd[n.name].inst&&(e.sd[n.name].inst[i]=a),s++}else console.warn("Warning: Element '".concat(n.name,"' ").concat(i," already processed."))})),"_init: Initialized ".concat(s," '").concat(n.name,"' instances.")}}();e.sd[n.name].dispose=function(){var t=0;window.IB&&window.IB.sd&&window.IB.sd[n.name]&&window.IB.sd[n.name].inst&&(Object.keys(window.IB.sd[n.name].inst).forEach((function(r){var o=window.IB.sd[n.name].inst[r];o&&(o.dispose(),t++,delete e.sd[n.name].inst[r])})),"_dispose: Destroyed ".concat(t," '").concat(n.name,"' instances."))}}else console.error("Missing meta in class ",t,". Annotate it with @Component")}))}var p=function(t){window.IB=window.IB||{sd:{}};var e,n=t;n.map((function(t){var e;return(null===(e=t.meta)||void 0===e?void 0:e.use$)||!1})).reduce((function(t,e){return e||t}))?(e=function(){var t;"function"==typeof(null===(t=window.IB)||void 0===t?void 0:t.on$Ready)&&window.IB.on$Ready(),f(n)},a("require",(function(){window.require(["jquery"],(function(){console.info("$ready1"),$(e)}),(function(){console.error("Error requiring $. Waiting for $"),a("jQuery",(function(){console.info("$ready2"),$(e)}),(function(){console.error("Cannot find $. Bootstrap anyway!"),e()}),35)}))}),(function(){console.error("Cannot find requirejs. Waiting for $"),a("jQuery",(function(){console.info("$ready3"),$(e)}),(function(){console.error("Cannot find $. Bootstrap anyway!"),e()}),35)}),10)):"complete"===document.readyState?f(n):window.addEventListener("DOMContentLoaded",(function(){return f(n)}))},d=n(379),h=n.n(d),y=n(795),v=n.n(y),b=n(569),g=n.n(b),m=n(565),w=n.n(m),O=n(216),C=n.n(O),S=n(589),j=n.n(S),E=n(707),k={};k.styleTagTransform=j(),k.setAttributes=w(),k.insert=g().bind(null,"head"),k.domAPI=v(),k.insertStyleElement=C();h()(E.Z,k),E.Z&&E.Z.locals&&E.Z.locals;function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==P(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===P(i)?i:String(i)),r)}var o,i}function _(t,e,n){return e&&x(t.prototype,e),n&&x(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var R=_((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.parent=e}));function A(t){return function(t){if(Array.isArray(t))return T(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return T(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var z={name:"",author:"",version:"1.0",use$:!1};function I(t){return function(e){var n=e.prototype.connectedCallback,r=t.elementName,o=t.classes,i=t.styles;e.prototype.connectedCallback=function(){var t;o&&(t=this.classList).add.apply(t,A(o));i&&Object.assign(this.style,i),n&&n.apply(this)},customElements.define(r,e)}}var N,M={ca:{check:"Comprova",chooseone:"Tria una opció",right:"Ben fet!",wrong:"Ho sento. Intentau-ho de nou",error:"Hi ha hagut un error processant la resposta",random_msg:"Aquestes activitats contenen preguntes aleatòries que es generen cada vegada que es carrega la pàgina."},es:{check:"Comprueba",chooseone:"Elige una opción",right:"¡Bien hecho!",wrong:"Lo siento. Inténtalo de nuevo.",error:"Ha habido un error procesando la respuesta",random_msg:"Estas actividades contienen preguntas aleatorias que se generan cada vez que se carga la página."},en:{check:"Check",chooseone:"Choose one",right:"Well done!",wrong:"Try it again.",error:"There has been an error processing the answer",random_msg:"These activities contain random questions that are generated at every page load."},fr:{check:"Vérifier",chooseone:"Choisis une option",right:"¡Bien hecho!",wrong:"Lo siento. Inténtalo de nuevo.",error:"Ha habido un error procesando la respuesta",random_msg:"Estas actividades contienen preguntas aleatorias que se generan cada vez que se carga la página."},de:{check:"Prüfen",chooseone:"Wähle eine option",right:"¡Bien hecho!",wrong:"Lo siento. Inténtalo de nuevo.",error:"Ha habido un error procesando la respuesta",random_msg:"Estas actividades contienen preguntas aleatorias que se generan cada vez que se carga la página."}};function D(t,e){var n=M[t];return n||(n=M.ca),n[e]||e}function L(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[n],t[n]=r}}function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function B(t){return function(t){if(Array.isArray(t))return H(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return H(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function G(t){var e=[];return t.split(".").forEach((function(t){var n=t.split("["),r=n[0].trim();r.length&&(e.push(r),n.length>1&&e.push("["+n[1].trim()))})),e}function F(t,e){if(0===t.length)return null;if(1===t.length)return e;for(var n=e,r=0,o=t.length-1;null!=n&&r<o;){var i=t[r];if(i.indexOf("[")>=0){var a=parseInt(i.replace(/[[\]]/g,""));if(Array.isArray(n)){var u=n;a<u.length?n=u[a]:(console.error("Index out of bounds ",t.join(""),a,u),n=null)}else console.error("Not an array",t.join(""),n),n=null}else{var s=n;n=null!=s[i]?s[i]:null}r++}return n}function U(t,e,n){var r=F(t,e),o=!1;if(null!=r){var i=t[t.length-1];if(i.indexOf("[")>=0){if(Array.isArray(r)){var a=r,u=parseInt(i.replace(/[[\]]/g,""));u<a.length&&(a[u]=n,o=!0)}}else if("object"===q(r))r[i]=n,o=!0}return o}function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function Q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==V(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===V(i)?i:String(i)),r)}var o,i}!function(t){t[t.CLOSE=0]="CLOSE",t[t.CANCEL_ACCEPT=1]="CANCEL_ACCEPT",t[t.CANCEL_ACCEPT_FORM=2]="CANCEL_ACCEPT_FORM",t[t.CANCEL_ACCEPT_FORM_VALIDATION=3]="CANCEL_ACCEPT_FORM_VALIDATION"}(N||(N={}));var J=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Diàleg";Q(this,t),this.type=n;var o=n===N.CANCEL_ACCEPT_FORM||n===N.CANCEL_ACCEPT_FORM_VALIDATION;this.hasValidation=n===N.CANCEL_ACCEPT_FORM_VALIDATION;var i="",a="";o&&(i="<form".concat(this.hasValidation?' class="needs-validation" novalidate':"",">"),a="</form>");var u='<button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">'.concat(n===N.CLOSE?"Tancar":"Cancel·lar","</button>");n!==N.CLOSE&&(u+='<button type="'.concat(o?"submit":"button",'" class="btn btn-sm btn-primary">Acceptar</button>')),this.elem=$('\n            <div class="modal fade moodle-dialogue" id="'.concat(e,'" tabindex="-1" aria-labelledby="bsdialog" aria-hidden="true">\n            <div class="modal-dialog">\n                <div class="modal-content">\n                  <div class="modal-header">\n                    <h5 class="modal-title">').concat(r,'</h5>\n                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                      <span aria-hidden="true">&times;</span>\n                    </button>\n                  </div>\n                  ').concat(i,'\n                  <div class="modal-body" style="max-height:400px;overflow-y:auto;font-size:90%;">\n                  </div>\n                  <div class="modal-footer">\n                    ').concat(u,"\n                  </div>\n                  ").concat(a,"\n                </div>\n                </div>")),this.body=this.elem.find("div.modal-body"),this.header=this.elem.find("h5.modal-title"),this.primaryButton=this.elem.find("button.btn.btn-primary"),this.form=this.elem.find("form"),this.validationDiv=this.elem.find("div.alert.alert-danger"),$("body").append(this.elem)}var e,n,r;return e=t,(n=[{key:"resetDialog",value:function(){this.body.html(""),this.primaryButton&&this.primaryButton.off(),this.form&&this.form.off(),this.validationDiv.css("display","none"),this.validationDiv.html("")}},{key:"setBody",value:function(t){var e=this;this.resetDialog();var n=$(t);this.validationDiv=$('<div class="alert alert-danger" style="display:none;max-height:100px;overflow-y:auto;"></div>'),this.body.append(this.validationDiv),this.body.append(n),this.primaryButton&&(this.form?this.form.on("submit",(function(t){if(t.preventDefault(),t.stopPropagation(),e.hasValidation){e.form.addClass("was-validated"),e.updateValues();var n=e.customValidation();if(n&&null!=e.validationDiv)return e.validationDiv.css("display",""),e.validationDiv.html(n),void(e.validationDiv.offset()&&e.body.animate({scrollTop:0}));e.form[0].checkValidity()&&(e.elem.modal("hide"),e.acceptCb&&e.acceptCb(e.scope))}else e.updateValues(),e.acceptCb&&e.acceptCb(e.scope)})):this.primaryButton.on("click",(function(t){t.preventDefault(),e.acceptCb&&e.acceptCb(),e.elem.modal("hide")})))}},{key:"setValues",value:function(t){this.scope=t,this.body.find("input[id], textarea[id], select[id]").each((function(e,n){var r=(n.getAttribute("id")||"").split("_");if(!(r.length<2)){var o=function(t,e){var n=F([].concat(B(t),[""]),e);return null!=n?["string","boolean","number"].includes(q(n))?n+"":JSON.stringify(n):null}(G(r[r.length-1]),t);if("TEXTAREA"===n.nodeName)n.value=o||"";else{var i=n,a=(i.getAttribute("type")||"").toLowerCase();"radio"===a||"checkbox"===a?i.checked="true"===o:i.value=o||""}}}))}},{key:"updateValues",value:function(){var t=this;null!=this.scope&&this.body.find("input[id], textarea[id], select[id]").each((function(e,n){var r=(n.getAttribute("id")||"").split("_");if(!(r.length<2)){var o=G(r[r.length-1]);if("TEXTAREA"===n.nodeName){var i=n.value||"";U(o,t.scope,i)}else{var a=n,u=(a.getAttribute("type")||"").toLowerCase(),s="radio"===u||"checkbox"===u;U(o,t.scope,s?a.checked:a.value)}}}))}},{key:"setBodyBindings",value:function(t,e){var n=s("div",{style:"width:100%;padding:10px",html:t});this.setBody(n),this.setValues(e)}},{key:"customValidation",value:function(){return null}},{key:"setTitle",value:function(t){this.header.html(t)}},{key:"show",value:function(t){var e=this;this.form.removeClass("was-validated"),this.elem.modal("show"),window.setTimeout((function(){return e.body.scrollTop(0)}),400),this.acceptCb=t}}])&&W(e.prototype,n),r&&W(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==Z(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Z(i)?i:String(i)),r)}var o,i}function K(t,e){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},K(t,e)}function Y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=et(t);if(e){var o=et(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return tt(this,n)}}function tt(t,e){if(e&&("object"===Z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function et(t){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},et(t)}var nt,rt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K(t,e)}(i,t);var e,n,r,o=Y(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t,N.CLOSE,"")}return e=i,n&&X(e.prototype,n),r&&X(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(J),ot={};function it(t,e){var n=ot[t];return n||(n=new rt(t),ot[t]=n),n.setTitle(e),n}function at(t){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},at(t)}function ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lt(r.key),r)}}function st(t,e,n){return(e=lt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lt(t){var e=function(t,e){if("object"!==at(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==at(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===at(e)?e:String(e)}!function(t){t[t.UNTOUCHED=0]="UNTOUCHED",t[t.PENDING=1]="PENDING",t[t.ERROR=2]="ERROR",t[t.WRONG=3]="WRONG",t[t.RIGHT=4]="RIGHT"}(nt||(nt={}));var ct=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),st(this,"status",nt.UNTOUCHED),st(this,"lang","ca"),this.spanStatus=document.createElement("span"),this.spanStatus.setAttribute("data-toggle","tooltip"),this.spanHint=s("span",{dataToggle:"tooltip",class:"ib-quizz-hint",title:"Mostrar pista",style:"display:none;",html:'<i class="'.concat("fa fas fa-life-ring",'"></i>')}),this.feedbackSpan=s("span",{class:"ib-quizz-feedback",dataToggle:"tooltip",title:"Mostrar solució",style:"display:none;",html:'<i class="'.concat("fa fas fa-question",'"></i>')}),this.divBlock=s("div",{style:"display:inline-block;"}),this.divBlock.append(this.spanStatus),this.divBlock.append(this.spanHint),this.divBlock.append(this.feedbackSpan)}var e,n,r;return e=t,(n=[{key:"setStatus",value:function(t,e){this.status=t;var n=this.spanStatus.classList,r=e;switch(t){case nt.UNTOUCHED:case nt.PENDING:n.remove("ib-quizz-right","ib-quizz-wrong","ib-quizz-error"),this.spanStatus.innerHTML="";break;case nt.RIGHT:n.add("ib-quizz-right"),r||(r=D(this.lang,"right")),this.spanStatus.innerHTML='<i class="'.concat("fa fas fa-check",'"></i>');break;case nt.WRONG:n.add("ib-quizz-wrong"),r||(r=D(this.lang,"wrong")),this.spanStatus.innerHTML='<i class="'.concat("fa fas fa-times",'"></i>');break;default:n.add("ib-quizz-error"),r||(r=D(this.lang,"error")),this.spanStatus.innerHTML='<i class="'.concat("fa fas fa-exclamation",'"></i>')}r&&this.spanStatus.setAttribute("title",r)}},{key:"getStatus",value:function(){return this.status}},{key:"setLang",value:function(t){this.lang=t}},{key:"setHint",value:function(t){this.spanHint.addEventListener("click",(function(){var e=it("ib-quizz-modal-dlg","Una pista..."),n=s("div",{html:t});e.setBody(n),e.show()})),this.spanHint.style.setProperty("display","")}},{key:"setFeedback",value:function(t){this.feedbackSpan.addEventListener("click",(function(){var e=it("ib-quizz-modal-dlg","Retroacció"),n=s("div",{html:t});e.setBody(n),e.show()})),this.spanHint.style.setProperty("display","none"),this.feedbackSpan.style.setProperty("display","")}},{key:"getElement",value:function(){return this.divBlock}}])&&ut(e.prototype,n),r&&ut(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ft(t,e,n){return ft=pt()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&dt(o,n.prototype),o},ft.apply(null,arguments)}function pt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function dt(t,e){return dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dt(t,e)}var ht={};function yt(t,e,n){return window.nerdamer&&!ht.N&&Object.defineProperty(ht,"N",{value:window.nerdamer,enumerable:!0,configurable:!1,writable:!1}),window.mathjs&&!ht.M&&Object.defineProperty(ht,"M",{value:window.mathjs,enumerable:!0,configurable:!1,writable:!1}),e=Object.assign(e||{},ht),function(t,e,n){e=e||{},n=n||{};var r=Object.keys(e),o=Object.values(e);return ft(Function,r.concat(['"use strict"\n'+t])).apply(n,o)}("var _this=this;\n"+t.replace(/#/g,"_this."),e,n)}function vt(t){return t?t.replace(/V\[(\d+)\]/g,(function(t,e){var n=parseInt(e);return"\\left("+new Array(n).fill("\\MathQuillMathField{}").join(",")+"\\right)"})).replace(/M\[(\d+)x(\d+)\]/g,(function(t,e,n){var r=parseInt(e),o=parseInt(n),i=new Array(r).fill("\\MathQuillMathField{}").join(" & ");return"\\begin{pmatrix}"+new Array(o).fill(i).join(" \\\\ ")+"\\end{pmatrix}"})).replace(/\?/g,"\\MathQuillMathField{ }"):t}function bt(t,e){if(!e)return t;var n=t.replace(/#([a-zA-Z0-9_]+)($|[ .,"'])/gm,(function(t,n,r){return null!=e[n]?e[n]+(r||""):t}));return n=n.replace(/\${2}(.*)?\${2}/gm,(function(t,e){return"\\["+e+"\\]"})).replace(/\$(.*)?\$/gm,(function(t,e){return"\\("+e+"\\)"}))}function gt(t){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gt(t)}function mt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_t(r.key),r)}}function Ot(t,e){if(e&&("object"===gt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ct(t)}function Ct(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function St(t){var e="function"==typeof Map?new Map:void 0;return St=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return jt(t,arguments,Pt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),kt(r,t)},St(t)}function jt(t,e,n){return jt=Et()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&kt(o,n.prototype),o},jt.apply(null,arguments)}function Et(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function kt(t,e){return kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},kt(t,e)}function Pt(t){return Pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pt(t)}function xt(t,e,n){return(e=_t(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _t(t){var e=function(t,e){if("object"!==gt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===gt(e)?e:String(e)}Object.getOwnPropertyNames(Math).forEach((function(t){ht[t]=Math[t]})),Object.defineProperty(ht,"alea",{value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.length;if(0===r)return Math.random()<.5?-1:1;if(1===r){if(Array.isArray(e[0])){var o=Math.floor(Math.random()*e[0].length);return e[0][o]}if("number"==typeof e[0])return Math.floor(2*e[0]*Math.random())+e[0]}else if(r>=2){var i=e[0],a=e[1],u=1,s=0,l=(a-i)*Math.random();return 3===r&&(s=(s=Math.abs(e[2]))>8?8:s,u=Math.pow(10,s)),l=+(Math.round(l*u)/u+i).toFixed(s)}},enumerable:!0,configurable:!1,writable:!1}),Object.defineProperty(ht,"dec",{value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Math.pow(10,e);return Math.round(t*n)/n},enumerable:!0,configurable:!1,writable:!1});var Rt,At=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kt(t,e)}(u,t);var e,n,r,o,i,a=(e=u,n=Et(),function(){var t,r=Pt(e);if(n){var o=Pt(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return Ot(this,t)});function u(){var t;mt(this,u);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return xt(Ct(t=a.call.apply(a,[this].concat(n))),"lang","ca"),xt(Ct(t),"_syncCount",0),xt(Ct(t),"attempts",0),xt(Ct(t),"hintSet",!1),xt(Ct(t),"feedbackSet",!1),t}return r=u,(o=[{key:"init",value:function(t){if(t){var e=document.createElement("span");e.innerHTML=t,this.prepend(e)}}},{key:"connectedCallback",value:function(){this.innerHTML="",this.classList.add("d-print-none"),this.statusDisplay=new ct;try{this.widgetConfig=c(this.dataset.src)}catch(t){return void console.error(t)}this.widgetConfig,this._syncCount++,3===this._syncCount&&this.render()}},{key:"reflowLatex",value:function(){window.MathJax&&(window.MathJax.typesetPromise&&window.MathJax.typesetPromise(),window.MathJax.Hub&&window.MathJax.Hub.Queue&&window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub]))}},{key:"setLang",value:function(t){var e;this.lang=t,null===(e=this.statusDisplay)||void 0===e||e.setLang(t),this._syncCount++,3===this._syncCount&&this.render()}},{key:"setGroupContext",value:function(t){var e,n,r,o;this.groupContext=t,this.groupContext,this._syncCount++,Object.keys(t._s).length&&(null!==(e=this.widgetConfig)&&void 0!==e&&e.hint&&(this.widgetConfig.hint=bt(this.widgetConfig.hint,t._s)),null!==(n=this.widgetConfig)&&void 0!==n&&n.fbk&&(this.widgetConfig.fbk=bt(this.widgetConfig.fbk,t._s)),null!==(r=this.widgetConfig)&&void 0!==r&&r.ini&&(this.widgetConfig.ini=bt(this.widgetConfig.ini,t._s)),null!==(o=this.widgetConfig)&&void 0!==o&&o.pre&&(this.widgetConfig.pre=bt(this.widgetConfig.pre,t._s))),3===this._syncCount&&this.render()}},{key:"setStatus",value:function(t,e){var n;null===(n=this.statusDisplay)||void 0===n||n.setStatus(t,e)}},{key:"incAttempts",value:function(){var t,e,n,r;this.attempts++;var o,i,a,u,s=(null===(t=this.groupContext)||void 0===t?void 0:t.o.hint)||0,l=(null===(e=this.groupContext)||void 0===e?void 0:e.o.ans)||0;!this.hintSet&&s>0&&this.attempts>=s&&null!==(n=this.widgetConfig)&&void 0!==n&&n.hint&&(this.hintSet=!0,null===(o=this.statusDisplay)||void 0===o||o.setHint(null===(i=this.widgetConfig)||void 0===i?void 0:i.hint)),!this.feedbackSet&&l>0&&this.attempts>=l&&null!==(r=this.widgetConfig)&&void 0!==r&&r.fbk&&(this.feedbackSet=!0,null===(a=this.statusDisplay)||void 0===a||a.setFeedback(null===(u=this.widgetConfig)||void 0===u?void 0:u.fbk))}},{key:"showFeedback",value:function(){var t,e,n;!this.feedbackSet&&null!==(t=this.widgetConfig)&&void 0!==t&&t.fbk&&(this.feedbackSet=!0,null===(e=this.statusDisplay)||void 0===e||e.setFeedback(null===(n=this.widgetConfig)||void 0===n?void 0:n.fbk))}}])&&wt(r.prototype,o),i&&wt(r,i),Object.defineProperty(r,"prototype",{writable:!1}),u}(St(HTMLElement));function Tt(t){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tt(t)}function zt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function It(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ft(r.key),r)}}function Nt(){return Nt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Mt(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Nt.apply(this,arguments)}function Mt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ht(t)););return t}function Dt(t,e){return Dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Dt(t,e)}function Lt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ht(t);if(e){var o=Ht(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qt(this,n)}}function qt(t,e){if(e&&("object"===Tt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bt(t)}function Bt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ht(t){return Ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ht(t)}function Gt(t,e,n){return(e=Ft(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ft(t){var e=function(t,e){if("object"!==Tt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Tt(e)?e:String(e)}var Ut;I({elementName:"ib-quizz-dropdown",classes:["ib-quizz-elem"],styles:{display:"inline-block"}})(Rt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dt(t,e)}(i,t);var e,n,r,o=Lt(i);function i(){var t;zt(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Gt(Bt(t=o.call.apply(o,[this].concat(n))),"userAns",-1),t}return e=i,(n=[{key:"enable",value:function(t){this.button&&(this.button.disabled=!t)}},{key:"getUserInput",value:function(){return this.userAns+""}},{key:"displayRightAnswer",value:function(){this.enable(!1)}},{key:"check",value:function(){var t,e,n;if((null===(t=this.statusDisplay)||void 0===t?void 0:t.getStatus())===nt.RIGHT)return!0;if((null===(e=this.statusDisplay)||void 0===e?void 0:e.getStatus())!==nt.PENDING)return!1;var r=(null===(n=this.widgetConfig)||void 0===n?void 0:n.ans)===this.userAns+"";return this.setStatus(r?nt.RIGHT:nt.WRONG),this.enable(!r),r?this.showFeedback():this.incAttempts(),r}},{key:"setLang",value:function(t){Nt(Ht(i.prototype),"setLang",this).call(this,t),this.button&&(this.button.innerHTML=D(t,"chooseone"))}},{key:"render",value:function(){var t,e,n,r,o=this;if(this.widgetConfig){var a=((null===(t=this.widgetConfig)||void 0===t?void 0:t.vars)||[]).filter((function(t){return(t+"").trim().length>0}));if(null!==(e=this.groupContext)&&void 0!==e&&e.s.length&&a.forEach((function(t,e){var n;t.indexOf("#")<0||(a[e]=bt(t,null===(n=o.groupContext)||void 0===n?void 0:n._s))})),this.dropdown=s("div",{class:"dropdown",style:"display:inline-block;"}),this.widgetConfig,this.widgetConfig){this.button=s("button",{class:"btn btn-outline-primary dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",html:D(this.lang,"chooseone")}),this.options=s("div",{class:"dropdown-menu","aria-labelledby":"dropdownMenuButton"});for(var u=a.length||0,l=new Array(u),c=0;c<u;c++)l[c]=c;null!==(n=this.widgetConfig)&&void 0!==n&&null!==(r=n.opts)&&void 0!==r&&r.shuffle&&L(l),l.forEach((function(t){var e,n=a[t],r=s("a",{class:"dropdown-item",href:"#","data-index":t+"",html:n});r.addEventListener("click",(function(e){o.userAns=t,e.preventDefault(),o.button&&(o.button.innerHTML=n),n.indexOf("\\(")>=0&&o.reflowLatex(),o.setStatus(nt.PENDING)})),null===(e=o.options)||void 0===e||e.append(r)})),this.dropdown.append(this.button),this.dropdown.append(this.options),Nt(Ht(i.prototype),"init",this).call(this,this.widgetConfig.pre),this.append(this.dropdown),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}}else console.error("The widgetConfig is not set")}}])&&It(e.prototype,n),r&&It(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(At));function $t(t){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$t(t)}function Vt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ne(r.key),r)}}function Wt(){return Wt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Jt(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Wt.apply(this,arguments)}function Jt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=te(t)););return t}function Zt(t,e){return Zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zt(t,e)}function Xt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=te(t);if(e){var o=te(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Kt(this,n)}}function Kt(t,e){if(e&&("object"===$t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Yt(t)}function Yt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function te(t){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},te(t)}function ee(t,e,n){return(e=ne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ne(t){var e=function(t,e){if("object"!==$t(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==$t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===$t(e)?e:String(e)}function re(t){return function(t){if(Array.isArray(t))return oe(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return oe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oe(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ie;I({elementName:"ib-quizz-mchoice",classes:["iedib-quizz-widget"],styles:{display:"flex","align-items":"center"}})(Ut=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zt(t,e)}(i,t);var e,n,r,o=Xt(i);function i(){var t;Vt(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ee(Yt(t=o.call.apply(o,[this].concat(n))),"radios",[]),ee(Yt(t),"userAnsSet",new Set),t}return e=i,(n=[{key:"enable",value:function(t){var e;null===(e=this.radios)||void 0===e||e.forEach((function(e){var n,r;t?(e.disabled=!1,null===(n=e.parentElement)||void 0===n||n.classList.remove("disabled")):(e.disabled=!0,null===(r=e.parentElement)||void 0===r||r.classList.add("disabled"))}))}},{key:"getUserInput",value:function(){return re(this.userAnsSet).join(",")}},{key:"displayRightAnswer",value:function(){this.enable(!1)}},{key:"check",value:function(){var t,e,n;if((null===(t=this.statusDisplay)||void 0===t?void 0:t.getStatus())===nt.RIGHT)return!0;if((null===(e=this.statusDisplay)||void 0===e?void 0:e.getStatus())!==nt.PENDING)return!1;var r,o,i,a=((null===(n=this.widgetConfig)||void 0===n?void 0:n.ans)||"").split(",").map((function(t){return t.trim()})),u=new Set(a),s=(r=this.userAnsSet,o=u,(i=new Set([].concat(re(r),re(o)))).size==r.size&&i.size==o.size);return this.setStatus(s?nt.RIGHT:nt.WRONG),this.enable(!s),s?this.showFeedback():this.incAttempts(),s}},{key:"render",value:function(){var t,e,n,r,o,a=this;if(this.groupContext,this.widgetConfig,this.widgetConfig){var u=((null===(t=this.widgetConfig)||void 0===t?void 0:t.vars)||[]).filter((function(t){return(t+"").trim().length>0}));null!==(e=this.groupContext)&&void 0!==e&&e.s.length&&u.forEach((function(t,e){var n;t.indexOf("#")<0||(u[e]=bt(t,null===(n=a.groupContext)||void 0===n?void 0:n._s))})),this.form=document.createElement("form"),this.form.style.setProperty("display","inline-block");for(var l=(null===(n=this.widgetConfig)||void 0===n?void 0:n.ans.indexOf(","))>0,c=u.length||0,f=new Array(c),p=0;p<c;p++)f[p]=p;null!==(r=this.widgetConfig)&&void 0!==r&&null!==(o=r.opts)&&void 0!==o&&o.shuffle&&L(f);var d="g"+Math.random().toString(32).substring(2);f.forEach((function(t){var e,n=u[t],r=s("div",{class:"form-check"});null===(e=a.form)||void 0===e||e.append(r);var o=s("input",{class:"form-check-input",type:l?"checkbox":"radio",name:d,id:d+"_"+t}),i=s("label",{class:"form-check-label",for:d+"_"+t,html:n});r.appendChild(o),r.appendChild(i),a.radios.push(o),o.addEventListener("click",(function(e){l?o.checked?a.userAnsSet.add(t+""):a.userAnsSet.delete(t+""):a.userAnsSet=new Set([t+""]),a.setStatus(nt.PENDING)}))})),Wt(te(i.prototype),"init",this).call(this,this.widgetConfig.pre),this.append(this.form),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}}}])&&Qt(e.prototype,n),r&&Qt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(At));function ae(t){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(t)}function ue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,be(r.key),r)}}function le(){return le="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=ce(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},le.apply(this,arguments)}function ce(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ye(t)););return t}function fe(t,e){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fe(t,e)}function pe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ye(t);if(e){var o=ye(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return de(this,n)}}function de(t,e){if(e&&("object"===ae(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return he(t)}function he(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ye(t){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ye(t)}function ve(t,e,n){return(e=be(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function be(t){var e=function(t,e){if("object"!==ae(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ae(e)?e:String(e)}var ge;I({elementName:"ib-quizz-numeric",classes:["iedib-quizz-widget"],styles:{display:"inline-block"}})(ie=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fe(t,e)}(i,t);var e,n,r,o=pe(i);function i(){var t;ue(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ve(he(t=o.call.apply(o,[this].concat(n))),"userAns",-1),t}return e=i,(n=[{key:"enable",value:function(t){this.input&&(this.input.disabled=!t)}},{key:"getUserInput",value:function(){var t;return(null===(t=this.input)||void 0===t?void 0:t.value)||""}},{key:"displayRightAnswer",value:function(){var t;this.input&&(this.input.value=(null===(t=this.widgetConfig)||void 0===t?void 0:t.ans)||"",this.enable(!1))}},{key:"check",value:function(){var t,e;if((null===(t=this.statusDisplay)||void 0===t?void 0:t.getStatus())===nt.RIGHT)return!0;if((null===(e=this.statusDisplay)||void 0===e?void 0:e.getStatus())!==nt.PENDING)return!1;var n=!1;try{var r,o,i=parseFloat(this.getUserInput()),a=parseFloat((null===(r=this.widgetConfig)||void 0===r?void 0:r.ans)||"0");if(isNaN(i)||isNaN(a))return console.error("ERROR",this.getUserInput(),null===(o=this.widgetConfig)||void 0===o?void 0:o.ans),this.setStatus(nt.ERROR),!1;var u,s,l,c,f=(null===(u=this.widgetConfig)||void 0===u||null===(s=u.opts)||void 0===s?void 0:s.err)||0,p=(null===(l=this.widgetConfig)||void 0===l||null===(c=l.opts)||void 0===c?void 0:c.errunit)||"absolute";"%"===p&&(f*=.01),0===a&&(p="absolute"),n="absolute"===p?Math.abs(i-a)<=f:Math.abs(i/a-1)<=f}catch(t){return console.error(t),this.setStatus(nt.ERROR),!1}return this.setStatus(n?nt.RIGHT:nt.WRONG),this.getUserInput(),this.enable(!n),n?this.showFeedback():this.incAttempts(),n}},{key:"render",value:function(){var t,e=this;if(this.widgetConfig){if(null!==(t=this.groupContext)&&void 0!==t&&t.s.length&&this.widgetConfig){var n=this.widgetConfig.ans||"";n.indexOf("#")>=0&&(n=n.replace(/#/g,""),this.widgetConfig.ans=""+l(this.groupContext._s||{},n))}this.input=s("input",{class:"form-control",type:"number",style:"display:inline-block;width:100px;"}),this.input.addEventListener("change",(function(t){e.setStatus(nt.PENDING)})),le(ye(i.prototype),"init",this).call(this,this.widgetConfig.pre),this.append(this.input),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}}}])&&se(e.prototype,n),r&&se(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(At));function me(t){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},me(t)}function we(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==me(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===me(i)?i:String(i)),r)}var o,i}function Ce(){return Ce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Se(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Ce.apply(this,arguments)}function Se(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pe(t)););return t}function je(t,e){return je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},je(t,e)}function Ee(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Pe(t);if(e){var o=Pe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ke(this,n)}}function ke(t,e){if(e&&("object"===me(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Pe(t){return Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pe(t)}var xe;I({elementName:"ib-quizz-cloze",classes:["iedib-quizz-widget"],styles:{display:"inline-block"}})(ge=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&je(t,e)}(i,t);var e,n,r,o=Ee(i);function i(){return we(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"enable",value:function(t){for(var e,n=(null===(e=this.mathInput)||void 0===e?void 0:e.innerFields)||[],r=0,o=n.length;r<o;r++)n[r].__controller.editable=t}},{key:"getUserInput",value:function(){return JSON.stringify(this.getUserInputArray())}},{key:"getUserInputArray",value:function(){var t,e,n=[];null===(t=this.mathInput)||void 0===t||t.innerFields;for(var r=(null===(e=this.mathInput)||void 0===e?void 0:e.innerFields)||[],o=0,i=r.length;o<i;o++)n.push((r[o].latex()||"").replace(/\\\s/g,"").trim());return n}},{key:"displayRightAnswer",value:function(){if(this.mathInput){for(var t,e=JSON.parse((null===(t=this.widgetConfig)||void 0===t?void 0:t.ans)||"[]"),n=this.mathInput.innerFields||[],r=0,o=n.length;r<o;r++)r<e.length&&e.push(n[r].latex(e[r]));this.enable(!1)}}},{key:"check",value:function(){var t,e;if((null===(t=this.statusDisplay)||void 0===t?void 0:t.getStatus())===nt.RIGHT)return!0;if((null===(e=this.statusDisplay)||void 0===e?void 0:e.getStatus())!==nt.PENDING)return!1;var n=!1;try{var r;if(null!==(r=this.widgetConfig)&&void 0!==r&&r.cfn){var o,i,a,u={u:this.getUserInputArray()};Object.assign(u,null===(o=this.groupContext)||void 0===o?void 0:o._s),u.u.forEach((function(t,e){return u["u"+e]=t}));var s=((null===(i=this.widgetConfig)||void 0===i?void 0:i.cfn)||"return true").replace(/#/g,"");n=yt(s,u,(null===(a=this.groupContext)||void 0===a?void 0:a._s)||{})}else{var l,c=(null===(l=this.widgetConfig)||void 0===l?void 0:l.ans)||"[]";"string"==typeof c&&(c=JSON.parse(c));var f=this.getUserInputArray();n=!0;for(var p=0,d=f.length;p<d;p++)n=p<c.length&&n&&c[p]==(f[p]||"").trim()}}catch(t){return console.error(t),this.setStatus(nt.ERROR),!1}return this.setStatus(n?nt.RIGHT:nt.WRONG),this.getUserInput(),this.enable(!n),n?this.showFeedback():this.incAttempts(),n}},{key:"render",value:function(){var t,e=this;if(this.widgetConfig)if(this.widgetConfig,window.MathQuill){if(null!==(t=this.groupContext)&&void 0!==t&&t.s.length&&this.widgetConfig){var n=this.widgetConfig.ans||"";n.indexOf("#")>=0&&(n=n.replace(/#/g,""),this.widgetConfig.ans=""+l(this.groupContext._s||{},n))}this.input=document.createElement("span"),this.input.innerText=vt(this.widgetConfig.ini||"?"),this.input.innerText,this.append(this.input);var r=window.MathQuill.getInterface(2);this.mathInput=r.StaticMath(this.input),this.mathInput.innerFields.forEach((function(t){t.__controller.textarea.on("keyup",(function(t){t.preventDefault(),e.setStatus(nt.PENDING)}))})),Ce(Pe(i.prototype),"init",this).call(this,this.widgetConfig.pre),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}else console.error("MathQuill not found on page")}}])&&Oe(e.prototype,n),r&&Oe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(At));function _e(t){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_e(t)}function Re(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==_e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==_e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===_e(i)?i:String(i)),r)}var o,i}function Te(){return Te="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=ze(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Te.apply(this,arguments)}function ze(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=De(t)););return t}function Ie(t,e){return Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ie(t,e)}function Ne(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=De(t);if(e){var o=De(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Me(this,n)}}function Me(t,e){if(e&&("object"===_e(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function De(t){return De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},De(t)}var Le;I({elementName:"ib-quizz-mathquill",classes:["iedib-quizz-widget"],styles:{display:"inline-block"}})(xe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ie(t,e)}(i,t);var e,n,r,o=Ne(i);function i(){return Re(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"enable",value:function(t){this.mathInput}},{key:"getUserInput",value:function(){var t;return(null===(t=this.mathInput)||void 0===t?void 0:t.latex())||""}},{key:"displayRightAnswer",value:function(){if(this.mathInput){var t,e=(null===(t=this.widgetConfig)||void 0===t?void 0:t.ans)||"";this.mathInput.latex(e),this.enable(!1)}}},{key:"check",value:function(){var t,e;if((null===(t=this.statusDisplay)||void 0===t?void 0:t.getStatus())===nt.RIGHT)return!0;if((null===(e=this.statusDisplay)||void 0===e?void 0:e.getStatus())!==nt.PENDING)return!1;var n=!1;try{var r;if(null!==(r=this.widgetConfig)&&void 0!==r&&r.cfn){var o,i,a,u={u:this.getUserInput()};Object.assign(u,null===(o=this.groupContext)||void 0===o?void 0:o._s);var s=((null===(i=this.widgetConfig)||void 0===i?void 0:i.cfn)||"return true").replace(/#/g,"");n=yt(s,u,(null===(a=this.groupContext)||void 0===a?void 0:a._s)||{})}else{if(!window.nerdamer)throw new Error("Check funcion must be set");window.nerdamer.fromLatex(this.getUserInput())}}catch(t){return console.error(t),this.setStatus(nt.ERROR),!1}return this.setStatus(n?nt.RIGHT:nt.WRONG),this.getUserInput(),this.enable(!n),n?this.showFeedback():this.incAttempts(),n}},{key:"render",value:function(){var t,e=this;if(this.widgetConfig)if(this.widgetConfig,window.MathQuill){if(null!==(t=this.groupContext)&&void 0!==t&&t.s.length&&this.widgetConfig){var n=this.widgetConfig.ans||"";n.indexOf("#")>=0&&(n=n.replace(/#/g,""),this.widgetConfig.ans=""+l(this.groupContext._s||{},n))}this.input=document.createElement("span"),this.input.innerText=vt(this.widgetConfig.ini||""),this.input.innerText,this.append(this.input);var r=window.MathQuill.getInterface(2);this.mathInput=r.MathField(this.input,{}),this.mathInput.__controller.textarea.on("keyup",(function(t){t.preventDefault(),e.setStatus(nt.PENDING)})),Te(De(i.prototype),"init",this).call(this,this.widgetConfig.pre),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}else console.error("MathQuill not found on page")}}])&&Ae(e.prototype,n),r&&Ae(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(At));function qe(t){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qe(t)}function Be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ve(r.key),r)}}function He(t,e){return He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},He(t,e)}function Ge(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$e(t);if(e){var o=$e(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fe(this,n)}}function Fe(t,e){if(e&&("object"===qe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ue(t)}function Ue(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $e(t){return $e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$e(t)}function Ve(t){var e=function(t,e){if("object"!==qe(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==qe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===qe(e)?e:String(e)}var Qe,We;p([(Qe={name:"quizz",author:"Josep Mulet Pol",version:"1.0",query:"[data-quizz-group]",use$:!0},(We=Object.assign({},z,Qe)).query||(We.query='[role="snptd_'.concat(We.name,'"],[data-snptd="').concat(We.name,'"]')),function(t){t.meta=We}(Le=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&He(t,e)}(i,t);var e,n,r,o=Ge(i);function i(t){var e,n,r,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t),n=Ue(e),a={s:"",_s:{},o:{hint:2,ans:4}},(r=Ve(r="groupContext"))in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a;var l,f=t.getAttribute("data-lang");f||(f=(null===(l=t.parentElement)||void 0===l?void 0:l.getAttribute("data-lang"))||null);var p=t.getAttribute("data-quizz-group")||"";try{var d=c(p);e.groupContext=Object.assign(e.groupContext,d),e.groupContext.o.hint=u(e.groupContext.o.hint,2),e.groupContext.o.ans=u(e.groupContext.o.ans,4),e.groupContext}catch(t){console.error(t)}return e.lang=f||"ca",e.generateGroup(),e.findPlaceholders(),e.allQuizzElements=e.parent.querySelectorAll("ib-quizz-numeric, ib-quizz-dropdown, ib-quizz-mchoice"),e.allClozeElements=document.querySelectorAll("ib-quizz-cloze, ib-quizz-mathquill"),e.allQuizzElements,e.allClozeElements,e.checkButton=s("button",{class:"btn btn-sm btn-primary d-print-none",style:"margin: 10px;display:block",html:'<i class="fa fas fa-check"></i> '+D(e.lang,"check")}),e.listener=function(t){t.preventDefault();var n=!0;e.allQuizzElements.forEach((function(t){var e=t.check();n=n&&e})),e.allClozeElements.forEach((function(t){var e=t.check();n=n&&e})),n&&e.checkButton.setAttribute("disabled","true")},e.allQuizzElements.length+e.allClozeElements.length>0&&e.parent.append(e.checkButton),e}return e=i,(n=[{key:"generateGroup",value:function(){try{yt(this.groupContext.s,{},this.groupContext._s)}catch(t){console.error("GroupContext:: No es pot interpretar el codi.\n",t)}if(this.groupContext.s.trim().length){var t=s("div",{class:"alert alert-info d-print-none",html:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" style="height:20px;"><path fill="#154b5e" d="M592 192H473.26c12.69 29.59 7.12 65.2-17 89.32L320 417.58V464c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48V240c0-26.51-21.49-48-48-48zM480 376c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm-46.37-186.7L258.7 14.37c-19.16-19.16-50.23-19.16-69.39 0L14.37 189.3c-19.16 19.16-19.16 50.23 0 69.39L189.3 433.63c19.16 19.16 50.23 19.16 69.39 0L433.63 258.7c19.16-19.17 19.16-50.24 0-69.4zM96 248c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm128 128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm0-128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm0-128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm128 128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"/></svg> \n                <small>'.concat(D(this.lang,"random_msg"),"</small>")}),e=this.parent.querySelector(":nth-child(2)");"H4"===(null==e?void 0:e.nodeName)?this.parent.insertBefore(t,e.nextSibling):this.parent.prepend(t)}}},{key:"findPlaceholders",value:function(){0!==this.groupContext.s.trim().length&&(this.findPlaceholdersSpan(),this.findPlaceholdersText())}},{key:"findPlaceholdersText",value:function(){var t=this;(function(t){for(var e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null),r=n.nextNode();null!=r;)e.push(r),r=n.nextNode();return e})(this.parent).forEach((function(e){var n=e.textContent||"";e.textContent=bt(n,t.groupContext._s)}))}},{key:"findPlaceholdersSpan",value:function(){var t=this;this.parent.querySelectorAll("span[data-quizz-interpol]").forEach((function(e){var n=e.getAttribute("data-quizz-interpol")||"";n.indexOf("#")<0||(e.innerHTML=bt(n,t.groupContext._s))}))}},{key:"init",value:function(){var t=this,e=this.parent.dataset;if("1"!==e.active&&(e.active="1",this.checkButton.addEventListener("click",this.listener),this.allQuizzElements.forEach((function(e){"function"==typeof e.setLang?(e.setLang(t.lang),e.setGroupContext(t.groupContext)):console.error("No custom element registered for ",e)})),this.allClozeElements.length)){var n="https://piworld.es/iedib/snippets/sd/mathquill.min.js",r=document.body.querySelector('script[src$="/sd/quizz.min.js"]');r&&(n=(r.getAttribute("src")||"").replace("/sd/quizz.min.js","/sd/mathquill.min.js")),function(t,e,n,r){if(!e||null==document.head.querySelector("script#"+e)){var o=document.createElement("script");o.type="text/javascript",o.src=t,e&&o.setAttribute("id",e),o.onload=function(){console.info("Loaded ",t),n&&n()},o.onerror=function(){console.error("Error loading ",t),r&&r()},document.head.append(o)}}(n,"mathquill.matrix4quizz",(function(){t.allClozeElements.forEach((function(e){"function"==typeof e.setLang?(e.setLang(t.lang),e.setGroupContext(t.groupContext)):console.error("No custom element registered for ",e)}))}))}}},{key:"dispose",value:function(){"0"!==this.parent.dataset.active&&(this.parent.removeAttribute("data-active"),this.checkButton.removeEventListener("click",this.listener))}}])&&Be(e.prototype,n),r&&Be(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(R))||Le)])}()}();