!function(){"use strict";var t={923:function(t,e,n){var r=n(81),i=n.n(r),o=n(645),a=n.n(o)()(i());a.push([t.id,".modal-fullscreen-xl .modal-header {\n    padding: 0rem 1rem;\n    border: none;\n}\n.modal-fullscreen-xl .close {\n    font-size: 200%;\n    border-radius: 50%;\n    background: black;\n}\n.modal-fullscreen-xl .modal-dialog {\n    width: 95%;\n    height: 95%;\n    max-width: none;\n    margin: auto;\n}\n.modal-fullscreen-xl .modal-content {\n    height: 100%;\n    border: 0;\n    border-radius: 0;\n    background: rgba(0,0,0,0);\n}\n.modal-fullscreen-xl .modal-body {\n    width: 100%;\n    overflow: auto;\n    background: rgba(0,0,0,0);\n}\n.navigate-left-arrow, .navigate-right-arrow {\n    font-size: 300%;\n    color: whitesmoke;\n}",""]),e.Z=a},889:function(t,e,n){var r=n(81),i=n.n(r),o=n(645),a=n.n(o)()(i());a.push([t.id,'@media not print {\n    body.editing div[role="snptd_presentacio"] .nav.nav-tabs {\n        background: lightgray;\n        position: relative;\n    }\n    body.editing div[role="snptd_presentacio"] .nav.nav-tabs::before {\n        content: \'\\f1e7\';\n        position: absolute;\n        top: 5px;\n        right: 5px; \n        font-family: \'FontAwesome\';\n        font-size: 150%;\n    }\n\n    div[role="snptd_presentacio"] {\n        margin: auto;\n        border-radius: 5px;\n        border: 2px solid #d4ebee;\n        max-width: 600px;\n    }\n  \n    div[role="snptd_presentacio"].theme-dark > .tab-content {\n        background: #363640;\n        color: whitesmoke;\n    }\n\n    div[role="snptd_presentacio"].align-center div.tab-pane {\n        align-self: center;\n        min-height: initial;\n    }\n\n    div[role="snptd_presentacio"].align-bottom div.tab-pane {\n        align-self: flex-end;\n        min-height: initial;\n    }\n}\n  ',""]),e.Z=a},841:function(t,e,n){var r=n(81),i=n.n(r),o=n(645),a=n.n(o)()(i());a.push([t.id,'/* %SKIPALLCSS */\ndiv[role="snptd_presentacio"] .nav.nav-tabs {\n    display: none;\n}\n\n@media not print {\n    div[role="snptd_presentacio"]>.tab-content {\n        border: none;\n        display: flex;\n        padding: 10px;\n    }\n\n    div[role="snptd_presentacio"] .tab-pane {\n        display: block;\n        border: none;\n        min-height: 100px;\n        margin-right: -100%;\n        width: 100%;\n        opacity: 0;\n    }\n\n    div[role="snptd_presentacio"] .tab-pane.fade {\n        transition-delay: 300ms;\n        transition-duration: 500ms;\n    }\n\n    div[role="snptd_presentacio"][data-transition="slide"] .tab-pane {\n        transition: transform .55s linear, opacity 0.55s ease-out;\n    }\n\n    div[role="snptd_presentacio"] .tab-pane.active {\n        opacity: 1;\n        transform: translate(0, 0);\n    }\n\n    div[role="snptd_presentacio"] .tab-pane:not(.active) {\n        transform: translate(-110%, 0);\n    }\n\n    div[role="snptd_presentacio"] .snpt_container {\n        margin: 20px 400px;\n        height: 300px;\n        width: 50%;\n        background-color: #d4ebee;\n    }\n\n    div[role="snptd_presentacio"] .box_continguts {\n        padding-top: 20px;\n        padding-left: 20px;\n        padding-right: 20px;\n        font-size: 20px;\n        height: 250px;\n        background-color: #d4ebee;\n    }\n\n    div[role="snptd_presentacio"] .box_botons {\n        padding-left: 10px;\n        padding-top: 6px;\n        font-size: 18px;\n        height: 40px;\n        background-color: #d4ebee;\n    }\n\n    div[role="snptd_presentacio"] .box_botons button {\n        margin: 0 1px;\n    }\n\n    div[role="snptd_presentacio"] .box_comptador {\n        display: inline;\n        float: right;\n        padding-right: 15px;\n        padding-top: 5px;\n        font-size: 16px;\n        height: 30px;\n        color: #0069d9;\n    }\n}\n\n@media print {\n    div[role="snptd_presentacio"] {\n        width: 99%;\n        margin: auto;\n        border: 1px solid #eee;\n        display: flex;\n    }\n\n    div[role="snptd_presentacio"] .box_botons {\n        display: none;\n    }\n\n    div[role="snptd_presentacio"] .fade {\n        opacity: 1;\n    }\n\n    div[role="snptd_presentacio"] .nav>li>a {\n        min-width: 80px;\n        color: #555;\n    }\n\n    div[role="snptd_presentacio"] .tab-pane {\n        opacity: 1;\n        width: 100%;\n        display: inline-block !important;\n    }\n\n    div[role="snptd_presentacio"] .tab-pane::before {\n        content: attr(data-label);\n        width: 100%;\n        display: block;\n        margin-bottom: 10px;\n        background-color: #d4ebee;\n        text-align: right;\n        padding-right: 5px;\n    }\n}',""]),e.Z=a},707:function(t,e,n){var r=n(81),i=n.n(r),o=n(645),a=n.n(o)()(i());a.push([t.id,"[data-quizz-group]{padding:5px;border-left:3px solid lightblue}.ib-quizz-right{margin-left:8px;border-radius:50%;background-color:#438c43;color:white;width:23px;display:inline-block;height:23px;text-align:center}.ib-quizz-wrong{margin-left:8px;border-radius:50%;background-color:#a43c3c;color:white;width:23px;display:inline-block;height:23px;text-align:center}.ib-quizz-error{margin-left:8px;border-radius:50%;background-color:#72395a;color:white;width:23px;display:inline-block;height:23px;text-align:center}.ib-quizz-hint,.ib-quizz-feedback{margin-left:8px;border-radius:50%;background-color:#a3a3a3;color:black;width:23px;display:inline-block;height:23px;text-align:center;cursor:pointer}",""]),e.Z=a},665:function(t,e,n){var r=n(81),i=n.n(r),o=n(645),a=n.n(o),s=n(667),u=n.n(s),l=new URL(n(73),n.b),c=a()(i()),f=u()(l);c.push([t.id,'.sd-speak-enabled {\n  position: relative;\n  background: whitesmoke;\n  text-decoration: none;\n}\n\n@keyframes speakicon_anim {\n  0% {\n    opacity: 0;\n    left: -10px;\n  }\n\n  100% {\n    opacity: 1;\n    left: -5px;\n  }\n}\n\n.sd-speak-enabled:hover:after {\n  content: "";\n  padding: 2px;\n  border-radius: 50%;\n  width: 14px;\n  height: 14px;\n  position: absolute;\n  background-image: url('+f+");\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: contain;\n  left: -5px;\n  top: -16px;\n  z-index: 1000;\n  font-size: 70%;\n  margin: 0px 5px;\n  font-weight: 700;\n  vertical-align: top;\n  animation: speakicon_anim 1s ease;\n}\n\n\n/*font-family: 'FontAwesome';*/\n/*\\f025*/",""]),e.Z=c},441:function(t,e,n){var r=n(81),i=n.n(r),o=n(645),a=n.n(o)()(i());a.push([t.id,"@media print and (color) {\n    .pw-tasca-solucio, .pw-tasca-nprt {\n        display:none!important;\n    }\n}",""]),e.Z=a},645:function(t){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var u=this[s][0];null!=u&&(a[u]=!0)}for(var l=0;l<t.length;l++){var c=[].concat(t[l]);r&&a[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),e.push(c))}},e}},667:function(t){t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},81:function(t){t.exports=function(t){return t[1]}},379:function(t){var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},a=[],s=0;s<t.length;s++){var u=t[s],l=r.base?u[0]+r.base:u[0],c=o[l]||0,f="".concat(l," ").concat(c);o[l]=c+1;var d=n(f),p={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var h=i(p,r);r.byIndex=s,e.splice(s,0,{identifier:f,updater:h,references:1})}a.push(f)}return a}function i(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var o=r(t=t||[],i=i||{});return function(t){t=t||[];for(var a=0;a<o.length;a++){var s=n(o[a]);e[s].references--}for(var u=r(t,i),l=0;l<o.length;l++){var c=n(o[l]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}o=u}}},569:function(t){var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:function(t){t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:function(t,e,n){t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:function(t){t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:function(t){t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},73:function(t){t.exports="data:image/svg+xml;charset=utf8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 style=%27background:white%27 viewBox=%270 0 512 512%27%3E%3Cpath fill=%27%232a84f9%27 d=%27M480 32c0-12.9-7.8-24.6-19.8-29.6s-25.7-2.2-34.9 6.9L381.7 53c-48 48-113.1 75-181 75H192 160 64c-35.3 0-64 28.7-64 64v96c0 35.3 28.7 64 64 64l0 128c0 17.7 14.3 32 32 32h64c17.7 0 32-14.3 32-32V352l8.7 0c67.9 0 133 27 181 75l43.6 43.6c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6V300.4c18.6-8.8 32-32.5 32-60.4s-13.4-51.6-32-60.4V32zm-64 76.7V240 371.3C357.2 317.8 280.5 288 200.7 288H192V192h8.7c79.8 0 156.5-29.8 215.3-83.3z%27/%3E%3C/svg%3E"}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,exports:{}};return t[r](o,o.exports,n),o.exports}n.m=t,n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.b=document.baseURI||self.location.href,n.nc=void 0,function(){function t(n,i,o){return t=e()?Reflect.construct.bind():function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&r(o,n.prototype),o},t.apply(null,arguments)}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(){return"g"+Math.random().toString(32).substring(2)}function s(t,e,n,r){r=r||0;var i=window;i[t]&&"function"==typeof i[t]?e&&e():r>15?n&&n():window.setTimeout((function(){s(t,e,n,r+1)}),50*(r+1))}function u(t){s("require",(function(){window.require(["jquery"],(function(){console.info("$ready1"),$(t)}),(function(){console.error("Error requiring $. Waiting for $"),s("jQuery",(function(){console.info("$ready2"),$(t)}),(function(){console.error("Cannot find $. Bootstrap anyway!"),t()}),35)}))}),(function(){console.error("Cannot find requirejs. Waiting for $"),s("jQuery",(function(){console.info("$ready3"),$(t)}),(function(){console.error("Cannot find $. Bootstrap anyway!"),t()}),35)}),10)}function l(t,e){if(t&&"number"==typeof t)return t;if(!t||!(t+"").trim())return e;try{var n=parseInt(t+"");if(!isNaN(n))return n}catch(t){}return e}function c(t,e){var n=document.createElement(t);return Object.keys(e).forEach((function(t){var r=e[t];"class"===t?r.trim().split(/\s+/).forEach((function(t){n.classList.add(t)})):"style"===t?r.split(";").forEach((function(t){var e=t.split(":");2===e.length&&n.style.setProperty(e[0].trim(),e[1].trim())})):"html"===t?n.innerHTML=r:n.setAttribute(t,r)})),n}function f(t,e){return(e=(e||"").trim()).toLowerCase().startsWith("http")?e:(r=e,n=((n=t)||"").trim(),r=(r||"").trim(),n.endsWith("/")||(n+="/"),r.startsWith("/")&&(r=r.substring(1)),n+r);var n,r}function d(e,n){e=e||{};var r=Object.keys(e),o=[].concat(r,["expr","return eval(expr)"]),a=t(Function,i(o)),s=Object.values(e),u=[].concat(s,[n]);return a.apply(void 0,i(u))}function p(t){return t=t||"",JSON.parse(atob(t)||"{}")}function h(t){t.forEach((function(t){var e=window.IB;if(t.meta){var n=t.meta;if(e.sd[n.name]&&"function"==typeof e.sd[n.name].init)return console.error("Warning: component '".concat(n.name,"' loaded twice.")),void e.sd[n.name].init();!function r(){e.sd[n.name]=e.sd[n.name]||{inst:{},_class:t,init:r,dispose:null};var i=n.query||'div[role="snptd_'.concat(n.name,'"], div[data-snptd="').concat(n.name,'"]');if("body"===i){if(e.sd[n.name].singl)return void console.error("Singleton already defined");var o=document.querySelector("body"),a=new t(o);a.init(),e.sd[n.name].singl=a,"_init: Initialized singleton '".concat(n.name,"' instance.")}else{var s=function(t){return document.querySelectorAll(t)}(i),u=0;s.forEach((function(r){var i=r,o=i.getAttribute("id");if(o||(o="sd_"+Math.random().toString(32).substring(2),i.setAttribute("id",o)),"1"!==i.dataset.active){var a=new t(i);a.init(),null!=e.sd[n.name].inst&&(e.sd[n.name].inst[o]=a),u++}else console.warn("Warning: Element '".concat(n.name,"' ").concat(o," already processed."))})),"_init: Initialized ".concat(u," '").concat(n.name,"' instances.")}}();e.sd[n.name].dispose=function(){var t=0;window.IB&&window.IB.sd&&window.IB.sd[n.name]&&window.IB.sd[n.name].inst&&(Object.keys(window.IB.sd[n.name].inst).forEach((function(r){var i=window.IB.sd[n.name].inst[r];i&&(i.dispose(),t++,delete e.sd[n.name].inst[r])})),"_dispose: Destroyed ".concat(t," '").concat(n.name,"' instances."))}}else console.error("Missing meta in class ",t,". Annotate it with @Component")}))}var y=function(t){window.IB=window.IB||{sd:{}};var e=t;e.map((function(t){var e;return(null===(e=t.meta)||void 0===e?void 0:e.use$)||!1})).reduce((function(t,e){return e||t}))?u((function(){var t;"function"==typeof(null===(t=window.IB)||void 0===t?void 0:t.on$Ready)&&window.IB.on$Ready(),h(e)})):"complete"===document.readyState?h(e):window.addEventListener("DOMContentLoaded",(function(){return h(e)}))},v=n(379),b=n.n(v),m=n(795),g=n.n(m),w=n(569),O=n.n(w),S=n(565),k=n.n(S),x=n(216),P=n.n(x),E=n(589),j=n.n(E),_=n(923),C={};C.styleTagTransform=j(),C.setAttributes=k(),C.insert=O().bind(null,"head"),C.domAPI=g(),C.insertStyleElement=P();b()(_.Z,C),_.Z&&_.Z.locals&&_.Z.locals;var T=n(889),L={};L.styleTagTransform=j(),L.setAttributes=k(),L.insert=O().bind(null,"head"),L.domAPI=g(),L.insertStyleElement=P();b()(T.Z,L),T.Z&&T.Z.locals&&T.Z.locals;var A=n(841),R={};R.styleTagTransform=j(),R.setAttributes=k(),R.insert=O().bind(null,"head"),R.domAPI=g(),R.insertStyleElement=P();b()(A.Z,R),A.Z&&A.Z.locals&&A.Z.locals;var I=n(665),z={};z.styleTagTransform=j(),z.setAttributes=k(),z.insert=O().bind(null,"head"),z.domAPI=g(),z.insertStyleElement=P();b()(I.Z,z),I.Z&&I.Z.locals&&I.Z.locals;var M=n(441),N={};N.styleTagTransform=j(),N.setAttributes=k(),N.insert=O().bind(null,"head"),N.domAPI=g(),N.insertStyleElement=P();b()(M.Z,N),M.Z&&M.Z.locals&&M.Z.locals;var D=n(707),q={};q.styleTagTransform=j(),q.setAttributes=k(),q.insert=O().bind(null,"head"),q.domAPI=g(),q.insertStyleElement=P();b()(D.Z,q),D.Z&&D.Z.locals&&D.Z.locals;function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==B(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===B(o)?o:String(o)),r)}var i,o}function U(t,e,n){return e&&H(t.prototype,e),n&&H(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var F=U((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.parent=e}));function G(t){return function(t){if(Array.isArray(t))return Z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var V,W={name:"",author:"",version:"1.0",use$:!1};function J(t){var e=Object.assign({},W,t);return e.query||(e.query='[role="snptd_'.concat(e.name,'"],[data-snptd="').concat(e.name,'"]')),function(t){t.meta=e}}function Q(t){return function(e){var n=e.prototype.connectedCallback,r=t.elementName,i=t.classes,o=t.styles;e.prototype.connectedCallback=function(){var t;i&&(t=this.classList).add.apply(t,G(i));o&&Object.assign(this.style,o),n&&n.apply(this)},customElements.define(r,e)}}function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ot(r.key),r)}}function K(t,e){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},K(t,e)}function tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=rt(t);if(e){var i=rt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return et(this,n)}}function et(t,e){if(e&&("object"===X(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return nt(t)}function nt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rt(t){return rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rt(t)}function it(t,e,n){return(e=ot(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ot(t){var e=function(t,e){if("object"!==X(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===X(e)?e:String(e)}var at="snptModal_lightbox";var st,ut,lt,ct=J({name:"lightbox",author:"Josep Mulet Pol",version:"2.3",query:"body",use$:!0})(V=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K(t,e)}(o,t);var e,n,r,i=tt(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),it(nt(e=i.call(this,t)),"currentIndex",0),it(nt(e),"$gallery",[]),e}return e=o,(n=[{key:"init",value:function(){var t=this;this.$gallery=function(){for(var t=0,e=[],n=document.querySelectorAll('[role="snptd_lightbox"], [data-snptd="lightbox"]'),r=0,i=n.length;r<i;r++){var o=n[r],a=(o.tagName||"").toUpperCase();if("DIV"===a||"TABLE"===a)for(var s=o.querySelectorAll("img"),u=0,l=s.length;u<l;u++){var c=s[u];c.dataset.lbpos=t+"",t++,e.push(c)}else if("IMG"==a){if("lightbox"!=o.dataset.snptd&&"snptd_lightbox"!=o.getAttribute("role"))continue;o.dataset.lbpos=t+"",t++,e.push(o)}}return e}(),this.createModal(),this.currentIndex=0,this.$gallery.forEach((function(e){return t.setupImage(e)}))}},{key:"setupImage",value:function(t){var e=this,n=$(t);"1"!=n.attr("data-active")&&(n.css("cursor","pointer"),n.attr("data-toggle","modal"),n.attr("data-target","#"+at),n.attr("data-active","1"),n.off(),n.on("click",(function(t){e.currentIndex=l(n.attr("data-lbpos")||"0",0),e.loadImageDynamically()})))}},{key:"loadImageDynamically",value:function(){var t,e=this;if(this.$gallery[this.currentIndex]){var n=$(this.$gallery[this.currentIndex]);if(null!==(t=this.$img)&&void 0!==t&&t.length){var r=new Image,i=n.attr("data-src")||n.attr("src")||"";r.onload=function(){var t;e.resize(r.width,r.height),null===(t=e.$img)||void 0===t||t.attr("src",i)},r.onerror=function(t){var n;console.error("Cannot load image ",t),null===(n=e.$img)||void 0===n||n.attr("src","")},r.src=i}}else console.error("Nothing at currentIndex",this.currentIndex)}},{key:"createModal",value:function(){var t=this,e=this.$gallery.length>1,n=$('<div class="modal fade modal-fullscreen-xl" id="'+at+'" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close text-white" data-dismiss="modal">&times;</button></div><div class="modal-body p-0" style="text-align:center;">'+(e?'<a class="navigate-left-arrow" href="javascript:void(0);"><span>&#10094;</span></a>':"")+'<img src="">'+(e?'<a class="navigate-right-arrow" href="javascript:void(0);"><span>&#10095;</span></a>':"")+"</div></div></div></div>");this.$modal=$(n),this.$img=this.$modal.find("img"),this.$close=this.$modal.find("button"),$("body").append(this.$modal),this.$modal.on("hide.bs.modal",(function(){var e;null===(e=t.$img)||void 0===e||e.attr("src","")})),$("#modalCloseBtn").on("click",(function(){var e;null===(e=t.$img)||void 0===e||e.attr("src","")})),e&&(this.$modal.find(".navigate-left-arrow").on("click",(function(e){e.preventDefault(),t.navigateLeft()})),this.$modal.find(".navigate-right-arrow").on("click",(function(e){e.preventDefault(),t.navigateRight()})))}},{key:"resize",value:function(t,e){var n=1;e>0&&(n=t/e);var r,i,o,a,s=$(window).height()||0,u=$(window).width()||0,l=1;u>0&&(l=s/u),n>l?(null===(r=this.$img)||void 0===r||r.css("width","initial"),null===(i=this.$img)||void 0===i||i.css("height","100%")):(null===(o=this.$img)||void 0===o||o.css("height","initial"),null===(a=this.$img)||void 0===a||a.css("width","100%"))}},{key:"navigateLeft",value:function(){0==this.currentIndex?this.currentIndex=this.$gallery.length-1:this.currentIndex=this.currentIndex-1,this.loadImageDynamically()}},{key:"navigateRight",value:function(){this.currentIndex==this.$gallery.length-1?this.currentIndex=0:this.currentIndex=this.currentIndex+1,this.loadImageDynamically()}},{key:"dispose",value:function(){this.$gallery.forEach((function(t){var e=$(t);e.removeAttr("data-active"),e.removeAttr("data-toggle"),e.removeAttr("data-target"),e.css("cursor","initial"),e.off()}));var t=$("#"+at);t.off(),t.remove()}}])&&Y(e.prototype,n),r&&Y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(F))||V,ft=(st={zoom:.03,maxZoom:10,initialZoom:1,initialX:.5,initialY:.5},ut=function(t,e){if(t&&t.nodeName&&"IMG"===t.nodeName){var n,r,i,o,a,s,u,l,c,f={},d=function(e){t.removeEventListener("wheelzoom.destroy",d),t.removeEventListener("wheelzoom.reset",h),t.removeEventListener("load",g),t.removeEventListener("mouseup",b),t.removeEventListener("mousemove",v),t.removeEventListener("mousedown",m),t.removeEventListener("wheel",y),null!=c&&c.unobserve(t),t.style.backgroundImage=e.backgroundImage,t.style.backgroundRepeat=e.backgroundRepeat,t.src=e.src,t.style.cursor="default"}.bind(null,{backgroundImage:t.style.backgroundImage,backgroundRepeat:t.style.backgroundRepeat,src:t.src});t.addEventListener("wheelzoom.destroy",d),e=e||{},Object.keys(st).forEach((function(t){f[t]=void 0!==e[t]?e[t]:st[t]})),t.complete&&g(),t.addEventListener("load",g),null!=window.ResizeObserver&&(c=new ResizeObserver((function(){if(t.src==l){var e=Math.max(f.initialZoom,1),u=window.getComputedStyle(t,null);n=parseInt(u.width,10),r=parseInt(u.height,10),o=r*e,a=-((i=n*e)-n)*f.initialX,s=-(o-r)*f.initialY,t.style.backgroundSize=i+"px "+o+"px",t.style.backgroundPosition=a+"px "+s+"px"}}))).observe(t)}function p(){a>0?a=0:a<n-i&&(a=n-i),s>0?s=0:s<r-o&&(s=r-o),t.style.backgroundSize=i+"px "+o+"px",t.style.backgroundPosition=a+"px "+s+"px"}function h(){i=n,o=r,a=s=0,p()}function y(e){var u=0;e.preventDefault(),e.deltaY?u=e.deltaY:e.wheelDelta&&(u=-e.wheelDelta);var l=t.getBoundingClientRect(),c=e.pageX-l.left-window.pageXOffset,d=e.pageY-l.top-window.pageYOffset,y=(c-a)/i,v=(d-s)/o;u<0?(i+=i*f.zoom,o+=o*f.zoom):(i-=i*f.zoom,o-=o*f.zoom),f.maxZoom&&(i=Math.min(n*f.maxZoom,i),o=Math.min(r*f.maxZoom,o)),a=c-i*y,s=d-o*v,i<=n||o<=r?h():p()}function v(t){t.preventDefault(),a+=t.pageX-u.pageX,s+=t.pageY-u.pageY,u=t,p()}function b(){document.removeEventListener("mouseup",b),document.removeEventListener("mousemove",v)}function m(t){t.preventDefault(),u=t,document.addEventListener("mousemove",v),document.addEventListener("mouseup",b)}function g(){var e=Math.max(f.initialZoom,1);if(t.src!==l){var u=window.getComputedStyle(t,null);n=parseInt(u.width,10),r=parseInt(u.height,10),o=r*e,a=-((i=n*e)-n)*f.initialX,s=-(o-r)*f.initialY,function(t){t.style.backgroundRepeat="no-repeat",t.style.backgroundImage='url("'+t.src+'")',l="data:image/svg+xml;base64,"+window.btoa('<svg xmlns="http://www.w3.org/2000/svg" width="'+t.naturalWidth+'" height="'+t.naturalHeight+'"></svg>'),t.src=l}(t),t.style.backgroundSize=i+"px "+o+"px",t.style.backgroundPosition=a+"px "+s+"px",t.style.cursor="nesw-resize",t.addEventListener("wheelzoom.reset",h),t.addEventListener("wheel",y),t.addEventListener("mousedown",m)}}},function(t,e){"function"==typeof window.btoa&&ut(t,e)});function dt(t){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(t)}function pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==dt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==dt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===dt(o)?o:String(o)),r)}var i,o}function ht(t,e){return ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ht(t,e)}function yt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=bt(t);if(e){var i=bt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return vt(this,n)}}function vt(t,e){if(e&&("object"===dt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function bt(t){return bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bt(t)}var mt,gt=J({name:"zoom",author:"Josep Mulet Pol",version:"2.0"})(lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ht(t,e)}(o,t);var e,n,r,i=yt(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).allImgs=[],e}return e=o,n=[{key:"initImage",value:function(t,e){this.allImgs.push(t),t.style.maxWidth="98%","1"!==t.dataset.active&&(t.dataset.active="1",ft(t,e))}},{key:"init",value:function(){var t=this,e=this.parent.dataset;if("1"!==e.active){e.active="1";var n={maxZoom:l(e.maxzoom,10)};window.setTimeout((function(){"IMG"===t.parent.nodeName?t.initImage(t.parent,n):t.parent.querySelectorAll("img").forEach((function(e){return t.initImage(e,n)}))}),600)}}},{key:"dispose",value:function(){"1"===this.parent.dataset.active&&(this.parent.removeAttribute("data-active"),this.allImgs.forEach((function(t){t.dispatchEvent(new Event("wheelzoom.destroy")),t.removeAttribute("data-active")})))}}],n&&pt(e.prototype,n),r&&pt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(F))||lt;function wt(t){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wt(t)}function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_t(r.key),r)}}function St(t,e){return St=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},St(t,e)}function kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Et(t);if(e){var i=Et(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xt(this,n)}}function xt(t,e){if(e&&("object"===wt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Pt(t)}function Pt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Et(t){return Et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Et(t)}function jt(t,e,n){return(e=_t(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _t(t){var e=function(t,e){if("object"!==wt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==wt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===wt(e)?e:String(e)}var Ct='<i class="fa fas fa-play"></i>',Tt='<i class="fa fas fa-pause"></i>';function Lt(t,e){var n=document.createElement("button");n.className=t;var r=document.createElement("i");return r.className=e,n.appendChild(r),n}var At=J({name:"presentacio",author:"Tomeu Fiol, Josep Mulet",version:"2.2"})(mt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&St(t,e)}(o,t);var e,n,r,i=kt(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),jt(Pt(e=i.call(this,t)),"loop",!1),jt(Pt(e),"num",0),jt(Pt(e),"n",0),jt(Pt(e),"continuarAutomatic",!1),jt(Pt(e),"durada",[]),e}return e=o,(n=[{key:"init",value:function(){var t=this,e=this.parent.dataset;this.loop="1"==e.loop||"true"==e.loop;for(var n=this.parent.querySelectorAll("ul.nav.nav-tabs > li > a"),r=0,i=n.length;r<i;r++)n[r].innerHTML="&nbsp; "+(r+1)+"/"+i;this.parent.style.overflow="hidden",this.button_container=document.createElement("div"),this.button_container.className="box_botons",this.parent.append(this.button_container),this.diapositives=this.parent.querySelectorAll("div.tab-content > div.tab-pane"),this.num=this.diapositives.length,this.n=(l((null==e?void 0:e.start)||"1",1)-1)%this.num;for(var o="fade"==e.transition,a=0;a<this.num;a++)this.diapositives[a].dataset.label=a+1+"/"+this.num,this.diapositives[a].classList.remove("iedib-tabpane"),o&&this.diapositives[a].classList.add("fade"),a==this.n?this.diapositives[a].classList.add("active"):this.diapositives[a].classList.remove("active");var s=(e.durades||"0").trim();this.continuarAutomatic="0"!=s;var u=s.split(","),c=5;1==u.length&&(c=l(u[0],c)),this.durada=[];for(var f=u.length,d=0;d<this.num;d++){var p=c;d>=f||(p=l(u[d],c)),this.durada.push(p)}this.crearBotons(),this.carregaListeners();var h=e.autostart;"1"!=e.loop&&"true"!=e.loop&&(h="0"),"1"==h||"true"==h?this.continuarAutomatic&&this.n<this.num&&(this.updateCounter(),this.currentTimeout=setTimeout((function(){t.seguent()}),1e3*this.durada[this.n])):this.continuarAutomatic?(this.continuarAutomatic=!1,this.buttonPlay&&(this.buttonPlay.innerHTML=Ct),this.updateCounter()):this.updateCounter()}},{key:"eliminarActive",value:function(){if(this.diapositives)for(var t=0;t<this.num;t++)this.diapositives[t].classList.remove("active")}},{key:"updateCounter",value:function(){var t=this;if(this.boxComptador)if(this.boxComptador.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp; "+(this.n+1)+" / "+this.num,this.currentTimeout&&(clearInterval(this.currentTimeout),this.currentTimeout=null),this.continuarAutomatic){if(!this.loop&&this.n==this.num-1)return this.continuarAutomatic=!1,void(this.buttonPlay&&(this.buttonPlay.innerHTML=Ct));this.currentTimeout=setTimeout((function(){t.seguent()}),1e3*this.durada[this.n]),this.buttonPlay&&(this.buttonPlay.innerHTML=Tt)}else this.buttonPlay&&(this.buttonPlay.innerHTML=Ct)}},{key:"seguent",value:function(){if(this.diapositives){if(this.n>=this.num-1){if(!this.loop)return;this.n=-1}this.eliminarActive(),this.n+=1,this.diapositives[this.n].classList.add("active"),this.updateCounter()}}},{key:"anterior",value:function(){if(this.diapositives){if(0==this.n){if(!this.loop)return;this.n=this.num}this.eliminarActive(),this.n-=1,this.diapositives[this.n].classList.add("active"),this.updateCounter()}}},{key:"primer",value:function(){this.diapositives&&(this.eliminarActive(),this.n=0,this.diapositives[this.n].classList.add("active"),this.continuarAutomatic=!1,this.updateCounter())}},{key:"darrer",value:function(){this.diapositives&&(this.eliminarActive(),this.n=this.num-1,this.diapositives[this.n].classList.add("active"),this.continuarAutomatic=!1,this.updateCounter())}},{key:"pausa",value:function(){this.buttonPlay&&(this.continuarAutomatic=!1,null!=this.currentTimeout&&(clearTimeout(this.currentTimeout),this.currentTimeout=null),this.buttonPlay.innerHTML=Ct)}},{key:"play",value:function(){var t=this;this.buttonPlay&&(this.n>=this.num-1&&this.primer(),this.continuarAutomatic=!0,this.currentTimeout=setTimeout((function(){t.seguent()}),1e3*this.durada[this.n]),this.buttonPlay.innerHTML=Tt)}},{key:"carregaListeners",value:function(){var t=this;this.buttonBack&&this.buttonFirst&&this.buttonLast&&this.buttonNext&&(this.evListener1=function(e){return t.primer()},this.evListener2=function(e){return t.darrer()},this.evListener3=function(e){return t.seguent()},this.evListener4=function(e){return t.anterior()},this.buttonFirst.addEventListener("click",this.evListener1),this.buttonLast.addEventListener("click",this.evListener2),this.buttonNext.addEventListener("click",this.evListener3),this.buttonBack.addEventListener("click",this.evListener4),this.continuarAutomatic&&(this.evListener5=function(e){t.continuarAutomatic?t.pausa():t.play()},this.buttonPlay&&this.buttonPlay.addEventListener("click",this.evListener5)))}},{key:"dispose",value:function(){this.currentTimeout&&window.clearTimeout(this.currentTimeout),this.evListener1&&window.removeEventListener("click",this.evListener1),this.evListener2&&window.removeEventListener("click",this.evListener2),this.evListener3&&window.removeEventListener("click",this.evListener3),this.evListener4&&window.removeEventListener("click",this.evListener4),this.evListener5&&window.removeEventListener("click",this.evListener5),this.parent.dataset.active="0",this.button_container&&this.button_container.remove()}},{key:"crearBotons",value:function(){this.button_container&&(this.buttonFirst=Lt("btn btn-sm btn-outline-primary btn-first","fa fas fa-fast-backward"),this.button_container.appendChild(this.buttonFirst),this.buttonFirst.title="First",this.buttonBack=Lt("btn btn-sm btn-outline-primary btn-step-backward","fa fas fa-chevron-left"),this.button_container.appendChild(this.buttonBack),this.buttonBack.title="Previous",this.buttonNext=Lt("btn btn-sm btn-outline-primary btn-step-forward","fa fas fa-chevron-right"),this.button_container.appendChild(this.buttonNext),this.buttonNext.title="Next",this.buttonLast=Lt("btn btn-sm btn-outline-primary btn-last","fa fas fa-fast-forward"),this.buttonLast.title="Last",this.button_container.appendChild(this.buttonLast),this.continuarAutomatic&&(this.buttonPlay=Lt("btn btn-sm btn-primary btn-step-play","fa fas fa-pause"),this.buttonPlay.style.setProperty("margin-left","15px"),this.buttonPlay.title="Play/Pause",this.button_container.appendChild(this.buttonPlay)),this.boxComptador=document.createElement("div"),this.boxComptador.className="box_comptador",this.button_container.appendChild(this.boxComptador))}}])&&Ot(e.prototype,n),r&&Ot(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(F))||mt;function Rt(t){return Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rt(t)}function It(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zt(r.key),r)}}function zt(t){var e=function(t,e){if("object"!==Rt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Rt(e)?e:String(e)}var Mt=function(){function t(e){var n,r,i,o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,i="",(r=zt(r="url"))in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,this._elem=e;var a=e.getAttribute("href")||e.dataset.lang||"en_us";a=a.replace("#speak_","");var s=e.innerText.trim();s.length>1e3?e.removeAttribute("href"):("-"==e.title&&e.removeAttribute("title"),e.classList.add("sd-speak-enabled"),this.url="https://piworld.es/api/gtts/speak?t="+encodeURIComponent(s)+"&l="+a,this.audio=null,this.handler=function(t){t.preventDefault(),o.play()},e.addEventListener("click",this.handler),this.handler||this._elem.removeEventListener("click",this.handler))}var e,n,r;return e=t,(n=[{key:"play",value:function(){this.audio?(this.audio.pause(),this.audio.currentTime=0):this.audio=new Audio(this.url),this.audio.src=this.url,this.audio.play()}},{key:"setSrc",value:function(t){this.audio&&(this.audio.src=t)}},{key:"pause",value:function(){this.audio&&this.audio.pause()}},{key:"dispose",value:function(){null!=this.audio&&(this.audio.pause(),this.audio.currentTime=0,this.audio.src="",this.audio=null),this.handler&&(this._elem.classList.remove("sd-speak-enabled"),this._elem.removeAttribute("data-active"),this._elem.removeEventListener("click",this.handler),this.handler=null)}}])&&It(e.prototype,n),r&&It(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Nt(t){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nt(t)}function Dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Nt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Nt(o)?o:String(o)),r)}var i,o}var qt=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._elem=e;var i=(e.getAttribute("href")||"_").split("_")[1];"-"==e.title&&e.removeAttribute("title");var o=function(t,e){t=(t||"").toLowerCase();for(var n=0,r=null,i=(e||[]).length;n<i&&null==r;)e[n].lang.toLowerCase()==t&&(r=e[n]),n++;return r}(i,n);this.handler=null,o?(this.utterance=new SpeechSynthesisUtterance(e.innerText),this.utterance.voice=o,e.classList.add("sd-speak-enabled"),this.handler=function(t){t.preventDefault(),r.play()},e.addEventListener("click",this.handler)):e.removeAttribute("href")}var e,n,r;return e=t,(n=[{key:"play",value:function(){window.speechSynthesis.cancel(),this.utterance&&window.speechSynthesis.speak(this.utterance)}},{key:"setSrc",value:function(t){}},{key:"pause",value:function(){window.speechSynthesis.cancel()}},{key:"dispose",value:function(){this._elem.removeEventListener("click",this.handler),this._elem.classList.remove("sd-speak-enabled"),this._elem.removeAttribute("data-active")}}])&&Dt(e.prototype,n),r&&Dt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Bt(t){return Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bt(t)}function $t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Bt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Bt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Bt(o)?o:String(o)),r)}var i,o}var Ht=function(){function t(e,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.src="",null!=e){var r=e.dataset;this.src=r.src||""}!this.src&&n&&(this.src=n),this.elem=e}var e,n,r;return e=t,(n=[{key:"play",value:function(){this.audioElement?this.audioElement.play():(this.audioElement=new Audio(this.src),this.audioElement.play(),this.elem||this.bindHandler())}},{key:"setSrc",value:function(t){this.audioElement&&(this.audioElement.src=t)}},{key:"bindHandler",value:function(){var t=this;this.handler=function(e){e.preventDefault(),t.play()},this.elem&&this.elem.addEventListener("click",this.handler)}},{key:"pause",value:function(){this.audioElement&&this.audioElement.pause()}},{key:"dispose",value:function(){this.audioElement=null,this.handler&&this.elem&&this.elem.removeEventListener("click",this.handler)}}])&&$t(e.prototype,n),r&&$t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ut(t){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ut(t)}function Ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Ut(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Ut(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ut(o)?o:String(o)),r)}var i,o}var Gt={en:"definition",ca:"definicio",es:"definicion"},Zt="https://www.wordreference.com/",Vt={us:"United States",uk:"United Kingdom",irish:"Irish",scot:"Scottish",jamaica:"Jamaica",es:"España",castellano:"España",ca:"Catalunya",mexico:"México",argentina:"Argentina"};function Wt(t){return Vt[t]||t}var Jt,Qt=function(t,e){return new Promise((function(n,r){if(t in Gt){var i=Zt+Gt[t]+"/"+encodeURIComponent(e);Gt[t]?$.ajax({method:"GET",dataType:"html",url:i}).done((function(e){var i=e.match(/<script>var\s+audioFiles\s+=(.*?)\]/m);if(i&&2==i.length){var o=i[1].trim().replace(/'/g,'"');o.endsWith(",")&&(o=o.substring(0,o.length-1));var a=JSON.parse(o+"]"),s=(u=t,l={},a.forEach((function(t){var e=t.split("/"),n=e[e.indexOf(u)+1].toLowerCase();l[n]||(l[n]={name:Wt(n),url:f(Zt,t)})})),l);n(s)}else{var u,l;r("cannot find audioFiles in page")}})).fail((function(t){r(t)})):r()}else r()}))},Xt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elem=e,e.classList.add("sd-speak-enabled"),this.init()}var e,n,r;return e=t,(n=[{key:"lazyLoad",value:function(t){var e,n=this;if(null==this.audioElement){var r=null===(e=this.$dropdown)||void 0===e?void 0:e.find(".dropdown-menu");Qt("en",this.elem.innerText).then((function(e){var i=Object.keys(e);if(i.length>0){var o=e[i[0]],a=f(Zt,o.url);n.audioElement=new Ht(void 0,a),i.length>1&&i.forEach((function(t){var i=e[t],o=$('<a class="dropdown-item" data-variant="'.concat(t,'" href="#">').concat(i.name,"</a>"));o.on("click",(function(t){t.preventDefault();var r=t.target.dataset.variant||"",i=e[r];n.audioElement&&(i.url,n.audioElement.setSrc(i.url),n.audioElement.play())})),r&&r.append(o)}))}else console.warn("Fallback on GTTSPlayer US"),n.elem.setAttribute("href","#speak_en-US"),n.audioElement=new Mt(n.elem);t&&n.audioElement.play()}),(function(t){n.audioElement=new Mt(n.elem),n.elem.setAttribute("href","#speak_en-US"),n.audioElement.play()}))}}},{key:"init",value:function(){var t=this,e=a();this.$dropdown=$('\n        <div class="dropdown" style="display:inline-block;">\n          <button class="btn btn-secondary btn-sm" style="margin:2px;padding:4px;height:15px;" type="button" id="dmb_'.concat(e,'" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n          <i class="fas fa fa-globe" style="transform: translateY(-9px);font-size:90%;"></i>\n          </button>\n          <div class="dropdown-menu" aria-labelledby="dmb_').concat(e,'"> \n          </div>\n        </div>')),this.$dropdown.insertAfter($(this.elem)),this.$dropdown.find("button").on("click",(function(e){t.lazyLoad()})),this.handler=function(e){e.preventDefault(),null==t.audioElement?t.lazyLoad(!0):t.play()},this.elem.addEventListener("click",this.handler)}},{key:"play",value:function(){this.audioElement&&this.audioElement.play()}},{key:"setSrc",value:function(t){this.audioElement&&(this.audioElement.src=t)}},{key:"pause",value:function(){this.audioElement&&this.audioElement.pause()}},{key:"dispose",value:function(){var t;this.pause(),this.elem.classList.remove("sd-speak-enabled"),this.handler&&(this.elem.removeEventListener("click",this.handler),this.handler=null),null===(t=this.$dropdown)||void 0===t||t.find("button").off()}}])&&Ft(e.prototype,n),r&&Ft(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Yt(t){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yt(t)}function Kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Yt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Yt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Yt(o)?o:String(o)),r)}var i,o}function te(t,e){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},te(t,e)}function ee(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=re(t);if(e){var i=re(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ne(this,n)}}function ne(t,e){if(e&&("object"===Yt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function re(t){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},re(t)}var ie=null;var oe=J({name:"speak",author:"Josep Mulet Pol",version:"2.5",query:'a[href^="#speak_"],[role="snptd_speak"],[data-snptd="speak"]',use$:!0})(Jt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&te(t,e)}(o,t);var e,n,r,i=ee(o);function o(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,t)}return e=o,(n=[{key:"init",value:function(){var t,e=this,n=this.parent.dataset;if("1"!==n.active)if(n.active="1",n.src)this.audioPlayer=new Ht(this.parent);else{if(null!==(t=this.parent.getAttribute("href"))&&void 0!==t&&t.endsWith("#speak_en-wr")){if(this.parent.innerText.trim().indexOf(" ")<0)return void(this.audioPlayer=new Xt(this.parent));console.error("WordReference only works for single words."),this.parent.setAttribute("href","#speak_en-US")}var r=null!=window.speechSynthesis&&null!=window.SpeechSynthesisUtterance;this.audioPlayer=null,r?(new Promise((function(t,e){null==ie?window.speechSynthesis.addEventListener("voiceschanged",(function(){ie=window.speechSynthesis.getVoices(),t(ie)})):t(ie)})).then((function(t){e.audioPlayer=new qt(e.parent,t)}),(function(){console.warn("Using GTTS Player instead."),e.audioPlayer=new Mt(e.parent)})),window.addEventListener("unload",(function(t){window.speechSynthesis.cancel()}))):(console.warn("Using GTTS Player instead."),this.audioPlayer=new Mt(this.parent))}}},{key:"dispose",value:function(){"1"===this.parent.dataset.active&&(this.parent.removeAttribute("data-active"),this.audioPlayer&&this.audioPlayer.dispose(),this.audioPlayer=null)}},{key:"play",value:function(){this.audioPlayer&&this.audioPlayer.play()}},{key:"setSrc",value:function(t){}},{key:"pause",value:function(){this.audioPlayer&&this.audioPlayer.pause()}}])&&Kt(e.prototype,n),r&&Kt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(F))||Jt;function ae(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[n],t[n]=r}}function se(t){t%=2147483647;var e=function(){return((t=16807*t%2147483647)-1)/2147483646};return e(),e(),e(),e}function ue(t){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ue(t)}function le(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==ue(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ue(o)?o:String(o)),r)}var i,o}var ce,fe=function(){function t(e,n,r,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pi=n,this.forceDifferent=r||[],this.workingMode=i||"urandom",this.seed=o||1,e.style.border="none",this.theTabMenu=e.querySelector("ul.nav.nav-tabs"),this.theLinks=this.theTabMenu.querySelector("li"),this.theContentOpts=e.querySelectorAll("div.tab-content > div"),this.numOpts=this.theContentOpts.length,0===this.numOpts&&(console.error("ERROR: SmartTabMenu, theContentOpts is Empty!"),this.numOpts=1)}var e,n,r;return e=t,(n=[{key:"showUser",value:function(t,e){this.pi.isTeacher?this.theTabMenu.style.display="none":this.theTabMenu.remove();for(var n=-1,r=0,i=this.forceDifferent.length;r<i;r++){for(var o=this.forceDifferent[r],a=0,s=o.length;a<s;a++)if(o[a]==e){n=a;break}if(n>=0)break}var u=0;"urandom"===this.workingMode||"lrandom"===this.workingMode?n>=0?u=n%this.numOpts:null!=t&&(u=Math.floor(t()*this.numOpts)):this.workingMode.startsWith("fixed")?this.workingMode.indexOf(":")>0&&(u=l(this.workingMode.split(":")[1].trim(),0)):console.error("ERROR: Unknown working mode ",this.workingMode,", choosing first element");for(var c=0,f=this.theContentOpts.length;c<f;c++){var d=this.theContentOpts[c],p=this.theLinks[c];c==u?(d.classList.add("active"),d.style.display="",p&&p.classList.add("active")):(d.classList.remove("active"),this.pi.isTeacher?d.style.display="none":d.remove(),p&&p.classList.remove("active"))}}},{key:"clear",value:function(){this.theTabMenu.style.display="";for(var t=0,e=this.theContentOpts.length;t<e;t++){var n=this.theContentOpts[t],r=this.theLinks[t];n.style.display="",0==t?(n.classList.add("active"),r&&(r.style.display="",r.classList.add("active"))):(n.classList.remove("active"),r&&(r.style.display="",r.classList.remove("active")))}}},{key:"dispose",value:function(){this.clear()}}])&&le(e.prototype,n),r&&le(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function de(t){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},de(t)}function pe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function he(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pe(Object(n),!0).forEach((function(e){Oe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Se(r.key),r)}}function ve(t,e){return ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ve(t,e)}function be(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=we(t);if(e){var i=we(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return me(this,n)}}function me(t,e){if(e&&("object"===de(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ge(t)}function ge(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function we(t){return we=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},we(t)}function Oe(t,e,n){return(e=Se(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Se(t){var e=function(t,e){if("object"!==de(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==de(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===de(e)?e:String(e)}var ke,xe=J({name:"talea",author:"Josep Mulet Pol",version:"2.2",use$:!1})(ce=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ve(t,e)}(o,t);var e,n,r,i=be(o);function o(t){var e;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),Oe(ge(e=i.call(this,t)),"seed",1),Oe(ge(e),"workingMode","urandom"),Oe(ge(e),"smartMenus",[]),Oe(ge(e),"mapStudents",{}),e.pi=function(){if(!document.querySelector)return{userId:1,userFullname:"",courseId:1,isTeacher:!1,courseName:"",site:""};var t=null,e=null,n=document.querySelector("[data-userid]");n&&(t=n.getAttribute("data-userid"));var r=document.getElementsByClassName("usertext");if(r&&r.length)e=r[0].innerText;else{var i=document.querySelector("div.logininfo > a");i&&(e=i.innerText)}t||(t="1",e="Usuari convidat");var o=null!=document.querySelector('.usermenu li a[href*="switchrole"]')?1:0;o||(o=null!=document.querySelector("form.editmode-switch-form")?1:0),o||(o=null!=document.querySelector(".teacherdash.nav-item.nav-link")?1:0);var a="",s="",u=document.querySelector(".homelink > a");if(null!=u)s=u.innerText,a=function(t){for(var e={},n=t.substring(1).split("&"),r=0;r<n.length;r++){var i=n[r].split("=");i[0]&&(e[i[0]]=i[1]||"true")}return e}("?"+((u.getAttribute("href")||" ? ").split("?")[1]||"")).id;else{window.M&&window.M.cfg&&(a=window.M.cfg.courseId);var c=document.querySelector("#page-navbar ol > li:first-child > a");null!=c&&(s=c.innerText)}var f=(location.href.split("?")[0]||"").replace("/mod/book/view.php","");return{userId:l(t,1),userFullname:e||"test-user",isTeacher:o>0,site:f,courseName:s||"test-course",courseId:l(a,1)}}(),e.pi.isTeacher&&t.dataset.debug){for(var n=JSON.parse(t.dataset.debug),r=Object.keys(n),a=0,s=r.length;a<s;a++){var c=r[a];e.pi[c]=n[c]}e.pi;var f=document.createElement("div");f.innerHTML="<p>DEBUG INFO::<br>  "+JSON.stringify(e.pi)+"</p>",t.append(f)}if(e.pi.userId>1)try{u((function(){var t=he({},e.pi);t.isTeacher=t.isTeacher?1:0,$.ajax({method:"POST",url:"https://piworld.es/iedibapi/p1/users/create",data:t,dataType:"json"}).done((function(t){}))}))}catch(t){console.error(t)}return e.parent=t,e}return e=o,(n=[{key:"init",value:function(){var t=this,e=this.parent.dataset;if("1"!==e.active){e.active="1",this.seed=l(e.seed||"1",1);var n=JSON.parse(e.different||"[]");this.workingMode=e.mode||"urandom";var r=this.parent.querySelectorAll("div.iedib-tabmenu:not(.talea-skip)");this.smartMenus=[];for(var i=0,o=r.length;i<o;i++)this.smartMenus.push(new fe(r[i],this.pi,n,this.workingMode,this.seed));var a=document.createElement("p");if(a.id="talea_name_"+this.parent.id,a.style.setProperty("font-weight","bold"),this.parent.prepend(a),this.pi.isTeacher){a.innerText="Sense filtre";var s=he({},this.pi);s.isTeacher=s.isTeacher?1:0,this.setupTeacher();try{u((function(){$.ajax({method:"POST",url:"https://piworld.es/iedibapi/p1/users/list",data:s,dataType:"json"}).done((function(e){var n=$("#list_controls_userid_"+t.parent.id);t.mapStudents={},t.mapStudents[-1]="Sense filtre";for(var r=0,i=e.length;r<i;r++){var o=e[r],a=l(o.userid,0);t.mapStudents[a]=o.userfullname,n.append($('<option value="'+o.userid+'">'+o.userfullname+"</option>"))}}))}))}catch(t){console.error(t)}}else a.innerText="Tasca de "+(this.pi.userFullname||"???"),this.showUser(this.pi.userId)}}},{key:"showUser",value:function(t){if(this.pi.isTeacher){var e=document.querySelector("#talea_name_"+this.parent.id);e&&this.mapStudents&&this.mapStudents[t]?e.innerHTML="Tasca de "+this.mapStudents[t]:e&&(e.innerHTML="Tasca d'usuari #"+t)}var n=null;"urandom"===this.workingMode?n=se(t*this.seed):"lrandom"===this.workingMode&&(n=se(this.seed)),this.smartMenus.forEach((function(e){return e.showUser(n,t)}))}},{key:"clear",value:function(){if(this.pi.isTeacher){var t=document.querySelector("#talea_name_"+this.parent.id);t&&(t.innerHTML="Sense filtre")}this.smartMenus.forEach((function(t){return t.clear()}))}},{key:"setupTeacher",value:function(){var t=this,e=document.createElement("div"),n=this.parent.id;e.id="talea_controls_"+n,this.parent.prepend(e);var r='<input type="text" class="form-control" placeholder="Nom o id de l\'estudiant..." list="list_controls_userid_'+n+'" id="controls_userid_'+n+'"><br>';r+='<datalist id="list_controls_userid_'+n+'">',r+='<option value="-1">Sense filtre</option>',r+="</datalist>",e.innerHTML=r;var i=document.querySelector("#controls_userid_"+n);i&&(this.controlsListener=function(){var e=l(i.value+"",-2);-2!==e&&(e<0?t.clear():t.showUser(e))},i.addEventListener("change",this.controlsListener))}},{key:"dispose",value:function(){if("1"===this.parent.dataset.active){this.clear();var t=this.parent.id,e=document.querySelector("#talea_name_"+t);if(e&&e.remove(),this.controlsListener){var n=document.querySelector("#controls_userid_"+t);n&&n.removeEventListener("change",this.controlsListener),this.controlsListener=void 0}var r=document.querySelector("#talea_controls_"+t);r&&r.remove(),this.parent.removeAttribute("data-active")}}}])&&ye(e.prototype,n),r&&ye(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(F))||ce,Pe={ca:{check:"Comprova",chooseone:"Tria una opció",right:"Ben fet!",wrong:"Ho sento. Intentau-ho de nou",error:"Hi ha hagut un error processant la resposta",random_msg:"Aquestes activitats contenen preguntes aleatòries que es generen cada vegada que es carrega la pàgina."},es:{check:"Comprueba",chooseone:"Elige una opción",right:"¡Bien hecho!",wrong:"Lo siento. Inténtalo de nuevo.",error:"Ha habido un error procesando la respuesta",random_msg:"Estas actividades contienen preguntas aleatorias que se generan cada vez que se carga la página."},en:{check:"Check",chooseone:"Choose one",right:"Well done!",wrong:"Try it again.",error:"There has been an error processing the answer",random_msg:"These activities contain random questions that are generated at every page load."},fr:{check:"Vérifier",chooseone:"Choisis une option",right:"¡Bien hecho!",wrong:"Lo siento. Inténtalo de nuevo.",error:"Ha habido un error procesando la respuesta",random_msg:"Estas actividades contienen preguntas aleatorias que se generan cada vez que se carga la página."},de:{check:"Prüfen",chooseone:"Wähle eine option",right:"¡Bien hecho!",wrong:"Lo siento. Inténtalo de nuevo.",error:"Ha habido un error procesando la respuesta",random_msg:"Estas actividades contienen preguntas aleatorias que se generan cada vez que se carga la página."}};function Ee(t,e){var n=Pe[t];return n||(n=Pe.ca),n[e]||e}function je(t){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je(t)}function _e(t){return function(t){if(Array.isArray(t))return Ce(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Ce(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ce(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Te(t){var e=[];return t.split(".").forEach((function(t){var n=t.split("["),r=n[0].trim();r.length&&(e.push(r),n.length>1&&e.push("["+n[1].trim()))})),e}function Le(t,e){if(0===t.length)return null;if(1===t.length)return e;for(var n=e,r=0,i=t.length-1;null!=n&&r<i;){var o=t[r];if(o.indexOf("[")>=0){var a=parseInt(o.replace(/[[\]]/g,""));if(Array.isArray(n)){var s=n;a<s.length?n=s[a]:(console.error("Index out of bounds ",t.join(""),a,s),n=null)}else console.error("Not an array",t.join(""),n),n=null}else{var u=n;n=null!=u[o]?u[o]:null}r++}return n}function Ae(t,e,n){var r=Le(t,e),i=!1;if(null!=r){var o=t[t.length-1];if(o.indexOf("[")>=0){if(Array.isArray(r)){var a=r,s=parseInt(o.replace(/[[\]]/g,""));s<a.length&&(a[s]=n,i=!0)}}else if("object"===je(r))r[o]=n,i=!0}return i}function Re(t){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Re(t)}function Ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Re(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Re(o)?o:String(o)),r)}var i,o}!function(t){t[t.CLOSE=0]="CLOSE",t[t.CANCEL_ACCEPT=1]="CANCEL_ACCEPT",t[t.CANCEL_ACCEPT_FORM=2]="CANCEL_ACCEPT_FORM",t[t.CANCEL_ACCEPT_FORM_VALIDATION=3]="CANCEL_ACCEPT_FORM_VALIDATION"}(ke||(ke={}));var Me=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Diàleg";Ie(this,t),this.type=n;var i=n===ke.CANCEL_ACCEPT_FORM||n===ke.CANCEL_ACCEPT_FORM_VALIDATION;this.hasValidation=n===ke.CANCEL_ACCEPT_FORM_VALIDATION;var o="",a="";i&&(o="<form".concat(this.hasValidation?' class="needs-validation" novalidate':"",">"),a="</form>");var s='<button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">'.concat(n===ke.CLOSE?"Tancar":"Cancel·lar","</button>");n!==ke.CLOSE&&(s+='<button type="'.concat(i?"submit":"button",'" class="btn btn-sm btn-primary">Acceptar</button>')),this.elem=$('\n            <div class="modal fade moodle-dialogue" id="'.concat(e,'" tabindex="-1" aria-labelledby="bsdialog" aria-hidden="true">\n            <div class="modal-dialog">\n                <div class="modal-content">\n                  <div class="modal-header">\n                    <h5 class="modal-title">').concat(r,'</h5>\n                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                      <span aria-hidden="true">&times;</span>\n                    </button>\n                  </div>\n                  ').concat(o,'\n                  <div class="modal-body" style="max-height:400px;overflow-y:auto;font-size:90%;">\n                  </div>\n                  <div class="modal-footer">\n                    ').concat(s,"\n                  </div>\n                  ").concat(a,"\n                </div>\n                </div>")),this.body=this.elem.find("div.modal-body"),this.header=this.elem.find("h5.modal-title"),this.primaryButton=this.elem.find("button.btn.btn-primary"),this.form=this.elem.find("form"),this.validationDiv=this.elem.find("div.alert.alert-danger"),$("body").append(this.elem)}var e,n,r;return e=t,(n=[{key:"resetDialog",value:function(){this.body.html(""),this.primaryButton&&this.primaryButton.off(),this.form&&this.form.off(),this.validationDiv.css("display","none"),this.validationDiv.html("")}},{key:"setBody",value:function(t){var e=this;this.resetDialog();var n=$(t);this.validationDiv=$('<div class="alert alert-danger" style="display:none;max-height:100px;overflow-y:auto;"></div>'),this.body.append(this.validationDiv),this.body.append(n),this.primaryButton&&(this.form?this.form.on("submit",(function(t){if(t.preventDefault(),t.stopPropagation(),e.hasValidation){e.form.addClass("was-validated"),e.updateValues();var n=e.customValidation();if(n&&null!=e.validationDiv)return e.validationDiv.css("display",""),e.validationDiv.html(n),void(e.validationDiv.offset()&&e.body.animate({scrollTop:0}));e.form[0].checkValidity()&&(e.elem.modal("hide"),e.acceptCb&&e.acceptCb(e.scope))}else e.updateValues(),e.acceptCb&&e.acceptCb(e.scope)})):this.primaryButton.on("click",(function(t){t.preventDefault(),e.acceptCb&&e.acceptCb(),e.elem.modal("hide")})))}},{key:"setValues",value:function(t){this.scope=t,this.body.find("input[id], textarea[id], select[id]").each((function(e,n){var r=(n.getAttribute("id")||"").split("_");if(!(r.length<2)){var i=function(t,e){var n=Le([].concat(_e(t),[""]),e);return null!=n?["string","boolean","number"].includes(je(n))?n+"":JSON.stringify(n):null}(Te(r[r.length-1]),t);if("TEXTAREA"===n.nodeName)n.value=i||"";else{var o=n,a=(o.getAttribute("type")||"").toLowerCase();"radio"===a||"checkbox"===a?o.checked="true"===i:o.value=i||""}}}))}},{key:"updateValues",value:function(){var t=this;null!=this.scope&&this.body.find("input[id], textarea[id], select[id]").each((function(e,n){var r=(n.getAttribute("id")||"").split("_");if(!(r.length<2)){var i=Te(r[r.length-1]);if("TEXTAREA"===n.nodeName){var o=n.value||"";Ae(i,t.scope,o)}else{var a=n,s=(a.getAttribute("type")||"").toLowerCase(),u="radio"===s||"checkbox"===s;Ae(i,t.scope,u?a.checked:a.value)}}}))}},{key:"setBodyBindings",value:function(t,e){var n=c("div",{style:"width:100%;padding:10px",html:t});this.setBody(n),this.setValues(e)}},{key:"customValidation",value:function(){return null}},{key:"setTitle",value:function(t){this.header.html(t)}},{key:"show",value:function(t){var e=this;this.form.removeClass("was-validated"),this.elem.modal("show"),window.setTimeout((function(){return e.body.scrollTop(0)}),400),this.acceptCb=t}}])&&ze(e.prototype,n),r&&ze(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ne(t){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ne(t)}function De(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Ne(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ne(o)?o:String(o)),r)}var i,o}function qe(t,e){return qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qe(t,e)}function Be(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=He(t);if(e){var i=He(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $e(this,n)}}function $e(t,e){if(e&&("object"===Ne(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function He(t){return He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},He(t)}var Ue,Fe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qe(t,e)}(o,t);var e,n,r,i=Be(o);function o(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,t,ke.CLOSE,"")}return e=o,n&&De(e.prototype,n),r&&De(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(Me),Ge={};function Ze(t,e){var n=Ge[t];return n||(n=new Fe(t),Ge[t]=n),n.setTitle(e),n}function Ve(t){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ve(t)}function We(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Qe(r.key),r)}}function Je(t,e,n){return(e=Qe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qe(t){var e=function(t,e){if("object"!==Ve(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ve(e)?e:String(e)}!function(t){t[t.UNTOUCHED=0]="UNTOUCHED",t[t.PENDING=1]="PENDING",t[t.ERROR=2]="ERROR",t[t.WRONG=3]="WRONG",t[t.RIGHT=4]="RIGHT"}(Ue||(Ue={}));var Xe=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Je(this,"status",Ue.UNTOUCHED),Je(this,"lang","ca"),this.spanStatus=document.createElement("span"),this.spanStatus.setAttribute("data-toggle","tooltip"),this.spanHint=c("span",{dataToggle:"tooltip",class:"ib-quizz-hint",title:"Mostrar pista",style:"display:none;",html:'<i class="'.concat("fa fas fa-life-ring",'"></i>')}),this.feedbackSpan=c("span",{class:"ib-quizz-feedback",dataToggle:"tooltip",title:"Mostrar solució",style:"display:none;",html:'<i class="'.concat("fa fas fa-question",'"></i>')}),this.divBlock=c("div",{style:"display:inline-block;"}),this.divBlock.append(this.spanStatus),this.divBlock.append(this.spanHint),this.divBlock.append(this.feedbackSpan)}var e,n,r;return e=t,(n=[{key:"setStatus",value:function(t,e){this.status=t;var n=this.spanStatus.classList,r=e;switch(t){case Ue.UNTOUCHED:case Ue.PENDING:n.remove("ib-quizz-right","ib-quizz-wrong","ib-quizz-error"),this.spanStatus.innerHTML="";break;case Ue.RIGHT:n.add("ib-quizz-right"),r||(r=Ee(this.lang,"right")),this.spanStatus.innerHTML='<i class="'.concat("fa fas fa-check",'"></i>');break;case Ue.WRONG:n.add("ib-quizz-wrong"),r||(r=Ee(this.lang,"wrong")),this.spanStatus.innerHTML='<i class="'.concat("fa fas fa-times",'"></i>');break;default:n.add("ib-quizz-error"),r||(r=Ee(this.lang,"error")),this.spanStatus.innerHTML='<i class="'.concat("fa fas fa-exclamation",'"></i>')}r&&this.spanStatus.setAttribute("title",r)}},{key:"getStatus",value:function(){return this.status}},{key:"setLang",value:function(t){this.lang=t}},{key:"setHint",value:function(t){this.spanHint.addEventListener("click",(function(){var e=Ze("ib-quizz-modal-dlg","Una pista..."),n=c("div",{html:t});e.setBody(n),e.show()})),this.spanHint.style.setProperty("display","")}},{key:"setFeedback",value:function(t){this.feedbackSpan.addEventListener("click",(function(){var e=Ze("ib-quizz-modal-dlg","Retroacció"),n=c("div",{html:t});e.setBody(n),e.show()})),this.spanHint.style.setProperty("display","none"),this.feedbackSpan.style.setProperty("display","")}},{key:"getElement",value:function(){return this.divBlock}}])&&We(e.prototype,n),r&&We(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ye(t,e,n){return Ye=Ke()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&tn(i,n.prototype),i},Ye.apply(null,arguments)}function Ke(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function tn(t,e){return tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tn(t,e)}var en={};function nn(t,e,n){return window.nerdamer&&!en.N&&Object.defineProperty(en,"N",{value:window.nerdamer,enumerable:!0,configurable:!1,writable:!1}),window.mathjs&&!en.M&&Object.defineProperty(en,"M",{value:window.mathjs,enumerable:!0,configurable:!1,writable:!1}),e=Object.assign(e||{},en),function(t,e,n){e=e||{},n=n||{};var r=Object.keys(e),i=Object.values(e);return Ye(Function,r.concat(['"use strict"\n'+t])).apply(n,i)}("var _this=this;\n"+t.replace(/#/g,"_this."),e,n)}function rn(t){return t?t.replace(/V\[(\d+)\]/g,(function(t,e){var n=parseInt(e);return"\\left("+new Array(n).fill("\\MathQuillMathField{}").join(",")+"\\right)"})).replace(/M\[(\d+)x(\d+)\]/g,(function(t,e,n){var r=parseInt(e),i=parseInt(n),o=new Array(r).fill("\\MathQuillMathField{}").join(" & ");return"\\begin{pmatrix}"+new Array(i).fill(o).join(" \\\\ ")+"\\end{pmatrix}"})).replace(/\?/g,"\\MathQuillMathField{ }"):t}function on(t,e){if(!e)return t;var n=t.replace(/#([a-zA-Z0-9_]+)($|[ .,"'])/gm,(function(t,n,r){return null!=e[n]?e[n]+(r||""):t}));return n=n.replace(/\${2}(.*)?\${2}/gm,(function(t,e){return"\\["+e+"\\]"})).replace(/\$(.*)?\$/gm,(function(t,e){return"\\("+e+"\\)"}))}function an(t){return an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},an(t)}function sn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bn(r.key),r)}}function ln(t,e){if(e&&("object"===an(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return cn(t)}function cn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fn(t){var e="function"==typeof Map?new Map:void 0;return fn=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return dn(t,arguments,yn(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),hn(r,t)},fn(t)}function dn(t,e,n){return dn=pn()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&hn(i,n.prototype),i},dn.apply(null,arguments)}function pn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function hn(t,e){return hn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hn(t,e)}function yn(t){return yn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yn(t)}function vn(t,e,n){return(e=bn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bn(t){var e=function(t,e){if("object"!==an(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==an(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===an(e)?e:String(e)}Object.getOwnPropertyNames(Math).forEach((function(t){en[t]=Math[t]})),Object.defineProperty(en,"alea",{value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.length;if(0===r)return Math.random()<.5?-1:1;if(1===r){if(Array.isArray(e[0])){var i=Math.floor(Math.random()*e[0].length);return e[0][i]}if("number"==typeof e[0])return Math.floor(2*e[0]*Math.random())+e[0]}else if(r>=2){var o=e[0],a=e[1],s=1,u=0,l=(a-o)*Math.random();return 3===r&&(u=(u=Math.abs(e[2]))>8?8:u,s=Math.pow(10,u)),l=+(Math.round(l*s)/s+o).toFixed(u)}},enumerable:!0,configurable:!1,writable:!1}),Object.defineProperty(en,"dec",{value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Math.pow(10,e);return Math.round(t*n)/n},enumerable:!0,configurable:!1,writable:!1});var mn,gn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hn(t,e)}(s,t);var e,n,r,i,o,a=(e=s,n=pn(),function(){var t,r=yn(e);if(n){var i=yn(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return ln(this,t)});function s(){var t;sn(this,s);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return vn(cn(t=a.call.apply(a,[this].concat(n))),"lang","ca"),vn(cn(t),"_syncCount",0),vn(cn(t),"attempts",0),vn(cn(t),"hintSet",!1),vn(cn(t),"feedbackSet",!1),t}return r=s,(i=[{key:"init",value:function(t){if(t){var e=document.createElement("span");e.innerHTML=t,this.prepend(e)}}},{key:"connectedCallback",value:function(){this.innerHTML="",this.classList.add("d-print-none"),this.statusDisplay=new Xe;try{this.widgetConfig=p(this.dataset.src)}catch(t){return void console.error(t)}this.widgetConfig,this._syncCount++,3===this._syncCount&&this.render()}},{key:"reflowLatex",value:function(){window.MathJax&&(window.MathJax.typesetPromise&&window.MathJax.typesetPromise(),window.MathJax.Hub&&window.MathJax.Hub.Queue&&window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub]))}},{key:"setLang",value:function(t){var e;this.lang=t,null===(e=this.statusDisplay)||void 0===e||e.setLang(t),this._syncCount++,3===this._syncCount&&this.render()}},{key:"setGroupContext",value:function(t){var e,n,r,i;this.groupContext=t,this.groupContext,this._syncCount++,Object.keys(t._s).length&&(null!==(e=this.widgetConfig)&&void 0!==e&&e.hint&&(this.widgetConfig.hint=on(this.widgetConfig.hint,t._s)),null!==(n=this.widgetConfig)&&void 0!==n&&n.fbk&&(this.widgetConfig.fbk=on(this.widgetConfig.fbk,t._s)),null!==(r=this.widgetConfig)&&void 0!==r&&r.ini&&(this.widgetConfig.ini=on(this.widgetConfig.ini,t._s)),null!==(i=this.widgetConfig)&&void 0!==i&&i.pre&&(this.widgetConfig.pre=on(this.widgetConfig.pre,t._s))),3===this._syncCount&&this.render()}},{key:"setStatus",value:function(t,e){var n;null===(n=this.statusDisplay)||void 0===n||n.setStatus(t,e)}},{key:"incAttempts",value:function(){var t,e,n,r;this.attempts++;var i,o,a,s,u=(null===(t=this.groupContext)||void 0===t?void 0:t.o.hint)||0,l=(null===(e=this.groupContext)||void 0===e?void 0:e.o.ans)||0;!this.hintSet&&u>0&&this.attempts>=u&&null!==(n=this.widgetConfig)&&void 0!==n&&n.hint&&(this.hintSet=!0,null===(i=this.statusDisplay)||void 0===i||i.setHint(null===(o=this.widgetConfig)||void 0===o?void 0:o.hint)),!this.feedbackSet&&l>0&&this.attempts>=l&&null!==(r=this.widgetConfig)&&void 0!==r&&r.fbk&&(this.feedbackSet=!0,null===(a=this.statusDisplay)||void 0===a||a.setFeedback(null===(s=this.widgetConfig)||void 0===s?void 0:s.fbk))}},{key:"showFeedback",value:function(){var t,e,n;!this.feedbackSet&&null!==(t=this.widgetConfig)&&void 0!==t&&t.fbk&&(this.feedbackSet=!0,null===(e=this.statusDisplay)||void 0===e||e.setFeedback(null===(n=this.widgetConfig)||void 0===n?void 0:n.fbk))}}])&&un(r.prototype,i),o&&un(r,o),Object.defineProperty(r,"prototype",{writable:!1}),s}(fn(HTMLElement));function wn(t){return wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wn(t)}function On(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ln(r.key),r)}}function kn(){return kn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=xn(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},kn.apply(this,arguments)}function xn(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Cn(t)););return t}function Pn(t,e){return Pn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pn(t,e)}function En(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Cn(t);if(e){var i=Cn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return jn(this,n)}}function jn(t,e){if(e&&("object"===wn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _n(t)}function _n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cn(t){return Cn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Cn(t)}function Tn(t,e,n){return(e=Ln(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ln(t){var e=function(t,e){if("object"!==wn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==wn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===wn(e)?e:String(e)}var An;Q({elementName:"ib-quizz-dropdown",classes:["ib-quizz-elem"],styles:{display:"inline-block"}})(mn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pn(t,e)}(o,t);var e,n,r,i=En(o);function o(){var t;On(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Tn(_n(t=i.call.apply(i,[this].concat(n))),"userAns",-1),t}return e=o,(n=[{key:"enable",value:function(t){this.button&&(this.button.disabled=!t)}},{key:"getUserInput",value:function(){return this.userAns+""}},{key:"displayRightAnswer",value:function(){this.enable(!1)}},{key:"check",value:function(){var t,e,n;if((null===(t=this.statusDisplay)||void 0===t?void 0:t.getStatus())===Ue.RIGHT)return!0;if((null===(e=this.statusDisplay)||void 0===e?void 0:e.getStatus())!==Ue.PENDING)return!1;var r=(null===(n=this.widgetConfig)||void 0===n?void 0:n.ans)===this.userAns+"";return this.setStatus(r?Ue.RIGHT:Ue.WRONG),this.enable(!r),r?this.showFeedback():this.incAttempts(),r}},{key:"setLang",value:function(t){kn(Cn(o.prototype),"setLang",this).call(this,t),this.button&&(this.button.innerHTML=Ee(t,"chooseone"))}},{key:"render",value:function(){var t,e,n,r,i=this;if(this.widgetConfig){var a=((null===(t=this.widgetConfig)||void 0===t?void 0:t.vars)||[]).filter((function(t){return(t+"").trim().length>0}));if(null!==(e=this.groupContext)&&void 0!==e&&e.s.length&&a.forEach((function(t,e){var n;t.indexOf("#")<0||(a[e]=on(t,null===(n=i.groupContext)||void 0===n?void 0:n._s))})),this.dropdown=c("div",{class:"dropdown",style:"display:inline-block;"}),this.widgetConfig,this.widgetConfig){this.button=c("button",{class:"btn btn-outline-primary dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",html:Ee(this.lang,"chooseone")}),this.options=c("div",{class:"dropdown-menu","aria-labelledby":"dropdownMenuButton"});for(var s=a.length||0,u=new Array(s),l=0;l<s;l++)u[l]=l;null!==(n=this.widgetConfig)&&void 0!==n&&null!==(r=n.opts)&&void 0!==r&&r.shuffle&&ae(u),u.forEach((function(t){var e,n=a[t],r=c("a",{class:"dropdown-item",href:"#","data-index":t+"",html:n});r.addEventListener("click",(function(e){i.userAns=t,e.preventDefault(),i.button&&(i.button.innerHTML=n),n.indexOf("\\(")>=0&&i.reflowLatex(),i.setStatus(Ue.PENDING)})),null===(e=i.options)||void 0===e||e.append(r)})),this.dropdown.append(this.button),this.dropdown.append(this.options),kn(Cn(o.prototype),"init",this).call(this,this.widgetConfig.pre),this.append(this.dropdown),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}}else console.error("The widgetConfig is not set")}}])&&Sn(e.prototype,n),r&&Sn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(gn));function Rn(t){return Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rn(t)}function In(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fn(r.key),r)}}function Mn(){return Mn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Nn(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Mn.apply(this,arguments)}function Nn(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Hn(t)););return t}function Dn(t,e){return Dn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Dn(t,e)}function qn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Hn(t);if(e){var i=Hn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Bn(this,n)}}function Bn(t,e){if(e&&("object"===Rn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return $n(t)}function $n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hn(t){return Hn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Hn(t)}function Un(t,e,n){return(e=Fn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fn(t){var e=function(t,e){if("object"!==Rn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Rn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Rn(e)?e:String(e)}function Gn(t){return function(t){if(Array.isArray(t))return Zn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Zn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Vn;Q({elementName:"ib-quizz-mchoice",classes:["iedib-quizz-widget"],styles:{display:"flex","align-items":"center"}})(An=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dn(t,e)}(o,t);var e,n,r,i=qn(o);function o(){var t;In(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Un($n(t=i.call.apply(i,[this].concat(n))),"radios",[]),Un($n(t),"userAnsSet",new Set),t}return e=o,(n=[{key:"enable",value:function(t){var e;null===(e=this.radios)||void 0===e||e.forEach((function(e){var n,r;t?(e.disabled=!1,null===(n=e.parentElement)||void 0===n||n.classList.remove("disabled")):(e.disabled=!0,null===(r=e.parentElement)||void 0===r||r.classList.add("disabled"))}))}},{key:"getUserInput",value:function(){return Gn(this.userAnsSet).join(",")}},{key:"displayRightAnswer",value:function(){this.enable(!1)}},{key:"check",value:function(){var t,e,n;if((null===(t=this.statusDisplay)||void 0===t?void 0:t.getStatus())===Ue.RIGHT)return!0;if((null===(e=this.statusDisplay)||void 0===e?void 0:e.getStatus())!==Ue.PENDING)return!1;var r,i,o,a=((null===(n=this.widgetConfig)||void 0===n?void 0:n.ans)||"").split(",").map((function(t){return t.trim()})),s=new Set(a),u=(r=this.userAnsSet,i=s,(o=new Set([].concat(Gn(r),Gn(i)))).size==r.size&&o.size==i.size);return this.setStatus(u?Ue.RIGHT:Ue.WRONG),this.enable(!u),u?this.showFeedback():this.incAttempts(),u}},{key:"render",value:function(){var t,e,n,r,i,s=this;if(this.groupContext,this.widgetConfig,this.widgetConfig){var u=((null===(t=this.widgetConfig)||void 0===t?void 0:t.vars)||[]).filter((function(t){return(t+"").trim().length>0}));null!==(e=this.groupContext)&&void 0!==e&&e.s.length&&u.forEach((function(t,e){var n;t.indexOf("#")<0||(u[e]=on(t,null===(n=s.groupContext)||void 0===n?void 0:n._s))})),this.form=document.createElement("form"),this.form.style.setProperty("display","inline-block");for(var l=(null===(n=this.widgetConfig)||void 0===n?void 0:n.ans.indexOf(","))>0,f=u.length||0,d=new Array(f),p=0;p<f;p++)d[p]=p;null!==(r=this.widgetConfig)&&void 0!==r&&null!==(i=r.opts)&&void 0!==i&&i.shuffle&&ae(d);var h=a();d.forEach((function(t){var e,n=u[t],r=c("div",{class:"form-check"});null===(e=s.form)||void 0===e||e.append(r);var i=c("input",{class:"form-check-input",type:l?"checkbox":"radio",name:h,id:h+"_"+t}),o=c("label",{class:"form-check-label",for:h+"_"+t,html:n});r.appendChild(i),r.appendChild(o),s.radios.push(i),i.addEventListener("click",(function(e){l?i.checked?s.userAnsSet.add(t+""):s.userAnsSet.delete(t+""):s.userAnsSet=new Set([t+""]),s.setStatus(Ue.PENDING)}))})),Mn(Hn(o.prototype),"init",this).call(this,this.widgetConfig.pre),this.append(this.form),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}}}])&&zn(e.prototype,n),r&&zn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(gn));function Wn(t){return Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wn(t)}function Jn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,or(r.key),r)}}function Xn(){return Xn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Yn(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Xn.apply(this,arguments)}function Yn(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rr(t)););return t}function Kn(t,e){return Kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Kn(t,e)}function tr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=rr(t);if(e){var i=rr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return er(this,n)}}function er(t,e){if(e&&("object"===Wn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return nr(t)}function nr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rr(t){return rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rr(t)}function ir(t,e,n){return(e=or(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function or(t){var e=function(t,e){if("object"!==Wn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Wn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Wn(e)?e:String(e)}var ar;Q({elementName:"ib-quizz-numeric",classes:["iedib-quizz-widget"],styles:{display:"inline-block"}})(Vn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kn(t,e)}(o,t);var e,n,r,i=tr(o);function o(){var t;Jn(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ir(nr(t=i.call.apply(i,[this].concat(n))),"userAns",-1),t}return e=o,(n=[{key:"enable",value:function(t){this.input&&(this.input.disabled=!t)}},{key:"getUserInput",value:function(){var t;return(null===(t=this.input)||void 0===t?void 0:t.value)||""}},{key:"displayRightAnswer",value:function(){var t;this.input&&(this.input.value=(null===(t=this.widgetConfig)||void 0===t?void 0:t.ans)||"",this.enable(!1))}},{key:"check",value:function(){var t,e;if((null===(t=this.statusDisplay)||void 0===t?void 0:t.getStatus())===Ue.RIGHT)return!0;if((null===(e=this.statusDisplay)||void 0===e?void 0:e.getStatus())!==Ue.PENDING)return!1;var n=!1;try{var r,i,o=parseFloat(this.getUserInput()),a=parseFloat((null===(r=this.widgetConfig)||void 0===r?void 0:r.ans)||"0");if(isNaN(o)||isNaN(a))return console.error("ERROR",this.getUserInput(),null===(i=this.widgetConfig)||void 0===i?void 0:i.ans),this.setStatus(Ue.ERROR),!1;var s,u,l,c,f=(null===(s=this.widgetConfig)||void 0===s||null===(u=s.opts)||void 0===u?void 0:u.err)||0,d=(null===(l=this.widgetConfig)||void 0===l||null===(c=l.opts)||void 0===c?void 0:c.errunit)||"absolute";"%"===d&&(f*=.01),0===a&&(d="absolute"),n="absolute"===d?Math.abs(o-a)<=f:Math.abs(o/a-1)<=f}catch(t){return console.error(t),this.setStatus(Ue.ERROR),!1}return this.setStatus(n?Ue.RIGHT:Ue.WRONG),this.getUserInput(),this.enable(!n),n?this.showFeedback():this.incAttempts(),n}},{key:"render",value:function(){var t,e=this;if(this.widgetConfig){if(null!==(t=this.groupContext)&&void 0!==t&&t.s.length&&this.widgetConfig){var n=this.widgetConfig.ans||"";n.indexOf("#")>=0&&(n=n.replace(/#/g,""),this.widgetConfig.ans=""+d(this.groupContext._s||{},n))}this.input=c("input",{class:"form-control",type:"number",style:"display:inline-block;width:100px;"}),this.input.addEventListener("change",(function(t){e.setStatus(Ue.PENDING)})),Xn(rr(o.prototype),"init",this).call(this,this.widgetConfig.pre),this.append(this.input),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}}}])&&Qn(e.prototype,n),r&&Qn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(gn));function sr(t){return sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sr(t)}function ur(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==sr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==sr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===sr(o)?o:String(o)),r)}var i,o}function cr(){return cr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=fr(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},cr.apply(this,arguments)}function fr(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yr(t)););return t}function dr(t,e){return dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dr(t,e)}function pr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yr(t);if(e){var i=yr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return hr(this,n)}}function hr(t,e){if(e&&("object"===sr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function yr(t){return yr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yr(t)}var vr;Q({elementName:"ib-quizz-cloze",classes:["iedib-quizz-widget"],styles:{display:"inline-block"}})(ar=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dr(t,e)}(o,t);var e,n,r,i=pr(o);function o(){return ur(this,o),i.apply(this,arguments)}return e=o,(n=[{key:"enable",value:function(t){for(var e,n=(null===(e=this.mathInput)||void 0===e?void 0:e.innerFields)||[],r=0,i=n.length;r<i;r++)n[r].__controller.editable=t}},{key:"getUserInput",value:function(){return JSON.stringify(this.getUserInputArray())}},{key:"getUserInputArray",value:function(){var t,e,n=[];null===(t=this.mathInput)||void 0===t||t.innerFields;for(var r=(null===(e=this.mathInput)||void 0===e?void 0:e.innerFields)||[],i=0,o=r.length;i<o;i++)n.push((r[i].latex()||"").replace(/\\\s/g,"").trim());return n}},{key:"displayRightAnswer",value:function(){if(this.mathInput){for(var t,e=JSON.parse((null===(t=this.widgetConfig)||void 0===t?void 0:t.ans)||"[]"),n=this.mathInput.innerFields||[],r=0,i=n.length;r<i;r++)r<e.length&&e.push(n[r].latex(e[r]));this.enable(!1)}}},{key:"check",value:function(){var t,e;if((null===(t=this.statusDisplay)||void 0===t?void 0:t.getStatus())===Ue.RIGHT)return!0;if((null===(e=this.statusDisplay)||void 0===e?void 0:e.getStatus())!==Ue.PENDING)return!1;var n=!1;try{var r;if(null!==(r=this.widgetConfig)&&void 0!==r&&r.cfn){var i,o,a,s={u:this.getUserInputArray()};Object.assign(s,null===(i=this.groupContext)||void 0===i?void 0:i._s),s.u.forEach((function(t,e){return s["u"+e]=t}));var u=((null===(o=this.widgetConfig)||void 0===o?void 0:o.cfn)||"return true").replace(/#/g,"");n=nn(u,s,(null===(a=this.groupContext)||void 0===a?void 0:a._s)||{})}else{var l,c=(null===(l=this.widgetConfig)||void 0===l?void 0:l.ans)||"[]";"string"==typeof c&&(c=JSON.parse(c));var f=this.getUserInputArray();n=!0;for(var d=0,p=f.length;d<p;d++)n=d<c.length&&n&&c[d]==(f[d]||"").trim()}}catch(t){return console.error(t),this.setStatus(Ue.ERROR),!1}return this.setStatus(n?Ue.RIGHT:Ue.WRONG),this.getUserInput(),this.enable(!n),n?this.showFeedback():this.incAttempts(),n}},{key:"render",value:function(){var t,e=this;if(this.widgetConfig)if(this.widgetConfig,window.MathQuill){if(null!==(t=this.groupContext)&&void 0!==t&&t.s.length&&this.widgetConfig){var n=this.widgetConfig.ans||"";n.indexOf("#")>=0&&(n=n.replace(/#/g,""),this.widgetConfig.ans=""+d(this.groupContext._s||{},n))}this.input=document.createElement("span"),this.input.innerText=rn(this.widgetConfig.ini||"?"),this.input.innerText,this.append(this.input);var r=window.MathQuill.getInterface(2);this.mathInput=r.StaticMath(this.input),this.mathInput.innerFields.forEach((function(t){t.__controller.textarea.on("keyup",(function(t){t.preventDefault(),e.setStatus(Ue.PENDING)}))})),cr(yr(o.prototype),"init",this).call(this,this.widgetConfig.pre),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}else console.error("MathQuill not found on page")}}])&&lr(e.prototype,n),r&&lr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(gn));function br(t){return br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},br(t)}function mr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==br(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==br(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===br(o)?o:String(o)),r)}var i,o}function wr(){return wr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Or(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},wr.apply(this,arguments)}function Or(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pr(t)););return t}function Sr(t,e){return Sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Sr(t,e)}function kr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Pr(t);if(e){var i=Pr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xr(this,n)}}function xr(t,e){if(e&&("object"===br(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Pr(t){return Pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pr(t)}var Er;Q({elementName:"ib-quizz-mathquill",classes:["iedib-quizz-widget"],styles:{display:"inline-block"}})(vr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sr(t,e)}(o,t);var e,n,r,i=kr(o);function o(){return mr(this,o),i.apply(this,arguments)}return e=o,(n=[{key:"enable",value:function(t){this.mathInput}},{key:"getUserInput",value:function(){var t;return(null===(t=this.mathInput)||void 0===t?void 0:t.latex())||""}},{key:"displayRightAnswer",value:function(){if(this.mathInput){var t,e=(null===(t=this.widgetConfig)||void 0===t?void 0:t.ans)||"";this.mathInput.latex(e),this.enable(!1)}}},{key:"check",value:function(){var t,e;if((null===(t=this.statusDisplay)||void 0===t?void 0:t.getStatus())===Ue.RIGHT)return!0;if((null===(e=this.statusDisplay)||void 0===e?void 0:e.getStatus())!==Ue.PENDING)return!1;var n=!1;try{var r;if(null!==(r=this.widgetConfig)&&void 0!==r&&r.cfn){var i,o,a,s={u:this.getUserInput()};Object.assign(s,null===(i=this.groupContext)||void 0===i?void 0:i._s);var u=((null===(o=this.widgetConfig)||void 0===o?void 0:o.cfn)||"return true").replace(/#/g,"");n=nn(u,s,(null===(a=this.groupContext)||void 0===a?void 0:a._s)||{})}else{if(!window.nerdamer)throw new Error("Check funcion must be set");window.nerdamer.fromLatex(this.getUserInput())}}catch(t){return console.error(t),this.setStatus(Ue.ERROR),!1}return this.setStatus(n?Ue.RIGHT:Ue.WRONG),this.getUserInput(),this.enable(!n),n?this.showFeedback():this.incAttempts(),n}},{key:"render",value:function(){var t,e=this;if(this.widgetConfig)if(this.widgetConfig,window.MathQuill){if(null!==(t=this.groupContext)&&void 0!==t&&t.s.length&&this.widgetConfig){var n=this.widgetConfig.ans||"";n.indexOf("#")>=0&&(n=n.replace(/#/g,""),this.widgetConfig.ans=""+d(this.groupContext._s||{},n))}this.input=document.createElement("span"),this.input.innerText=rn(this.widgetConfig.ini||""),this.input.innerText,this.append(this.input);var r=window.MathQuill.getInterface(2);this.mathInput=r.MathField(this.input,{}),this.mathInput.__controller.textarea.on("keyup",(function(t){t.preventDefault(),e.setStatus(Ue.PENDING)})),wr(Pr(o.prototype),"init",this).call(this,this.widgetConfig.pre),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}else console.error("MathQuill not found on page")}}])&&gr(e.prototype,n),r&&gr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(gn));function jr(t){return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jr(t)}function _r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ir(r.key),r)}}function Cr(t,e){return Cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Cr(t,e)}function Tr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Rr(t);if(e){var i=Rr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Lr(this,n)}}function Lr(t,e){if(e&&("object"===jr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ar(t)}function Ar(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rr(t){return Rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rr(t)}function Ir(t){var e=function(t,e){if("object"!==jr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==jr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===jr(e)?e:String(e)}y([gt,ct,At,oe,xe,J({name:"quizz",author:"Josep Mulet Pol",version:"1.0",query:"[data-quizz-group]",use$:!0})(Er=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cr(t,e)}(o,t);var e,n,r,i=Tr(o);function o(t){var e,n,r,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),e=i.call(this,t),n=Ar(e),a={s:"",_s:{},o:{hint:2,ans:4}},(r=Ir(r="groupContext"))in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a;var s,u=t.getAttribute("data-lang");u||(u=(null===(s=t.parentElement)||void 0===s?void 0:s.getAttribute("data-lang"))||null);var f=t.getAttribute("data-quizz-group")||"";try{var d=p(f);e.groupContext=Object.assign(e.groupContext,d),e.groupContext.o.hint=l(e.groupContext.o.hint,2),e.groupContext.o.ans=l(e.groupContext.o.ans,4),e.groupContext}catch(t){console.error(t)}return e.lang=u||"ca",e.generateGroup(),e.findPlaceholders(),e.allQuizzElements=e.parent.querySelectorAll("ib-quizz-numeric, ib-quizz-dropdown, ib-quizz-mchoice"),e.allClozeElements=document.querySelectorAll("ib-quizz-cloze, ib-quizz-mathquill"),e.allQuizzElements,e.allClozeElements,e.checkButton=c("button",{class:"btn btn-sm btn-primary d-print-none",style:"margin: 10px;display:block",html:'<i class="fa fas fa-check"></i> '+Ee(e.lang,"check")}),e.listener=function(t){t.preventDefault();var n=!0;e.allQuizzElements.forEach((function(t){var e=t.check();n=n&&e})),e.allClozeElements.forEach((function(t){var e=t.check();n=n&&e})),n&&e.checkButton.setAttribute("disabled","true")},e.allQuizzElements.length+e.allClozeElements.length>0&&e.parent.append(e.checkButton),e}return e=o,(n=[{key:"generateGroup",value:function(){try{nn(this.groupContext.s,{},this.groupContext._s)}catch(t){console.error("GroupContext:: No es pot interpretar el codi.\n",t)}if(this.groupContext.s.trim().length){var t=c("div",{class:"alert alert-info d-print-none",html:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" style="height:20px;"><path fill="#154b5e" d="M592 192H473.26c12.69 29.59 7.12 65.2-17 89.32L320 417.58V464c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48V240c0-26.51-21.49-48-48-48zM480 376c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm-46.37-186.7L258.7 14.37c-19.16-19.16-50.23-19.16-69.39 0L14.37 189.3c-19.16 19.16-19.16 50.23 0 69.39L189.3 433.63c19.16 19.16 50.23 19.16 69.39 0L433.63 258.7c19.16-19.17 19.16-50.24 0-69.4zM96 248c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm128 128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm0-128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm0-128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm128 128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"/></svg> \n                <small>'.concat(Ee(this.lang,"random_msg"),"</small>")}),e=this.parent.querySelector(":nth-child(2)");"H4"===(null==e?void 0:e.nodeName)?this.parent.insertBefore(t,e.nextSibling):this.parent.prepend(t)}}},{key:"findPlaceholders",value:function(){0!==this.groupContext.s.trim().length&&(this.findPlaceholdersSpan(),this.findPlaceholdersText())}},{key:"findPlaceholdersText",value:function(){var t=this;(function(t){for(var e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null),r=n.nextNode();null!=r;)e.push(r),r=n.nextNode();return e})(this.parent).forEach((function(e){var n=e.textContent||"";e.textContent=on(n,t.groupContext._s)}))}},{key:"findPlaceholdersSpan",value:function(){var t=this;this.parent.querySelectorAll("span[data-quizz-interpol]").forEach((function(e){var n=e.getAttribute("data-quizz-interpol")||"";n.indexOf("#")<0||(e.innerHTML=on(n,t.groupContext._s))}))}},{key:"init",value:function(){var t=this,e=this.parent.dataset;if("1"!==e.active&&(e.active="1",this.checkButton.addEventListener("click",this.listener),this.allQuizzElements.forEach((function(e){"function"==typeof e.setLang?(e.setLang(t.lang),e.setGroupContext(t.groupContext)):console.error("No custom element registered for ",e)})),this.allClozeElements.length)){var n="https://piworld.es/iedib/snippets/sd/mathquill.min.js",r=document.body.querySelector('script[src$="/sd/quizz.min.js"]');r&&(n=(r.getAttribute("src")||"").replace("/sd/quizz.min.js","/sd/mathquill.min.js")),function(t,e,n,r){if(!e||null==document.head.querySelector("script#"+e)){var i=document.createElement("script");i.type="text/javascript",i.src=t,e&&i.setAttribute("id",e),i.onload=function(){console.info("Loaded ",t),n&&n()},i.onerror=function(){console.error("Error loading ",t),r&&r()},document.head.append(i)}}(n,"mathquill.matrix4quizz",(function(){t.allClozeElements.forEach((function(e){"function"==typeof e.setLang?(e.setLang(t.lang),e.setGroupContext(t.groupContext)):console.error("No custom element registered for ",e)}))}))}}},{key:"dispose",value:function(){"0"!==this.parent.dataset.active&&(this.parent.removeAttribute("data-active"),this.checkButton.removeEventListener("click",this.listener))}}])&&_r(e.prototype,n),r&&_r(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(F))||Er])}()}();