!function(){"use strict";var t={923:function(t,e,n){var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,".modal-fullscreen-xl .modal-header {\n    padding: 0rem 1rem;\n    border: none;\n}\n.modal-fullscreen-xl .close {\n    font-size: 200%;\n    border-radius: 50%;\n    background: black;\n}\n.modal-fullscreen-xl .modal-dialog {\n    width: 95%;\n    height: 95%;\n    max-width: none;\n    margin: auto;\n}\n.modal-fullscreen-xl .modal-content {\n    height: 100%;\n    border: 0;\n    border-radius: 0;\n    background: rgba(0,0,0,0);\n}\n.modal-fullscreen-xl .modal-body {\n    width: 100%;\n    overflow: auto;\n    background: rgba(0,0,0,0);\n}\n.navigate-left-arrow, .navigate-right-arrow {\n    font-size: 300%;\n    color: whitesmoke;\n}",""]),e.Z=a},889:function(t,e,n){var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,'@media not print {\n    body.editing div[role="snptd_presentacio"] .nav.nav-tabs {\n        background: lightgray;\n        position: relative;\n    }\n    body.editing div[role="snptd_presentacio"] .nav.nav-tabs::before {\n        content: \'\\f1e7\';\n        position: absolute;\n        top: 5px;\n        right: 5px; \n        font-family: "Font Awesome 6 Free", "FontAwesome";\n        font-size: 150%;\n    }\n\n    div[role="snptd_presentacio"] {\n        margin: auto;\n        border-radius: 5px;\n        border: 2px solid #d4ebee;\n        max-width: 600px;\n    }\n  \n    div[role="snptd_presentacio"].theme-dark > .tab-content {\n        background: #363640;\n        color: whitesmoke;\n    }\n\n    div[role="snptd_presentacio"].align-center div.tab-pane {\n        align-self: center;\n        min-height: initial;\n    }\n\n    div[role="snptd_presentacio"].align-bottom div.tab-pane {\n        align-self: flex-end;\n        min-height: initial;\n    }\n}\n  ',""]),e.Z=a},841:function(t,e,n){var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,'/* %SKIPALLCSS */\ndiv[role="snptd_presentacio"] .nav.nav-tabs {\n    display: none;\n}\n\n@media not print {\n    div[role="snptd_presentacio"]>.tab-content {\n        border: none;\n        display: flex;\n        padding: 10px;\n    }\n\n    div[role="snptd_presentacio"] .tab-pane {\n        display: block;\n        border: none;\n        min-height: 100px;\n        margin-right: -100%;\n        width: 100%;\n        opacity: 0;\n    }\n\n    div[role="snptd_presentacio"] .tab-pane.fade {\n        transition-delay: 300ms;\n        transition-duration: 500ms;\n    }\n\n    div[role="snptd_presentacio"][data-transition="slide"] .tab-pane {\n        transition: transform .55s linear, opacity 0.55s ease-out;\n    }\n\n    div[role="snptd_presentacio"] .tab-pane.active {\n        opacity: 1;\n        transform: translate(0, 0);\n    }\n\n    div[role="snptd_presentacio"] .tab-pane:not(.active) {\n        transform: translate(-110%, 0);\n    }\n\n    div[role="snptd_presentacio"] .snpt_container {\n        margin: 20px 400px;\n        height: 300px;\n        width: 50%;\n        background-color: #d4ebee;\n    }\n\n    div[role="snptd_presentacio"] .box_continguts {\n        padding-top: 20px;\n        padding-left: 20px;\n        padding-right: 20px;\n        font-size: 20px;\n        height: 250px;\n        background-color: #d4ebee;\n    }\n\n    div[role="snptd_presentacio"] .box_botons {\n        padding-left: 10px;\n        padding-top: 6px;\n        font-size: 18px;\n        height: 40px;\n        background-color: #d4ebee;\n    }\n\n    div[role="snptd_presentacio"] .box_botons button {\n        margin: 0 1px;\n    }\n\n    div[role="snptd_presentacio"] .box_comptador {\n        display: inline;\n        float: right;\n        padding-right: 15px;\n        padding-top: 5px;\n        font-size: 16px;\n        height: 30px;\n        color: #0069d9;\n    }\n}\n\n@media print {\n    div[role="snptd_presentacio"] {\n        width: 99%;\n        margin: auto;\n        border: 1px solid #eee;\n        display: flex;\n    }\n\n    div[role="snptd_presentacio"] .box_botons {\n        display: none;\n    }\n\n    div[role="snptd_presentacio"] .fade {\n        opacity: 1;\n    }\n\n    div[role="snptd_presentacio"] .nav>li>a {\n        min-width: 80px;\n        color: #555;\n    }\n\n    div[role="snptd_presentacio"] .tab-pane {\n        opacity: 1;\n        width: 100%;\n        display: inline-block !important;\n    }\n\n    div[role="snptd_presentacio"] .tab-pane::before {\n        content: attr(data-label);\n        width: 100%;\n        display: block;\n        margin-bottom: 10px;\n        background-color: #d4ebee;\n        text-align: right;\n        padding-right: 5px;\n    }\n}',""]),e.Z=a},707:function(t,e,n){var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,'[data-quizz-group]{padding:5px;border-left:3px solid lightblue}.ib-quizz-right{margin-left:8px;border-radius:50%;background-color:#438c43;color:white;width:23px;display:inline-block;height:23px;text-align:center}.ib-quizz-wrong{margin-left:8px;border-radius:50%;background-color:#a43c3c;color:white;width:23px;display:inline-block;height:23px;text-align:center}.ib-quizz-error{margin-left:8px;border-radius:50%;background-color:#72395a;color:white;width:23px;display:inline-block;height:23px;text-align:center}.ib-quizz-hint,.ib-quizz-feedback{margin-left:8px;border-radius:50%;background-color:#a3a3a3;color:black;width:23px;display:inline-block;height:23px;text-align:center;cursor:pointer}.ibquizz-me-btn-openeditor{background:whitesmoke;vertical-align:top}.ibquizz-me-btn-openeditor:hover{background:white}.ibquizz-me-btn-openeditor>i.fas{color:darkred}.ibquizz-square-root{background-position:50% 50%;background-size:20px 20px;background-repeat:no-repeat;background-image:url("https://piworld.es/iedib/mqwidgets2/pw-square-root.png");display:inline-block;width:16px;height:16px}.ibquizz-me-btn-toolbar{height:35px;overflow:hidden;font-weight:bold}.ibquizz-me-btn-toolbar>span{cursor:pointer;font-size:90%}.ibquizz-me-btn-toolbar:hover{background:white}ib-quizz-mathquill{display:none !important}ib-quizz-mathquill.ib-enable-future{display:inline-block !important}.ibquizz-editor-palette{padding:2px;background:whitesmoke}',""]),e.Z=a},665:function(t,e,n){var r=n(81),o=n.n(r),i=n(645),a=n.n(i),u=n(667),s=n.n(u),c=new URL(n(73),n.b),l=a()(o()),f=s()(c);l.push([t.id,'.sd-speak-enabled {\n  position: relative;\n  background: whitesmoke;\n  text-decoration: none;\n}\n\n@keyframes speakicon_anim {\n  0% {\n    opacity: 0;\n    left: -10px;\n  }\n\n  100% {\n    opacity: 1;\n    left: -5px;\n  }\n}\n\n.sd-speak-enabled:hover:after {\n  content: "";\n  padding: 2px;\n  border-radius: 50%;\n  width: 14px;\n  height: 14px;\n  position: absolute;\n  background-image: url('+f+");\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: contain;\n  left: -5px;\n  top: -16px;\n  z-index: 1000;\n  font-size: 70%;\n  margin: 0px 5px;\n  font-weight: 700;\n  vertical-align: top;\n  animation: speakicon_anim 1s ease;\n}\n",""]),e.Z=l},441:function(t,e,n){var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,"@media print and (color) {\n    .pw-tasca-solucio, .pw-tasca-nprt {\n        display:none!important;\n    }\n}",""]),e.Z=a},645:function(t){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var u=0;u<this.length;u++){var s=this[u][0];null!=s&&(a[s]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);r&&a[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),e.push(l))}},e}},667:function(t){t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},81:function(t){t.exports=function(t){return t[1]}},379:function(t){var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var i={},a=[],u=0;u<t.length;u++){var s=t[u],c=r.base?s[0]+r.base:s[0],l=i[c]||0,f="".concat(c," ").concat(l);i[c]=l+1;var p=n(f),h={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==p)e[p].references++,e[p].updater(h);else{var d=o(h,r);r.byIndex=u,e.splice(u,0,{identifier:f,updater:d,references:1})}a.push(f)}return a}function o(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var i=r(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var u=n(i[a]);e[u].references--}for(var s=r(t,o),c=0;c<i.length;c++){var l=n(i[c]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}i=s}}},569:function(t){var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:function(t){t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:function(t,e,n){t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:function(t){t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:function(t){t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},73:function(t){t.exports="data:image/svg+xml;charset=utf8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 style=%27background:white%27 viewBox=%270 0 512 512%27%3E%3Cpath fill=%27%232a84f9%27 d=%27M480 32c0-12.9-7.8-24.6-19.8-29.6s-25.7-2.2-34.9 6.9L381.7 53c-48 48-113.1 75-181 75H192 160 64c-35.3 0-64 28.7-64 64v96c0 35.3 28.7 64 64 64l0 128c0 17.7 14.3 32 32 32h64c17.7 0 32-14.3 32-32V352l8.7 0c67.9 0 133 27 181 75l43.6 43.6c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6V300.4c18.6-8.8 32-32.5 32-60.4s-13.4-51.6-32-60.4V32zm-64 76.7V240 371.3C357.2 317.8 280.5 288 200.7 288H192V192h8.7c79.8 0 156.5-29.8 215.3-83.3z%27/%3E%3C/svg%3E"}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,exports:{}};return t[r](i,i.exports,n),i.exports}n.m=t,n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.b=document.baseURI||self.location.href,n.nc=void 0,function(){function t(n,o,i){return t=e()?Reflect.construct.bind():function(t,e,n){var o=[null];o.push.apply(o,e);var i=new(Function.bind.apply(t,o));return n&&r(i,n.prototype),i},t.apply(null,arguments)}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(){return"g"+Math.random().toString(32).substring(2)}function u(t,e,n,r){r=r||0;var o=window;o[t]&&"function"==typeof o[t]?e&&e():r>15?n&&n():window.setTimeout((function(){u(t,e,n,r+1)}),50*(r+1))}function s(t){u("require",(function(){window.require(["jquery"],(function(e){var n=e;window.$||(window.$=n),window.jQuery||(window.jQuery=n),n(t)}),(function(){console.error("Error requiring $. Waiting for $"),u("jQuery",(function(){window.$||(window.$=jQuery),$(t)}),(function(){console.error("Cannot find $. Bootstrap anyway!"),t()}),35)}))}),(function(){console.error("Cannot find requirejs. Waiting for $"),u("jQuery",(function(){$(t)}),(function(){console.error("Cannot find $. Bootstrap anyway!"),t()}),35)}),10)}function c(t,e){if(t&&"number"==typeof t)return t;if(!t||!(t+"").trim())return e;try{var n=parseInt(t+"");if(!isNaN(n))return n}catch(t){}return e}function l(t,e){var n=document.createElement(t);return Object.keys(e).forEach((function(t){var r=e[t];"class"===t?r.trim().split(/\s+/).forEach((function(t){n.classList.add(t)})):"style"===t?r.split(";").forEach((function(t){var e=t.split(":");2===e.length&&n.style.setProperty(e[0].trim(),e[1].trim())})):"html"===t?n.innerHTML=r:n.setAttribute(t,r)})),n}function f(t,e,n,r){if(!e||null==document.head.querySelector("script#"+e)){var o=document.createElement("script");o.type="text/javascript",o.src=t,e&&o.setAttribute("id",e),o.onload=function(){n&&n()},o.onerror=function(){console.error("Error loading ",t),r&&r()},document.head.append(o)}}function p(t,e){return(e=(e||"").trim()).toLowerCase().startsWith("http")?e:(r=e,n=((n=t)||"").trim(),r=(r||"").trim(),n.endsWith("/")||(n+="/"),r.startsWith("/")&&(r=r.substring(1)),n+r);var n,r}function h(e,n){e=e||{};var r=Object.keys(e),i=[].concat(r,["expr","return eval(expr)"]),a=t(Function,o(i)),u=Object.values(e),s=[].concat(u,[n]);return a.apply(void 0,o(s))}function d(t){return t=t||"",JSON.parse(atob(t)||"{}")}function v(t){t.forEach((function(t){var e=window.IB;if(t.meta){var n=t.meta;if(e.sd[n.name]&&"function"==typeof e.sd[n.name].init)return console.error("Warning: component '".concat(n.name,"' loaded twice.")),void e.sd[n.name].init();!function r(){e.sd[n.name]=e.sd[n.name]||{inst:{},_class:t,init:r,dispose:null};var o=n.query||'div[role="snptd_'.concat(n.name,'"], div[data-snptd="').concat(n.name,'"]');if("body"===o){if(e.sd[n.name].singl)return void console.error("Singleton already defined");var i=document.querySelector("body"),a=new t(i);a.init(),e.sd[n.name].singl=a,"_init: Initialized singleton '".concat(n.name,"' instance.")}else{var u=function(t){return document.querySelectorAll(t)}(o),s=0;u.forEach((function(r){var o=r,i=o.getAttribute("id");if(i||(i="sd_"+Math.random().toString(32).substring(2),o.setAttribute("id",i)),"1"!==o.dataset.active){var a=new t(o);a.init(),null!=e.sd[n.name].inst&&(e.sd[n.name].inst[i]=a),s++}else console.warn("Warning: Element '".concat(n.name,"' ").concat(i," already processed."))})),"_init: Initialized ".concat(s," '").concat(n.name,"' instances.")}}();e.sd[n.name].dispose=function(){var t=0;window.IB&&window.IB.sd&&window.IB.sd[n.name]&&window.IB.sd[n.name].inst&&(Object.keys(window.IB.sd[n.name].inst).forEach((function(r){var o=window.IB.sd[n.name].inst[r];o&&(o.dispose(),t++,delete e.sd[n.name].inst[r])})),"_dispose: Destroyed ".concat(t," '").concat(n.name,"' instances."))}}else console.error("Missing meta in class ",t,". Annotate it with @Component")}))}var y=function(t){window.IB=window.IB||{sd:{}};var e=t;e.map((function(t){var e;return(null===(e=t.meta)||void 0===e?void 0:e.use$)||!1})).reduce((function(t,e){return e||t}))?s((function(){var t;"function"==typeof(null===(t=window.IB)||void 0===t?void 0:t.on$Ready)&&window.IB.on$Ready(),v(e)})):"complete"===document.readyState?v(e):window.addEventListener("DOMContentLoaded",(function(){return v(e)}))},m=n(379),b=n.n(m),g=n(795),w=n.n(g),x=n(569),E=n.n(x),O=n(565),S=n.n(O),k=n(216),_=n.n(k),L=n(589),j=n.n(L),P=n(923),T={};T.styleTagTransform=j(),T.setAttributes=S(),T.insert=E().bind(null,"head"),T.domAPI=w(),T.insertStyleElement=_();b()(P.Z,T),P.Z&&P.Z.locals&&P.Z.locals;var C=n(889),A={};A.styleTagTransform=j(),A.setAttributes=S(),A.insert=E().bind(null,"head"),A.domAPI=w(),A.insertStyleElement=_();b()(C.Z,A),C.Z&&C.Z.locals&&C.Z.locals;var N=n(841),I={};I.styleTagTransform=j(),I.setAttributes=S(),I.insert=E().bind(null,"head"),I.domAPI=w(),I.insertStyleElement=_();b()(N.Z,I),N.Z&&N.Z.locals&&N.Z.locals;var R=n(665),z={};z.styleTagTransform=j(),z.setAttributes=S(),z.insert=E().bind(null,"head"),z.domAPI=w(),z.insertStyleElement=_();b()(R.Z,z),R.Z&&R.Z.locals&&R.Z.locals;var q=n(441),M={};M.styleTagTransform=j(),M.setAttributes=S(),M.insert=E().bind(null,"head"),M.domAPI=w(),M.insertStyleElement=_();b()(q.Z,M),q.Z&&q.Z.locals&&q.Z.locals;var D=n(707),G={};G.styleTagTransform=j(),G.setAttributes=S(),G.insert=E().bind(null,"head"),G.domAPI=w(),G.insertStyleElement=_();b()(D.Z,G),D.Z&&D.Z.locals&&D.Z.locals;function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==F(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===F(i)?i:String(i)),r)}var o,i}function H(t,e,n){return e&&B(t.prototype,e),n&&B(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var U=H((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.parent=e}));function V(t){return function(t){if(Array.isArray(t))return Z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var W,J={name:"",author:"",version:"1.0",use$:!1};function Y(t){var e=Object.assign({},J,t);return e.query||(e.query='[role="snptd_'.concat(e.name,'"],[data-snptd="').concat(e.name,'"]')),function(t){t.meta=e}}function Q(t){return function(e){var n=e.prototype.connectedCallback,r=t.elementName,o=t.classes,i=t.styles;e.prototype.connectedCallback=function(){var t;o&&(t=this.classList).add.apply(t,V(o));i&&Object.assign(this.style,i),n&&n.apply(this)},customElements.define(r,e)}}function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,at(r.key),r)}}function tt(t,e){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tt(t,e)}function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ot(t);if(e){var o=ot(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return nt(this,n)}}function nt(t,e){if(e&&("object"===X(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return rt(t)}function rt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ot(t){return ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ot(t)}function it(t,e,n){return(e=at(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function at(t){var e=function(t,e){if("object"!==X(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===X(e)?e:String(e)}var ut="snptModal_lightbox";var st,ct,lt,ft=Y({name:"lightbox",author:"Josep Mulet Pol",version:"2.3",query:"body",use$:!0})(W=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tt(t,e)}(i,t);var e,n,r,o=et(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),it(rt(e=o.call(this,t)),"currentIndex",0),it(rt(e),"$gallery",[]),e}return e=i,(n=[{key:"init",value:function(){var t=this;this.$gallery=function(){for(var t=0,e=[],n=document.querySelectorAll('[role="snptd_lightbox"], [data-snptd="lightbox"]'),r=0,o=n.length;r<o;r++){var i=n[r],a=(i.tagName||"").toUpperCase();if("DIV"===a||"TABLE"===a)for(var u=i.querySelectorAll("img"),s=0,c=u.length;s<c;s++){var l=u[s];l.dataset.lbpos=t+"",t++,e.push(l)}else if("IMG"==a){if("lightbox"!=i.dataset.snptd&&"snptd_lightbox"!=i.getAttribute("role"))continue;i.dataset.lbpos=t+"",t++,e.push(i)}}return e}(),this.createModal(),this.currentIndex=0,this.$gallery.forEach((function(e){return t.setupImage(e)}))}},{key:"setupImage",value:function(t){var e=this,n=$(t);"1"!=n.attr("data-active")&&(n.css("cursor","pointer"),n.attr("data-toggle","modal"),n.attr("data-target","#"+ut),n.attr("data-active","1"),n.off(),n.on("click",(function(){e.currentIndex=c(n.attr("data-lbpos")||"0",0),e.loadImageDynamically()})))}},{key:"loadImageDynamically",value:function(){var t,e=this;if(this.$gallery[this.currentIndex]){var n=$(this.$gallery[this.currentIndex]);if(null!==(t=this.$img)&&void 0!==t&&t.length){var r=new Image,o=n.attr("data-src")||n.attr("src")||"";r.onload=function(){var t;null===(t=e.$img)||void 0===t||t.attr("src",o)},r.onerror=function(t){var n;console.error("Cannot load image ",t),null===(n=e.$img)||void 0===n||n.attr("src","")},r.src=o}}else console.error("Nothing at currentIndex",this.currentIndex)}},{key:"createModal",value:function(){var t=this,e=this.$gallery.length>1,n=$('<div class="modal fade modal-fullscreen-xl" id="'+ut+'" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close text-white" data-dismiss="modal">&times;</button></div><div class="modal-body p-0" style="text-align:center;">'+(e?'<a class="navigate-left-arrow" href="javascript:void(0);" style="position: fixed; top: 50%; left: 50px;"><span>&#10094;</span></a>':"")+'<img src="" style="height: 100%; width: 100%; object-fit: contain;">'+(e?'<a class="navigate-right-arrow" href="javascript:void(0);" style="position: fixed; top: 50%; right: 50px;"><span>&#10095;</span></a>':"")+"</div></div></div></div>");this.$modal=$(n),this.$img=this.$modal.find("img"),this.$close=this.$modal.find("button"),$("body").append(this.$modal),this.$modal.on("hide.bs.modal",(function(){var e;null===(e=t.$img)||void 0===e||e.attr("src","")})),$("#modalCloseBtn").on("click",(function(){var e;null===(e=t.$img)||void 0===e||e.attr("src","")})),e&&(this.$modal.find(".navigate-left-arrow").on("click",(function(e){e.preventDefault(),t.navigateLeft()})),this.$modal.find(".navigate-right-arrow").on("click",(function(e){e.preventDefault(),t.navigateRight()})))}},{key:"navigateLeft",value:function(){0==this.currentIndex?this.currentIndex=this.$gallery.length-1:this.currentIndex=this.currentIndex-1,this.loadImageDynamically()}},{key:"navigateRight",value:function(){this.currentIndex==this.$gallery.length-1?this.currentIndex=0:this.currentIndex=this.currentIndex+1,this.loadImageDynamically()}},{key:"dispose",value:function(){this.$gallery.forEach((function(t){var e=$(t);e.removeAttr("data-active"),e.removeAttr("data-toggle"),e.removeAttr("data-target"),e.css("cursor","initial"),e.off()}));var t=$("#"+ut);t.off(),t.remove()}}])&&K(e.prototype,n),r&&K(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(U))||W,pt=(st={zoom:.03,maxZoom:10,initialZoom:1,initialX:.5,initialY:.5},ct=function(t,e){if(t&&t.nodeName&&"IMG"===t.nodeName){var n,r,o,i,a,u,s,c,l,f={},p=function(e){t.removeEventListener("wheelzoom.destroy",p),t.removeEventListener("wheelzoom.reset",d),t.removeEventListener("load",g),t.removeEventListener("mouseup",m),t.removeEventListener("mousemove",y),t.removeEventListener("mousedown",b),t.removeEventListener("wheel",v),null!=l&&l.unobserve(t),t.style.backgroundImage=e.backgroundImage,t.style.backgroundRepeat=e.backgroundRepeat,t.src=e.src,t.style.cursor="default"}.bind(null,{backgroundImage:t.style.backgroundImage,backgroundRepeat:t.style.backgroundRepeat,src:t.src});t.addEventListener("wheelzoom.destroy",p),e=e||{},Object.keys(st).forEach((function(t){f[t]=void 0!==e[t]?e[t]:st[t]})),t.complete&&g(),t.addEventListener("load",g),null!=window.ResizeObserver&&(l=new ResizeObserver((function(){if(t.src==c){var e=Math.max(f.initialZoom,1),s=window.getComputedStyle(t,null);n=parseInt(s.width,10),r=parseInt(s.height,10),i=r*e,a=-((o=n*e)-n)*f.initialX,u=-(i-r)*f.initialY,t.style.backgroundSize=o+"px "+i+"px",t.style.backgroundPosition=a+"px "+u+"px"}}))).observe(t)}function h(){a>0?a=0:a<n-o&&(a=n-o),u>0?u=0:u<r-i&&(u=r-i),t.style.backgroundSize=o+"px "+i+"px",t.style.backgroundPosition=a+"px "+u+"px"}function d(){o=n,i=r,a=u=0,h()}function v(e){var s=0;e.preventDefault(),e.deltaY?s=e.deltaY:e.wheelDelta&&(s=-e.wheelDelta);var c=t.getBoundingClientRect(),l=e.pageX-c.left-window.pageXOffset,p=e.pageY-c.top-window.pageYOffset,v=(l-a)/o,y=(p-u)/i;s<0?(o+=o*f.zoom,i+=i*f.zoom):(o-=o*f.zoom,i-=i*f.zoom),f.maxZoom&&(o=Math.min(n*f.maxZoom,o),i=Math.min(r*f.maxZoom,i)),a=l-o*v,u=p-i*y,o<=n||i<=r?d():h()}function y(t){t.preventDefault(),a+=t.pageX-s.pageX,u+=t.pageY-s.pageY,s=t,h()}function m(){document.removeEventListener("mouseup",m),document.removeEventListener("mousemove",y)}function b(t){t.preventDefault(),s=t,document.addEventListener("mousemove",y),document.addEventListener("mouseup",m)}function g(){var e=Math.max(f.initialZoom,1);if(t.src!==c){var s=window.getComputedStyle(t,null);n=parseInt(s.width,10),r=parseInt(s.height,10),i=r*e,a=-((o=n*e)-n)*f.initialX,u=-(i-r)*f.initialY,function(t){t.style.backgroundRepeat="no-repeat",t.style.backgroundImage='url("'+t.src+'")',c="data:image/svg+xml;base64,"+window.btoa('<svg xmlns="http://www.w3.org/2000/svg" width="'+t.naturalWidth+'" height="'+t.naturalHeight+'"></svg>'),t.src=c}(t),t.style.backgroundSize=o+"px "+i+"px",t.style.backgroundPosition=a+"px "+u+"px",t.style.cursor="nesw-resize",t.addEventListener("wheelzoom.reset",d),t.addEventListener("wheel",v),t.addEventListener("mousedown",b)}}},function(t,e){"function"==typeof window.btoa&&ct(t,e)});function ht(t){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ht(t)}function dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==ht(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===ht(i)?i:String(i)),r)}var o,i}function vt(t,e){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vt(t,e)}function yt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=bt(t);if(e){var o=bt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mt(this,n)}}function mt(t,e){if(e&&("object"===ht(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function bt(t){return bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bt(t)}var gt,wt=Y({name:"zoom",author:"Josep Mulet Pol",version:"2.0"})(lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vt(t,e)}(i,t);var e,n,r,o=yt(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).allImgs=[],e}return e=i,n=[{key:"initImage",value:function(t,e){this.allImgs.push(t),t.style.maxWidth="98%","1"!==t.dataset.active&&(t.dataset.active="1",pt(t,e))}},{key:"init",value:function(){var t=this,e=this.parent.dataset;if("1"!==e.active){e.active="1";var n={maxZoom:c(e.maxzoom,10)};window.setTimeout((function(){"IMG"===t.parent.nodeName?t.initImage(t.parent,n):t.parent.querySelectorAll("img").forEach((function(e){return t.initImage(e,n)}))}),600)}}},{key:"dispose",value:function(){"1"===this.parent.dataset.active&&(this.parent.removeAttribute("data-active"),this.allImgs.forEach((function(t){t.dispatchEvent(new Event("wheelzoom.destroy")),t.removeAttribute("data-active")})))}}],n&&dt(e.prototype,n),r&&dt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(U))||lt;function xt(t){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xt(t)}function Et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pt(r.key),r)}}function Ot(t,e){return Ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ot(t,e)}function St(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Lt(t);if(e){var o=Lt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return kt(this,n)}}function kt(t,e){if(e&&("object"===xt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _t(t)}function _t(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lt(t){return Lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lt(t)}function jt(t,e,n){return(e=Pt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pt(t){var e=function(t,e){if("object"!==xt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==xt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===xt(e)?e:String(e)}var Tt='<i class="fa fas fa-play"></i>',Ct='<i class="fa fas fa-pause"></i>';function At(t,e){var n=document.createElement("button");n.className=t;var r=document.createElement("i");return r.className=e,n.appendChild(r),n}var Nt=Y({name:"presentacio",author:"Tomeu Fiol, Josep Mulet",version:"2.2"})(gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ot(t,e)}(i,t);var e,n,r,o=St(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),jt(_t(e=o.call(this,t)),"loop",!1),jt(_t(e),"num",0),jt(_t(e),"n",0),jt(_t(e),"continuarAutomatic",!1),jt(_t(e),"durada",[]),e}return e=i,(n=[{key:"init",value:function(){var t=this,e=this.parent.dataset;this.loop="1"==e.loop||"true"==e.loop;for(var n=this.parent.querySelectorAll("ul.nav.nav-tabs > li > a"),r=0,o=n.length;r<o;r++)n[r].innerHTML="&nbsp; "+(r+1)+"/"+o;this.parent.style.overflow="hidden",this.button_container=document.createElement("div"),this.button_container.className="box_botons",this.parent.append(this.button_container),this.diapositives=this.parent.querySelectorAll("div.tab-content > div.tab-pane"),this.num=this.diapositives.length,this.n=(c((null==e?void 0:e.start)||"1",1)-1)%this.num;for(var i="fade"==e.transition,a=0;a<this.num;a++)this.diapositives[a].dataset.label=a+1+"/"+this.num,this.diapositives[a].classList.remove("iedib-tabpane"),i&&this.diapositives[a].classList.add("fade"),a==this.n?this.diapositives[a].classList.add("active"):this.diapositives[a].classList.remove("active");var u=(e.durades||"0").trim();this.continuarAutomatic="0"!=u;var s=u.split(","),l=5;1==s.length&&(l=c(s[0],l)),this.durada=[];for(var f=s.length,p=0;p<this.num;p++){var h=l;p>=f||(h=c(s[p],l)),this.durada.push(h)}this.crearBotons(),this.carregaListeners();var d=e.autostart;"1"!=e.loop&&"true"!=e.loop&&(d="0"),"1"==d||"true"==d?this.continuarAutomatic&&this.n<this.num&&(this.updateCounter(),this.currentTimeout=setTimeout((function(){t.seguent()}),1e3*this.durada[this.n])):this.continuarAutomatic?(this.continuarAutomatic=!1,this.buttonPlay&&(this.buttonPlay.innerHTML=Tt),this.updateCounter()):this.updateCounter()}},{key:"eliminarActive",value:function(){if(this.diapositives)for(var t=0;t<this.num;t++)this.diapositives[t].classList.remove("active")}},{key:"updateCounter",value:function(){var t=this;if(this.boxComptador)if(this.boxComptador.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp; "+(this.n+1)+" / "+this.num,this.currentTimeout&&(clearInterval(this.currentTimeout),this.currentTimeout=null),this.continuarAutomatic){if(!this.loop&&this.n==this.num-1)return this.continuarAutomatic=!1,void(this.buttonPlay&&(this.buttonPlay.innerHTML=Tt));this.currentTimeout=setTimeout((function(){t.seguent()}),1e3*this.durada[this.n]),this.buttonPlay&&(this.buttonPlay.innerHTML=Ct)}else this.buttonPlay&&(this.buttonPlay.innerHTML=Tt)}},{key:"seguent",value:function(){if(this.diapositives){if(this.n>=this.num-1){if(!this.loop)return;this.n=-1}this.eliminarActive(),this.n+=1,this.diapositives[this.n].classList.add("active"),this.updateCounter()}}},{key:"anterior",value:function(){if(this.diapositives){if(0==this.n){if(!this.loop)return;this.n=this.num}this.eliminarActive(),this.n-=1,this.diapositives[this.n].classList.add("active"),this.updateCounter()}}},{key:"primer",value:function(){this.diapositives&&(this.eliminarActive(),this.n=0,this.diapositives[this.n].classList.add("active"),this.continuarAutomatic=!1,this.updateCounter())}},{key:"darrer",value:function(){this.diapositives&&(this.eliminarActive(),this.n=this.num-1,this.diapositives[this.n].classList.add("active"),this.continuarAutomatic=!1,this.updateCounter())}},{key:"pausa",value:function(){this.buttonPlay&&(this.continuarAutomatic=!1,null!=this.currentTimeout&&(clearTimeout(this.currentTimeout),this.currentTimeout=null),this.buttonPlay.innerHTML=Tt)}},{key:"play",value:function(){var t=this;this.buttonPlay&&(this.n>=this.num-1&&this.primer(),this.continuarAutomatic=!0,this.currentTimeout=setTimeout((function(){t.seguent()}),1e3*this.durada[this.n]),this.buttonPlay.innerHTML=Ct)}},{key:"carregaListeners",value:function(){var t=this;this.buttonBack&&this.buttonFirst&&this.buttonLast&&this.buttonNext&&(this.evListener1=function(e){return t.primer()},this.evListener2=function(e){return t.darrer()},this.evListener3=function(e){return t.seguent()},this.evListener4=function(e){return t.anterior()},this.buttonFirst.addEventListener("click",this.evListener1),this.buttonLast.addEventListener("click",this.evListener2),this.buttonNext.addEventListener("click",this.evListener3),this.buttonBack.addEventListener("click",this.evListener4),this.continuarAutomatic&&(this.evListener5=function(e){t.continuarAutomatic?t.pausa():t.play()},this.buttonPlay&&this.buttonPlay.addEventListener("click",this.evListener5)))}},{key:"dispose",value:function(){this.currentTimeout&&window.clearTimeout(this.currentTimeout),this.evListener1&&window.removeEventListener("click",this.evListener1),this.evListener2&&window.removeEventListener("click",this.evListener2),this.evListener3&&window.removeEventListener("click",this.evListener3),this.evListener4&&window.removeEventListener("click",this.evListener4),this.evListener5&&window.removeEventListener("click",this.evListener5),this.parent.dataset.active="0",this.button_container&&this.button_container.remove()}},{key:"crearBotons",value:function(){this.button_container&&(this.buttonFirst=At("btn btn-sm btn-outline-primary btn-first","fa fas fa-fast-backward"),this.button_container.appendChild(this.buttonFirst),this.buttonFirst.title="First",this.buttonBack=At("btn btn-sm btn-outline-primary btn-step-backward","fa fas fa-chevron-left"),this.button_container.appendChild(this.buttonBack),this.buttonBack.title="Previous",this.buttonNext=At("btn btn-sm btn-outline-primary btn-step-forward","fa fas fa-chevron-right"),this.button_container.appendChild(this.buttonNext),this.buttonNext.title="Next",this.buttonLast=At("btn btn-sm btn-outline-primary btn-last","fa fas fa-fast-forward"),this.buttonLast.title="Last",this.button_container.appendChild(this.buttonLast),this.continuarAutomatic&&(this.buttonPlay=At("btn btn-sm btn-primary btn-step-play","fa fas fa-pause"),this.buttonPlay.style.setProperty("margin-left","15px"),this.buttonPlay.title="Play/Pause",this.button_container.appendChild(this.buttonPlay)),this.boxComptador=document.createElement("div"),this.boxComptador.className="box_comptador",this.button_container.appendChild(this.boxComptador))}}])&&Et(e.prototype,n),r&&Et(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(U))||gt;function It(t){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(t)}function Rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zt(r.key),r)}}function zt(t){var e=function(t,e){if("object"!==It(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==It(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===It(e)?e:String(e)}var qt=function(){function t(e){var n,r,o,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o="",(r=zt(r="url"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._elem=e;var a=e.getAttribute("href")||e.dataset.lang||"en_us";a=a.replace("#speak_","");var u=e.innerText.trim();u.length>1e3?e.removeAttribute("href"):("-"==e.title&&e.removeAttribute("title"),e.classList.add("sd-speak-enabled"),this.url="https://ibsuite.es/api/gtts/speak?t="+encodeURIComponent(u)+"&l="+a,this.audio=null,this.handler=function(t){t.preventDefault(),i.play()},e.addEventListener("click",this.handler),this.handler||this._elem.removeEventListener("click",this.handler))}var e,n,r;return e=t,(n=[{key:"play",value:function(){this.audio?(this.audio.pause(),this.audio.currentTime=0):this.audio=new Audio(this.url),this.audio.src=this.url,this.audio.play()}},{key:"setSrc",value:function(t){this.audio&&(this.audio.src=t)}},{key:"pause",value:function(){this.audio&&this.audio.pause()}},{key:"dispose",value:function(){null!=this.audio&&(this.audio.pause(),this.audio.currentTime=0,this.audio.src="",this.audio=null),this.handler&&(this._elem.classList.remove("sd-speak-enabled"),this._elem.removeAttribute("data-active"),this._elem.removeEventListener("click",this.handler),this.handler=null)}}])&&Rt(e.prototype,n),r&&Rt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const Mt={},Dt="undefined"==typeof globalThis?window:globalThis,Gt={status:"created"},Ft={};Mt.debug=t=>{$t="function"==typeof t?t:()=>{}};let $t=()=>{};Mt.detect=()=>Bt();const Bt=()=>{const t={};["speechSynthesis","speechSynthesisUtterance","speechSynthesisVoice","speechSynthesisEvent","speechSynthesisErrorEvent"].forEach((e=>{t[e]=Qt(e)})),t.onvoiceschanged=Ht(t.speechSynthesis,"onvoiceschanged");const e=Ht(t.speechSynthesisUtterance,"prototype");return ee.forEach((n=>{const r=`on${n}`;t[r]=e&&Ht(t.speechSynthesisUtterance.prototype,r)})),Ft.isAndroid=Vt(),Ft.isFirefox=Wt()||Zt(),Ft.isSafari=Jt(),$t(`is android: ${!!Ft.isAndroid}`),$t(`is firefox: ${!!Ft.isFirefox}`),$t(`is safari: ${!!Ft.isSafari}`),t},Ht=(t={},e)=>Object.hasOwnProperty.call(t,e)||e in t||!!t[e],Ut=()=>(Dt.navigator||{}).userAgent||"",Vt=()=>/android/i.test(Ut()),Zt=()=>/kaios/i.test(Ut()),Wt=()=>void 0!==Dt.InstallTrigger||/firefox/i.test(Ut()),Jt=()=>void 0!==Dt.GestureEvent,Yt=["webKit","moz","ms","o"],Qt=t=>{const e=`${(n=t).charAt(0).toUpperCase()}${n.slice(1)}`;var n;const r=Yt.map((t=>`${t}${e}`)),o=[t,e].concat(r).find(Xt);return Dt[o]},Xt=t=>Dt[t];Mt.status=()=>({...Gt}),Mt.filterVoices=({name:t,language:e,localService:n,voiceURI:r})=>{const o=Gt.voices||[],i=void 0!==t,a=void 0!==r,u=void 0!==n,s=void 0!==e,c=s&&e.split(/[-_]+/g)[0].toLocaleLowerCase();return o.filter((e=>{if(i&&e.name.includes(t)||a&&e.voiceURI.includes(r)||u&&e.localService===n)return!0;if(s){const t=e.lang&&e.lang.toLocaleLowerCase();return t&&(t===c||t.indexOf(`${c}-`)>-1||t.indexOf(`${c}_`)>-1)}return!1}))};const Kt=t=>{$t(t),Gt.status=t};Mt.init=function({maxTimeout:t=5e3,interval:e=250,quiet:n,maxLengthExceeded:r}={}){return new Promise(((o,i)=>{if(Gt.initialized)return o(!1);let a,u;Mt.reset(),Kt("init: start");let s=!1;Gt.maxLengthExceeded=r||"warn";const c=t=>(Kt(`init: failed (${t})`),clearInterval(a),Gt.initialized=!1,n?o(!1):i(new Error(`EasySpeech: ${t}`))),l=()=>{if(!s)return Kt("init: complete"),s=!0,Gt.initialized=!0,clearInterval(a),p.onvoiceschanged=null,u&&p.removeEventListener("voiceschanged",u),o(!0)},f=Bt();if(!(!!f.speechSynthesis&&!!f.speechSynthesisUtterance))return c("browser misses features");Object.keys(f).forEach((t=>{Gt[t]=f[t]}));const{speechSynthesis:p}=Gt,h=()=>{const t=p.getVoices()||[];if(t.length>0){if(Gt.voices=t,Kt(`voices loaded: ${t.length}`),Gt.defaultVoice=t.find((t=>t.default)),!Gt.defaultVoice){const t=(Dt.navigator||{}).language||"",e=Mt.filterVoices({language:t});e.length>0&&(Gt.defaultVoice=e[0])}return Gt.defaultVoice||(Gt.defaultVoice=t[0]),!0}return!1};if(Kt("init: voices"),h())return l();const d=()=>{Kt("init: voices (timer)");let n=0;a=setInterval((()=>h()?l():n>t?c("browser has no voices (timeout)"):void(n+=e)),e)};f.onvoiceschanged?(Kt("init: voices (onvoiceschanged)"),p.onvoiceschanged=()=>h()?l():d(),setTimeout((()=>h()?l():c("browser has no voices (timeout)")),t)):(Ht(p,"addEventListener")&&(Kt("init: voices (addEventListener)"),u=()=>{if(h())return l()},p.addEventListener("voiceschanged",u)),d())}))};const te=({force:t}={})=>{if(!t&&!Gt.initialized)throw new Error("EasySpeech: not initialized. Run EasySpeech.init() first")};Mt.voices=()=>(te(),Gt.voices),Mt.on=t=>(te(),ee.forEach((e=>{const n=t[e];ne.handler(n)&&(Gt.handlers[e]=n)})),{...Gt.handlers});const ee=["boundary","end","error","mark","pause","resume","start"],ne={isNumber:t=>"number"==typeof t&&!Number.isNaN(t),pitch:t=>ne.isNumber(t)&&t>=0&&t<=2,volume:t=>ne.isNumber(t)&&t>=0&&t<=1,rate:t=>ne.isNumber(t)&&t>=.1&&t<=10,text:t=>"string"==typeof t,handler:t=>"function"==typeof t,voice:t=>t&&t.lang&&t.name&&t.voiceURI};Mt.defaults=t=>(te(),t&&(Gt.defaults=Gt.defaults||{},["voice","pitch","rate","volume"].forEach((e=>{const n=t[e];(0,ne[e])(n)&&(Gt.defaults[e]=n)}))),{...Gt.defaults});Mt.speak=({text:t,voice:e,pitch:n,rate:r,volume:o,force:i,infiniteResume:a,noStop:u,...s})=>{if(te({force:i}),!ne.text(t))throw new Error("EasySpeech: at least some valid text is required to speak");if((new TextEncoder).encode(t).length>4096){const t="EasySpeech: text exceeds max length of 4096 bytes, which will not work with some voices.";switch(Gt.maxLengthExceeded){case"none":break;case"error":throw new Error(t);default:console.warn(t)}}const c=t=>{const[e,n]=Object.entries(t)[0];return ne[e](n)?n:Gt.defaults?.[e]};return new Promise(((i,l)=>{Kt("init speak");const f=(t=>new(0,Gt.speechSynthesisUtterance)(t))(t),p=(t=>t||Gt.defaults?.voice||Gt.defaultVoice||Gt.voices?.[0])(e);p&&(f.voice=p,f.lang=p.lang,f.voiceURI=p.voiceURI),f.text=t,f.pitch=c({pitch:n}),f.rate=c({rate:r}),f.volume=c({volume:o});const h=f.voice&&f.voice.name&&f.voice.name.toLocaleLowerCase().includes("(natural)");re(f,{isMsNatural:h}),ee.forEach((t=>{const e=s[t];ne.handler(e)&&f.addEventListener(t,e),Gt.handlers?.[t]&&f.addEventListener(t,Gt.handlers[t])})),f.addEventListener("start",(()=>{Ft.paused=!1,Ft.speaking=!0;const t=!h&&!Ft.isFirefox&&!Ft.isSafari&&!0!==Ft.isAndroid;("boolean"==typeof a?a:t)&&ie(f)})),f.addEventListener("end",(t=>{Kt("speak complete"),Ft.paused=!1,Ft.speaking=!1,clearTimeout(oe),i(t)})),f.addEventListener("error",((t={})=>{Kt(`speak failed: ${t.message}`),Ft.paused=!1,Ft.speaking=!1,clearTimeout(oe),l(t)})),clearTimeout(oe),!0!==u&&Gt.speechSynthesis.cancel(),setTimeout((()=>Gt.speechSynthesis.speak(f)),10)}))};const re=({voice:t,pitch:e,rate:n,volume:r},{isMsNatural:o=!1}={})=>{$t(`utterance: voice=${t?.name} volume=${r} rate=${n} pitch=${e} isMsNatural=${o}`)};let oe;function ie(t){if(!t&&oe)return $t("force-clear timeout"),Dt.clearTimeout(oe);const{paused:e,speaking:n}=Gt.speechSynthesis,r=n||Ft.speaking,o=e||Ft.paused;$t(`resumeInfinity isSpeaking=${r} isPaused=${o}`),r&&!o&&(Gt.speechSynthesis.pause(),Gt.speechSynthesis.resume()),oe=Dt.setTimeout((function(){ie(t)}),5e3)}function ae(t){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(t)}function ue(){ue=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new k(o||[]);return r(a,"_invoke",{value:x(t,n,u)}),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function p(){}function h(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(_([])));m&&m!==e&&n.call(m,i)&&(v=m);var b=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,a,u){var s=l(t[r],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==ae(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return o("throw",t,a,u)}))}u(s.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return L()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=E(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=l(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=d,r(b,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:h,configurable:!0}),h.displayName=s(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),s(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new w(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),s(b,u,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=_,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function se(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,le(r.key),r)}}function le(t){var e=function(t,e){if("object"!==ae(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ae(e)?e:String(e)}Mt.cancel=()=>{te(),Kt("cancelling"),Gt.speechSynthesis.cancel(),Ft.paused=!1,Ft.speaking=!1},Mt.resume=()=>{te(),Kt("resuming"),Ft.paused=!1,Ft.speaking=!0,Gt.speechSynthesis.resume()},Mt.pause=()=>{if(te(),Kt("pausing"),Ft.isAndroid)return $t("patch pause on Android with cancel"),Gt.speechSynthesis.cancel();Gt.speechSynthesis.pause(),Ft.paused=!0,Ft.speaking=!1},Mt.reset=()=>{Object.assign(Gt,{status:"reset",initialized:!1,speechSynthesis:null,speechSynthesisUtterance:null,speechSynthesisVoice:null,speechSynthesisEvent:null,speechSynthesisErrorEvent:null,voices:null,defaultVoice:null,defaults:{pitch:1,rate:1,volume:1,voice:null},handlers:{}})};var fe=function(){function t(e,n){var r,o,i,a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=null,(o=le(o="_voice"))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,this._elem=e;var u=(e.getAttribute("href")||"_").split("_")[1];"-"==e.title&&e.removeAttribute("title"),this._voice=function(t,e){t=(t||"").toLowerCase();for(var n=0,r=null,o=(e||[]).length;n<o&&null==r;)e[n].lang.toLowerCase()==t&&(r=e[n]),n++;return r}(u,n),this.handler=null,this._voice?(e.classList.add("sd-speak-enabled"),this.handler=function(t){t.preventDefault(),a.play()},e.addEventListener("click",this.handler)):e.removeAttribute("href")}var e,n,r,o,i;return e=t,n=[{key:"play",value:(o=ue().mark((function t(){return ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._voice){t.next=2;break}return t.abrupt("return");case 2:return Mt.cancel(),t.next=5,Mt.speak({text:this._elem.innerText,voice:this._voice,pitch:1,rate:1,volume:1});case 5:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){se(i,n,r,a,u,"next",t)}function u(t){se(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"setSrc",value:function(t){}},{key:"pause",value:function(){Mt.pause()}},{key:"dispose",value:function(){this._elem.removeEventListener("click",this.handler),this._elem.classList.remove("sd-speak-enabled"),this._elem.removeAttribute("data-active")}}],n&&ce(e.prototype,n),r&&ce(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pe(t){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pe(t)}function he(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==pe(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===pe(i)?i:String(i)),r)}var o,i}var de=function(){function t(e,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.src="",null!=e){var r=e.dataset;this.src=r.src||""}!this.src&&n&&(this.src=n),this.elem=e}var e,n,r;return e=t,(n=[{key:"play",value:function(){this.audioElement?this.audioElement.play():(this.audioElement=new Audio(this.src),this.audioElement.play(),this.elem||this.bindHandler())}},{key:"setSrc",value:function(t){this.audioElement&&(this.audioElement.src=t)}},{key:"bindHandler",value:function(){var t=this;this.handler=function(e){e.preventDefault(),t.play()},this.elem&&this.elem.addEventListener("click",this.handler)}},{key:"pause",value:function(){this.audioElement&&this.audioElement.pause()}},{key:"dispose",value:function(){this.audioElement=null,this.handler&&this.elem&&this.elem.removeEventListener("click",this.handler)}}])&&he(e.prototype,n),r&&he(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ve(t){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ve(t)}function ye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==ve(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===ve(i)?i:String(i)),r)}var o,i}var me={en:"definition",ca:"definicio",es:"definicion"},be="https://www.wordreference.com/",ge={us:"United States",uk:"United Kingdom",irish:"Irish",scot:"Scottish",jamaica:"Jamaica",es:"España",castellano:"España",ca:"Catalunya",mexico:"México",argentina:"Argentina"};function we(t){return ge[t]||t}var xe,Ee=function(t,e){return new Promise((function(n,r){if(t in me){var o=be+me[t]+"/"+encodeURIComponent(e);me[t]?$.ajax({method:"GET",dataType:"html",url:o}).done((function(e){var o=e.match(/<script>var\s+audioFiles\s+=(.*?)\]/m);if(o&&2==o.length){var i=o[1].trim().replace(/'/g,'"');i.endsWith(",")&&(i=i.substring(0,i.length-1));var a=JSON.parse(i+"]"),u=(s=t,c={},a.forEach((function(t){var e=t.split("/"),n=e[e.indexOf(s)+1].toLowerCase();c[n]||(c[n]={name:we(n),url:p(be,t)})})),c);n(u)}else{var s,c;r("cannot find audioFiles in page")}})).fail((function(t){r(t)})):r()}else r()}))},Oe=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elem=e,e.classList.add("sd-speak-enabled"),this.init()}var e,n,r;return e=t,(n=[{key:"lazyLoad",value:function(t){var e,n=this;if(null==this.audioElement){var r=null===(e=this.$dropdown)||void 0===e?void 0:e.find(".dropdown-menu");Ee("en",this.elem.innerText).then((function(e){var o=Object.keys(e);if(o.length>0){var i=e[o[0]],a=p(be,i.url);n.audioElement=new de(void 0,a),o.length>1&&o.forEach((function(t){var o=e[t],i=$('<a class="dropdown-item" data-variant="'.concat(t,'" href="#">').concat(o.name,"</a>"));i.on("click",(function(t){t.preventDefault();var r=t.target.dataset.variant||"",o=e[r];n.audioElement&&(o.url,n.audioElement.setSrc(o.url),n.audioElement.play())})),r&&r.append(i)}))}else console.warn("Fallback on GTTSPlayer US"),n.elem.setAttribute("href","#speak_en-US"),n.audioElement=new qt(n.elem);t&&n.audioElement.play()}),(function(t){n.audioElement=new qt(n.elem),n.elem.setAttribute("href","#speak_en-US"),n.audioElement.play()}))}}},{key:"init",value:function(){var t=this,e=a();this.$dropdown=$('\n        <div class="dropdown" style="display:inline-block;">\n          <button class="btn btn-secondary btn-sm" style="margin:2px;padding:4px;height:15px;" type="button" id="dmb_'.concat(e,'" data-toggle="dropdown" data-boundary="viewport" aria-haspopup="true" aria-expanded="false">\n          <i class="fas fa fa-globe" style="transform: translateY(-9px);font-size:90%;"></i>\n          </button>\n          <div class="dropdown-menu" aria-labelledby="dmb_').concat(e,'"> \n          </div>\n        </div>')),this.$dropdown.insertAfter($(this.elem)),this.$dropdown.find("button").on("click",(function(e){t.lazyLoad()})),this.handler=function(e){e.preventDefault(),null==t.audioElement?t.lazyLoad(!0):t.play()},this.elem.addEventListener("click",this.handler)}},{key:"play",value:function(){this.audioElement&&this.audioElement.play()}},{key:"setSrc",value:function(t){this.audioElement&&(this.audioElement.src=t)}},{key:"pause",value:function(){this.audioElement&&this.audioElement.pause()}},{key:"dispose",value:function(){var t;this.pause(),this.elem.classList.remove("sd-speak-enabled"),this.handler&&(this.elem.removeEventListener("click",this.handler),this.handler=null),null===(t=this.$dropdown)||void 0===t||t.find("button").off()}}])&&ye(e.prototype,n),r&&ye(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Se(t){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Se(t)}function ke(){ke=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new k(o||[]);return r(a,"_invoke",{value:x(t,n,u)}),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function p(){}function h(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(_([])));m&&m!==e&&n.call(m,i)&&(v=m);var b=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,a,u){var s=l(t[r],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==Se(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return o("throw",t,a,u)}))}u(s.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return L()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=E(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=l(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=d,r(b,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:h,configurable:!0}),h.displayName=s(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),s(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new w(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),s(b,u,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=_,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function _e(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function Le(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==Se(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Se(i)?i:String(i)),r)}var o,i}function je(t,e){return je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},je(t,e)}function Pe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ce(t);if(e){var o=Ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Te(this,n)}}function Te(t,e){if(e&&("object"===Se(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ce(t){return Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ce(t)}var Ae=Y({name:"speak",author:"Josep Mulet Pol",version:"2.6",query:'a[href^="#speak_"],[role="snptd_speak"],[data-snptd="speak"]',use$:!0})(xe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&je(t,e)}(u,t);var e,n,r,o,i,a=Pe(u);function u(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),a.call(this,t)}return e=u,n=[{key:"init",value:(o=ke().mark((function t(){var e,n,r,o,i;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("1"!==(n=this.parent.dataset).active){t.next=3;break}return t.abrupt("return");case 3:if(n.active="1",!n.src){t.next=7;break}return this.audioPlayer=new de(this.parent),t.abrupt("return");case 7:if(null===(e=this.parent.getAttribute("href"))||void 0===e||!e.endsWith("#speak_en-wr")){t.next=15;break}if(!(this.parent.innerText.trim().indexOf(" ")<0)){t.next=13;break}return this.audioPlayer=new Oe(this.parent),t.abrupt("return");case 13:console.error("WordReference only works for single words."),this.parent.setAttribute("href","#speak_en-US");case 15:if(r=Mt.detect(),o=null!=r.speechSynthesis&&null!=r.speechSynthesisUtterance,this.audioPlayer=null,!o){t.next=26;break}return t.next=21,Mt.init({maxTimeout:5e3,interval:250});case 21:t.sent?(i=Mt.voices()).length?this.audioPlayer=new fe(this.parent,i):(console.warn("EasySpeech.voices returns no voices. Fallback on GTTS player."),this.audioPlayer=new qt(this.parent)):(console.warn("EasySpeech.init returns false. Fallback on GTTS player."),this.audioPlayer=new qt(this.parent)),window.addEventListener("unload",(function(){window.speechSynthesis.cancel()})),t.next=28;break;case 26:console.warn("Web Speech Synthesis is not supported. Fallback on GTTS player instead."),this.audioPlayer=new qt(this.parent);case 28:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){_e(i,n,r,a,u,"next",t)}function u(t){_e(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"dispose",value:function(){"1"===this.parent.dataset.active&&(this.parent.removeAttribute("data-active"),this.audioPlayer&&this.audioPlayer.dispose(),this.audioPlayer=null)}},{key:"play",value:function(){this.audioPlayer&&this.audioPlayer.play()}},{key:"setSrc",value:function(t){}},{key:"pause",value:function(){this.audioPlayer&&this.audioPlayer.pause()}}],n&&Le(e.prototype,n),r&&Le(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(U))||xe;function Ne(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[n],t[n]=r}}function Ie(t){t%=2147483647;var e=function(){return((t=16807*t%2147483647)-1)/2147483646};return e(),e(),e(),e}function Re(t,e){for(var n=Math.min(t.length,e.length),r=[],o=0;o<n;o++)r.push([t[o],e[o]]);return r}function ze(t){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ze(t)}function qe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==ze(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===ze(i)?i:String(i)),r)}var o,i}var Me,De=function(){function t(e,n,r,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pi=n,this.forceDifferent=r||[],this.workingMode=o||"urandom",this.seed=i||1,e.style.border="none",this.theTabMenu=e.querySelector("ul.nav.nav-tabs"),this.theLinks=this.theTabMenu.querySelector("li"),this.theContentOpts=e.querySelectorAll("div.tab-content > div"),this.numOpts=this.theContentOpts.length,0===this.numOpts&&(console.error("ERROR: SmartTabMenu, theContentOpts is Empty!"),this.numOpts=1)}var e,n,r;return e=t,(n=[{key:"showUser",value:function(t,e){this.pi.isTeacher?this.theTabMenu.style.display="none":this.theTabMenu.remove();for(var n=-1,r=0,o=this.forceDifferent.length;r<o;r++){for(var i=this.forceDifferent[r],a=0,u=i.length;a<u;a++)if(i[a]==e){n=a;break}if(n>=0)break}var s=0;"urandom"===this.workingMode||"lrandom"===this.workingMode?n>=0?s=n%this.numOpts:null!=t&&(s=Math.floor(t()*this.numOpts)):this.workingMode.startsWith("fixed")?this.workingMode.indexOf(":")>0&&(s=c(this.workingMode.split(":")[1].trim(),0)):console.error("ERROR: Unknown working mode ",this.workingMode,", choosing first element");for(var l=0,f=this.theContentOpts.length;l<f;l++){var p=this.theContentOpts[l],h=this.theLinks[l];l==s?(p.classList.add("active"),p.style.display="",h&&h.classList.add("active")):(p.classList.remove("active"),this.pi.isTeacher?p.style.display="none":p.remove(),h&&h.classList.remove("active"))}}},{key:"clear",value:function(){this.theTabMenu.style.display="";for(var t=0,e=this.theContentOpts.length;t<e;t++){var n=this.theContentOpts[t],r=this.theLinks[t];n.style.display="",0==t?(n.classList.add("active"),r&&(r.style.display="",r.classList.add("active"))):(n.classList.remove("active"),r&&(r.style.display="",r.classList.remove("active")))}}},{key:"dispose",value:function(){this.clear()}}])&&qe(e.prototype,n),r&&qe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ge(t){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ge(t)}function Fe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $e(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fe(Object(n),!0).forEach((function(e){Je(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ye(r.key),r)}}function He(t,e){return He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},He(t,e)}function Ue(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=We(t);if(e){var o=We(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ve(this,n)}}function Ve(t,e){if(e&&("object"===Ge(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ze(t)}function Ze(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function We(t){return We=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},We(t)}function Je(t,e,n){return(e=Ye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ye(t){var e=function(t,e){if("object"!==Ge(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ge(e)?e:String(e)}var Qe,Xe=Y({name:"talea",author:"Josep Mulet Pol",version:"2.2",use$:!1})(Me=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&He(t,e)}(i,t);var e,n,r,o=Ue(i);function i(t){var e;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Je(Ze(e=o.call(this,t)),"seed",1),Je(Ze(e),"workingMode","urandom"),Je(Ze(e),"smartMenus",[]),Je(Ze(e),"mapStudents",{}),e.pi=function(){if(!document.querySelector)return{userId:1,userFullname:"",courseId:1,isTeacher:!1,courseName:"",site:""};var t=null,e=null,n=document.querySelector("[data-userid]");n&&(t=n.getAttribute("data-userid"));var r=document.getElementsByClassName("usertext");if(r&&r.length)e=r[0].innerText;else{var o=document.querySelector("div.logininfo > a");o&&(e=o.innerText)}t||(t="1",e="Usuari convidat");var i=null!=document.querySelector('.usermenu li a[href*="switchrole"]')?1:0;i||(i=null!=document.querySelector("form.editmode-switch-form")?1:0),i||(i=null!=document.querySelector(".teacherdash.nav-item.nav-link")?1:0);var a="",u="",s=document.querySelector(".homelink > a");if(null!=s)u=s.innerText,a=function(t){for(var e={},n=t.substring(1).split("&"),r=0;r<n.length;r++){var o=n[r].split("=");o[0]&&(e[o[0]]=o[1]||"true")}return e}("?"+((s.getAttribute("href")||" ? ").split("?")[1]||"")).id;else{window.M&&window.M.cfg&&(a=window.M.cfg.courseId);var l=document.querySelector("#page-navbar ol > li:first-child > a");null!=l&&(u=l.innerText)}var f=(location.href.split("?")[0]||"").replace("/mod/book/view.php","");return{userId:c(t,1),userFullname:e||"test-user",isTeacher:i>0,site:f,courseName:u||"test-course",courseId:c(a,1)}}(),e.pi.isTeacher&&t.dataset.debug){for(var n=JSON.parse(t.dataset.debug),r=Object.keys(n),a=0,u=r.length;a<u;a++){var l=r[a];e.pi[l]=n[l]}e.pi;var f=document.createElement("div");f.innerHTML="<p>DEBUG INFO::<br>  "+JSON.stringify(e.pi)+"</p>",t.append(f)}if(e.pi.userId>1)try{s((function(){var t=$e({},e.pi);t.isTeacher=t.isTeacher?1:0,$.ajax({method:"POST",url:"https://piworld.es/iedibapi/p1/users/create",data:t,dataType:"json"}).done((function(t){}))}))}catch(t){console.error(t)}return e.parent=t,e}return e=i,(n=[{key:"init",value:function(){var t=this,e=this.parent.dataset;if("1"!==e.active){e.active="1",this.seed=c(e.seed||"1",1);var n=JSON.parse(e.different||"[]");this.workingMode=e.mode||"urandom";var r=this.parent.querySelectorAll("div.iedib-tabmenu:not(.talea-skip)");this.smartMenus=[];for(var o=0,i=r.length;o<i;o++)this.smartMenus.push(new De(r[o],this.pi,n,this.workingMode,this.seed));var a=document.createElement("p");if(a.id="talea_name_"+this.parent.id,a.style.setProperty("font-weight","bold"),this.parent.prepend(a),this.pi.isTeacher){a.innerText="Sense filtre";var u=$e({},this.pi);u.isTeacher=u.isTeacher?1:0,this.setupTeacher();try{s((function(){$.ajax({method:"POST",url:"https://piworld.es/iedibapi/p1/users/list",data:u,dataType:"json"}).done((function(e){var n=$("#list_controls_userid_"+t.parent.id);t.mapStudents={},t.mapStudents[-1]="Sense filtre";for(var r=0,o=e.length;r<o;r++){var i=e[r],a=c(i.userid,0);t.mapStudents[a]=i.userfullname,n.append($('<option value="'+i.userid+'">'+i.userfullname+"</option>"))}}))}))}catch(t){console.error(t)}}else a.innerText="Tasca de "+(this.pi.userFullname||"???"),this.showUser(this.pi.userId)}}},{key:"showUser",value:function(t){if(this.pi.isTeacher){var e=document.querySelector("#talea_name_"+this.parent.id);e&&this.mapStudents&&this.mapStudents[t]?e.innerHTML="Tasca de "+this.mapStudents[t]:e&&(e.innerHTML="Tasca d'usuari #"+t)}var n=null;"urandom"===this.workingMode?n=Ie(t*this.seed):"lrandom"===this.workingMode&&(n=Ie(this.seed)),this.smartMenus.forEach((function(e){return e.showUser(n,t)}))}},{key:"clear",value:function(){if(this.pi.isTeacher){var t=document.querySelector("#talea_name_"+this.parent.id);t&&(t.innerHTML="Sense filtre")}this.smartMenus.forEach((function(t){return t.clear()}))}},{key:"setupTeacher",value:function(){var t=this,e=document.createElement("div"),n=this.parent.id;e.id="talea_controls_"+n,this.parent.prepend(e);var r='<input type="text" class="form-control" placeholder="Nom o id de l\'estudiant..." list="list_controls_userid_'+n+'" id="controls_userid_'+n+'"><br>';r+='<datalist id="list_controls_userid_'+n+'">',r+='<option value="-1">Sense filtre</option>',r+="</datalist>",e.innerHTML=r;var o=document.querySelector("#controls_userid_"+n);o&&(this.controlsListener=function(){var e=c(o.value+"",-2);-2!==e&&(e<0?t.clear():t.showUser(e))},o.addEventListener("change",this.controlsListener))}},{key:"dispose",value:function(){if("1"===this.parent.dataset.active){this.clear();var t=this.parent.id,e=document.querySelector("#talea_name_"+t);if(e&&e.remove(),this.controlsListener){var n=document.querySelector("#controls_userid_"+t);n&&n.removeEventListener("change",this.controlsListener),this.controlsListener=void 0}var r=document.querySelector("#talea_controls_"+t);r&&r.remove(),this.parent.removeAttribute("data-active")}}}])&&Be(e.prototype,n),r&&Be(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(U))||Me,Ke={ca:{check:"Comprova",chooseone:"Tria una opció",right:"Ben fet!",wrong:"Ho sento. Intentau-ho de nou",error:"Hi ha hagut un error processant la resposta",random_msg:"Aquestes activitats contenen preguntes aleatòries que es generen cada vegada que es carrega la pàgina.",open_editor:"Obrir l'editor matemàtic",math_editor:"Editor matemàtic",sym_notallowed:"El símbol no està permès",sym_once:"El símbol només es pot emprar una vegada",error_cantprocess:"Error quan es processava la petició",right_answer:"La resposta és correcta",wrong_answer:"La resposta és incorrecta",error_verifying:"Error quan es verificava la resposta",expected_ans:"S'esperava la resposta"},es:{check:"Comprueba",chooseone:"Elige una opción",right:"¡Bien hecho!",wrong:"Lo siento. Inténtalo de nuevo.",error:"Ha habido un error procesando la respuesta",random_msg:"Estas actividades contienen preguntas aleatorias que se generan cada vez que se carga la página.",open_editor:"Abrir el editor matemático",math_editor:"Editor matemático",sym_notallowed:"El símbolo no esta permitido",sym_once:"El símbolo solo se permite una vez",error_cantprocess:"Error cuando se procesaba la petición",right_answer:"Respuesta correcta",wrong_answer:"Respuesta incorrecta",error_verifying:"Error cuando se verificaba la respuesta",expected_ans:"Se esperaba la respuesta"},en:{check:"Check",chooseone:"Choose one",right:"Well done!",wrong:"Try it again.",error:"There has been an error processing the answer",random_msg:"These activities contain random questions that are generated at every page load.",open_editor:"Open math editor",math_editor:"Math editor",sym_notallowed:"The symbol is not allowed",sym_once:"The symbol can only be used once",error_cantprocess:"Error processing the request",right_answer:"Right answer",wrong_answer:"Wrong answer",error_verifying:"Error verifying the answer",expected_ans:"The expected answer is"},fr:{check:"Vérifier",chooseone:"Choisis une option",right:"¡Bien hecho!",wrong:"Lo siento. Inténtalo de nuevo.",error:"Ha habido un error procesando la respuesta",random_msg:"Estas actividades contienen preguntas aleatorias que se generan cada vez que se carga la página.",open_editor:"Open math editor",math_editor:"Math editor",sym_notallowed:"The symbol is not allowed",sym_once:"The symbol can only be used once",error_cantprocess:"Error processing the request",right_answer:"Right answer",wrong_answer:"Wrong answer",error_verifying:"Error verifying the answer",expected_ans:"The expected answer is"},de:{check:"Prüfen",chooseone:"Wähle eine option",right:"¡Bien hecho!",wrong:"Lo siento. Inténtalo de nuevo.",error:"Ha habido un error procesando la respuesta",random_msg:"Estas actividades contienen preguntas aleatorias que se generan cada vez que se carga la página.",open_editor:"Open math editor",math_editor:"Math editor",sym_notallowed:"The symbol is not allowed",sym_once:"The symbol can only be used once",error_cantprocess:"Error processing the request",right_answer:"Right answer",wrong_answer:"Wrong answer",error_verifying:"Error verifying the answer",expected_ans:"The expected answer is"}};function tn(t,e,n){var r=Ke[t];r||(r=Ke.ca);var o=r[e]||e;return n&&(o+=" "+n),o}function en(t){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},en(t)}function nn(t){return function(t){if(Array.isArray(t))return rn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return rn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function on(t){var e=[];return t.split(".").forEach((function(t){var n=t.split("["),r=n[0].trim();r.length&&(e.push(r),n.length>1&&e.push("["+n[1].trim()))})),e}function an(t,e){if(0===t.length)return null;if(1===t.length)return e;for(var n=e,r=0,o=t.length-1;null!=n&&r<o;){var i=t[r];if(i.indexOf("[")>=0){var a=parseInt(i.replace(/[[\]]/g,""));if(Array.isArray(n)){var u=n;a<u.length?n=u[a]:(console.error("Index out of bounds ",t.join(""),a,u),n=null)}else console.error("Not an array",t.join(""),n),n=null}else{var s=n;n=null!=s[i]?s[i]:null}r++}return n}function un(t,e,n){var r=an(t,e),o=!1;if(null!=r){var i=t[t.length-1];if(i.indexOf("[")>=0){if(Array.isArray(r)){var a=r,u=parseInt(i.replace(/[[\]]/g,""));u<a.length&&(a[u]=n,o=!0)}}else if("object"===en(r))r[i]=n,o=!0}return o}function sn(t){return sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sn(t)}function cn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ln(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==sn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==sn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===sn(i)?i:String(i)),r)}var o,i}!function(t){t[t.CLOSE=0]="CLOSE",t[t.CANCEL_ACCEPT=1]="CANCEL_ACCEPT",t[t.CANCEL_ACCEPT_FORM=2]="CANCEL_ACCEPT_FORM",t[t.CANCEL_ACCEPT_FORM_VALIDATION=3]="CANCEL_ACCEPT_FORM_VALIDATION"}(Qe||(Qe={}));var fn=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Diàleg";cn(this,t),this.type=n;var o=n===Qe.CANCEL_ACCEPT_FORM||n===Qe.CANCEL_ACCEPT_FORM_VALIDATION;this.hasValidation=n===Qe.CANCEL_ACCEPT_FORM_VALIDATION;var i="",a="";o&&(i="<form".concat(this.hasValidation?' class="needs-validation" novalidate':"",">"),a="</form>");var u='<button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">'.concat(n===Qe.CLOSE?"Tancar":"Cancel·lar","</button>");n!==Qe.CLOSE&&(u+='<button type="'.concat(o?"submit":"button",'" class="btn btn-sm btn-primary">Acceptar</button>')),this.elem=$('\n            <div class="modal fade moodle-dialogue" id="'.concat(e,'" tabindex="-1" aria-labelledby="bsdialog" aria-hidden="true">\n            <div class="modal-dialog">\n                <div class="modal-content">\n                  <div class="modal-header">\n                    <h5 class="modal-title">').concat(r,'</h5>\n                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                      <span aria-hidden="true">&times;</span>\n                    </button>\n                  </div>\n                  ').concat(i,'\n                  <div class="modal-body" style="max-height:400px;overflow-y:auto;font-size:90%;">\n                  </div>\n                  <div class="modal-footer">\n                    ').concat(u,"\n                  </div>\n                  ").concat(a,"\n                </div>\n                </div>")),this.body=this.elem.find("div.modal-body"),this.header=this.elem.find("h5.modal-title"),this.primaryButton=this.elem.find("button.btn.btn-primary"),this.form=this.elem.find("form"),this.validationDiv=this.elem.find("div.alert.alert-danger"),$("body").append(this.elem)}var e,n,r;return e=t,n=[{key:"resetDialog",value:function(){var t;this.body.html(""),null===(t=this.primaryButton)||void 0===t||t.off(),this.form&&this.form.off(),this.validationDiv.css("display","none"),this.validationDiv.html("")}},{key:"setBody",value:function(t){var e=this;this.resetDialog();var n=$(t);this.validationDiv=$('<div class="alert alert-danger" style="display:none;max-height:100px;overflow-y:auto;"></div>'),this.body.append(this.validationDiv),this.body.append(n),this.primaryButton&&(this.form?this.form.on("submit",(function(t){if(t.preventDefault(),t.stopPropagation(),e.hasValidation){e.form.addClass("was-validated"),e.updateValues();var n=e.customValidation();if(n&&null!=e.validationDiv)return e.validationDiv.css("display",""),e.validationDiv.html(n),void(e.validationDiv.offset()&&e.body.animate({scrollTop:0}));e.form[0].checkValidity()&&(e.elem.modal("hide"),e.acceptCb&&e.acceptCb(e.scope))}else e.updateValues(),e.acceptCb&&e.acceptCb(e.scope)})):this.primaryButton.on("click",(function(t){t.preventDefault(),e.acceptCb&&e.acceptCb(),e.elem.modal("hide")})))}},{key:"setValues",value:function(t){this.scope=t,this.body.find("input[id], textarea[id], select[id]").each((function(e,n){var r=(n.getAttribute("id")||"").split("_");if(!(r.length<2)){var o=function(t,e){var n=an([].concat(nn(t),[""]),e);return null!=n?["string","boolean","number"].includes(en(n))?n+"":JSON.stringify(n):null}(on(r[r.length-1]),t);if("TEXTAREA"===n.nodeName)n.value=o||"";else{var i=n,a=(i.getAttribute("type")||"").toLowerCase();"radio"===a||"checkbox"===a?i.checked="true"===o:i.value=o||""}}}))}},{key:"updateValues",value:function(){var t=this;null!=this.scope&&this.body.find("input[id], textarea[id], select[id]").each((function(e,n){var r=(n.getAttribute("id")||"").split("_");if(!(r.length<2)){var o=on(r[r.length-1]);if("TEXTAREA"===n.nodeName){var i=n.value||"";un(o,t.scope||{},i)}else{var a=n,u=(a.getAttribute("type")||"").toLowerCase(),s="radio"===u||"checkbox"===u;un(o,t.scope||{},s?a.checked:a.value)}}}))}},{key:"setBodyBindings",value:function(t,e){var n=l("div",{style:"width:100%;padding:10px",html:t});this.setBody(n),this.setValues(e)}},{key:"customValidation",value:function(){return null}},{key:"setTitle",value:function(t){this.header.html(t)}},{key:"show",value:function(t){var e=this;this.form.removeClass("was-validated"),this.elem.modal("show"),window.setTimeout((function(){return e.body.scrollTop(0)}),400),this.acceptCb=t}}],n&&ln(e.prototype,n),r&&ln(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pn(t){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pn(t)}function hn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==pn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==pn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===pn(i)?i:String(i)),r)}var o,i}function dn(t,e){return dn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dn(t,e)}function vn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mn(t);if(e){var o=mn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yn(this,n)}}function yn(t,e){if(e&&("object"===pn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function mn(t){return mn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mn(t)}var bn,gn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dn(t,e)}(i,t);var e,n,r,o=vn(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t,Qe.CLOSE,"")}return e=i,n&&hn(e.prototype,n),r&&hn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(fn),wn={};function xn(t,e){var n=wn[t];return n||(n=new gn(t),wn[t]=n),n.setTitle(e),n}function En(t){return En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},En(t)}function On(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kn(r.key),r)}}function Sn(t,e,n){return(e=kn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kn(t){var e=function(t,e){if("object"!==En(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==En(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===En(e)?e:String(e)}!function(t){t[t.UNTOUCHED=0]="UNTOUCHED",t[t.PENDING=1]="PENDING",t[t.ERROR=2]="ERROR",t[t.WRONG=3]="WRONG",t[t.RIGHT=4]="RIGHT"}(bn||(bn={}));var _n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Sn(this,"status",bn.UNTOUCHED),Sn(this,"lang","ca"),this.spanStatus=document.createElement("span"),this.spanStatus.setAttribute("data-toggle","tooltip"),this.spanHint=l("span",{dataToggle:"tooltip",class:"ib-quizz-hint",title:"Mostrar pista",style:"display:none;",html:'<i class="'.concat("fa fas fa-life-ring",'"></i>')}),this.feedbackSpan=l("span",{class:"ib-quizz-feedback",dataToggle:"tooltip",title:"Mostrar solució",style:"display:none;",html:'<i class="'.concat("fa fas fa-question",'"></i>')}),this.divBlock=l("div",{style:"display:inline-block;"}),this.divBlock.append(this.spanStatus),this.divBlock.append(this.spanHint),this.divBlock.append(this.feedbackSpan)}var e,n,r;return e=t,(n=[{key:"setStatus",value:function(t,e){this.status=t;var n=this.spanStatus.classList,r=e;switch(t){case bn.UNTOUCHED:case bn.PENDING:n.remove("ib-quizz-right","ib-quizz-wrong","ib-quizz-error"),this.spanStatus.innerHTML="";break;case bn.RIGHT:n.add("ib-quizz-right"),r||(r=tn(this.lang,"right")),this.spanStatus.innerHTML='<i class="'.concat("fa fas fa-check",'"></i>');break;case bn.WRONG:n.add("ib-quizz-wrong"),r||(r=tn(this.lang,"wrong")),this.spanStatus.innerHTML='<i class="'.concat("fa fas fa-times",'"></i>');break;default:n.add("ib-quizz-error"),r||(r=tn(this.lang,"error")),this.spanStatus.innerHTML='<i class="'.concat("fa fas fa-exclamation",'"></i>')}r&&this.spanStatus.setAttribute("title",r)}},{key:"getStatus",value:function(){return this.status}},{key:"setLang",value:function(t){this.lang=t}},{key:"setHint",value:function(t){this.spanHint.addEventListener("click",(function(){var e=xn("ib-quizz-modal-dlg","Una pista..."),n=l("div",{html:t});e.setBody(n),e.show()})),this.spanHint.style.setProperty("display","")}},{key:"setFeedback",value:function(t){this.feedbackSpan.addEventListener("click",(function(){var e=xn("ib-quizz-modal-dlg","Retroacció"),n=l("div",{html:t});e.setBody(n),e.show()})),this.spanHint.style.setProperty("display","none"),this.feedbackSpan.style.setProperty("display","")}},{key:"getElement",value:function(){return this.divBlock}}])&&On(e.prototype,n),r&&On(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ln(t,e,n){return Ln=jn()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&Pn(o,n.prototype),o},Ln.apply(null,arguments)}function jn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Pn(t,e){return Pn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pn(t,e)}var Tn={};function Cn(t,e,n){return window.nerdamer&&!Tn.N&&(Object.defineProperty(Tn,"N",{value:window.nerdamer,enumerable:!0,configurable:!1,writable:!1}),Object.getOwnPropertyNames(window.nerdamer).forEach((function(t){void 0===Tn[t]&&(Tn[t]=window.nerdamer[t])}))),window.mathjs&&!Tn.M&&Object.defineProperty(Tn,"M",{value:window.mathjs,enumerable:!0,configurable:!1,writable:!1}),e=Object.assign(e||{},Tn),function(t,e,n){e=e||{},n=n||{};var r=Object.keys(e),o=Object.values(e);return Ln(Function,r.concat(['"use strict"\n'+t])).apply(n,o)}("var _this=this;\n"+t.replace(/#/g,"_this."),e,n)}function An(t){return t?t.replace(/V\[(\d+)\]/g,(function(t,e){var n=parseInt(e);return"\\left("+new Array(n).fill("\\MathQuillMathField{}").join(",")+"\\right)"})).replace(/M\[(\d+)x(\d+)\]/g,(function(t,e,n){var r=parseInt(e),o=parseInt(n),i=new Array(r).fill("\\MathQuillMathField{}").join(" & ");return"\\begin{pmatrix}"+new Array(o).fill(i).join(" \\\\ ")+"\\end{pmatrix}"})).replace(/\?/g,"\\MathQuillMathField{}"):t}Object.getOwnPropertyNames(Math).forEach((function(t){Tn[t]=Math[t]})),Object.defineProperty(Tn,"alea",{value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.length;if(0===r)return Math.random()<.5?-1:1;if(1===r){if(Array.isArray(e[0])){var o=Math.floor(Math.random()*e[0].length);return e[0][o]}if("number"==typeof e[0])return Math.floor(2*e[0]*Math.random())+e[0]}else if(r>=2){var i=e[0],a=e[1],u=1,s=0,c=(a-i)*Math.random();return 3===r&&(s=(s=Math.abs(e[2]))>8?8:s,u=Math.pow(10,s)),c=+(Math.round(c*u)/u+i).toFixed(s)}},enumerable:!0,configurable:!1,writable:!1}),Object.defineProperty(Tn,"dec",{value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Math.pow(10,e);return Math.round(t*n)/n},enumerable:!0,configurable:!1,writable:!1});function Nn(t,e){if(!e)return t;var n=t.replace(/#([a-zA-Z0-9_]+)($|[ .,"'])/gm,(function(t,n,r){return null!=e[n]?("function"==typeof(o=e[n]).toTeX?o.toTeX().replace(/vmatrix/g,"matrix"):"function"==typeof o.toString?o.toString():o+"")+(r||""):t;var o}));return n=n.replace(/\${2}(.*)?\${2}/gm,(function(t,e){return"\\["+e+"\\]"})).replace(/\$(.*)?\$/gm,(function(t,e){return"\\("+e+"\\)"}))}function In(t){return In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},In(t)}function Rn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Un(r.key),r)}}function qn(t,e){if(e&&("object"===In(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Mn(t)}function Mn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dn(t){var e="function"==typeof Map?new Map:void 0;return Dn=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return Gn(t,arguments,Bn(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),$n(r,t)},Dn(t)}function Gn(t,e,n){return Gn=Fn()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&$n(o,n.prototype),o},Gn.apply(null,arguments)}function Fn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function $n(t,e){return $n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$n(t,e)}function Bn(t){return Bn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bn(t)}function Hn(t,e,n){return(e=Un(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Un(t){var e=function(t,e){if("object"!==In(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==In(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===In(e)?e:String(e)}var Vn,Zn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$n(t,e)}(u,t);var e,n,r,o,i,a=(e=u,n=Fn(),function(){var t,r=Bn(e);if(n){var o=Bn(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return qn(this,t)});function u(){var t;Rn(this,u);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Hn(Mn(t=a.call.apply(a,[this].concat(n))),"lang","ca"),Hn(Mn(t),"_syncCount",0),Hn(Mn(t),"attempts",0),Hn(Mn(t),"hintSet",!1),Hn(Mn(t),"feedbackSet",!1),t}return r=u,(o=[{key:"init",value:function(t){if(t){var e=document.createElement("span");e.innerHTML=t,this.prepend(e)}}},{key:"connectedCallback",value:function(){this.innerHTML="",this.classList.add("d-print-none"),this.statusDisplay=new _n;try{this.widgetConfig=d(this.dataset.src)}catch(t){return void console.error(t)}this.widgetConfig,this._syncCount++,3===this._syncCount&&this.render()}},{key:"reflowLatex",value:function(){window.MathJax&&(window.MathJax.typesetPromise&&window.MathJax.typesetPromise(),window.MathJax.Hub&&window.MathJax.Hub.Queue&&window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub]))}},{key:"setLang",value:function(t){var e;this.lang=t,null===(e=this.statusDisplay)||void 0===e||e.setLang(t),this._syncCount++,3===this._syncCount&&this.render()}},{key:"setGroupContext",value:function(t){var e,n,r,o;this.groupContext=t,this.groupContext,this._syncCount++,Object.keys(t._s).length&&(null!==(e=this.widgetConfig)&&void 0!==e&&e.hint&&(this.widgetConfig.hint=Nn(this.widgetConfig.hint,t._s)),null!==(n=this.widgetConfig)&&void 0!==n&&n.fbk&&(this.widgetConfig.fbk=Nn(this.widgetConfig.fbk,t._s)),null!==(r=this.widgetConfig)&&void 0!==r&&r.ini&&(this.widgetConfig.ini=Nn(this.widgetConfig.ini,t._s)),null!==(o=this.widgetConfig)&&void 0!==o&&o.pre&&(this.widgetConfig.pre=Nn(this.widgetConfig.pre,t._s))),3===this._syncCount&&this.render()}},{key:"setStatus",value:function(t,e){var n;null===(n=this.statusDisplay)||void 0===n||n.setStatus(t,e)}},{key:"incAttempts",value:function(){var t,e,n,r;this.attempts++;var o,i,a,u,s=(null===(t=this.groupContext)||void 0===t?void 0:t.o.hint)||0,c=(null===(e=this.groupContext)||void 0===e?void 0:e.o.ans)||0;!this.hintSet&&s>0&&this.attempts>=s&&null!==(n=this.widgetConfig)&&void 0!==n&&n.hint&&(this.hintSet=!0,null===(o=this.statusDisplay)||void 0===o||o.setHint(null===(i=this.widgetConfig)||void 0===i?void 0:i.hint)),!this.feedbackSet&&c>0&&this.attempts>=c&&null!==(r=this.widgetConfig)&&void 0!==r&&r.fbk&&(this.feedbackSet=!0,null===(a=this.statusDisplay)||void 0===a||a.setFeedback(null===(u=this.widgetConfig)||void 0===u?void 0:u.fbk))}},{key:"showFeedback",value:function(){var t,e,n;!this.feedbackSet&&null!==(t=this.widgetConfig)&&void 0!==t&&t.fbk&&(this.feedbackSet=!0,null===(e=this.statusDisplay)||void 0===e||e.setFeedback(null===(n=this.widgetConfig)||void 0===n?void 0:n.fbk))}}])&&zn(r.prototype,o),i&&zn(r,i),Object.defineProperty(r,"prototype",{writable:!1}),u}(Dn(HTMLElement));function Wn(t){return Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wn(t)}function Jn(){Jn=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new k(o||[]);return r(a,"_invoke",{value:x(t,n,u)}),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function p(){}function h(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(_([])));m&&m!==e&&n.call(m,i)&&(v=m);var b=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,a,u){var s=l(t[r],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==Wn(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return o("throw",t,a,u)}))}u(s.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return L()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=E(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=l(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=d,r(b,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:h,configurable:!0}),h.displayName=s(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),s(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new w(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),s(b,u,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=_,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function Yn(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function Qn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ur(r.key),r)}}function Kn(){return Kn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=tr(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Kn.apply(this,arguments)}function tr(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ir(t)););return t}function er(t,e){return er=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},er(t,e)}function nr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ir(t);if(e){var o=ir(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return rr(this,n)}}function rr(t,e){if(e&&("object"===Wn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return or(t)}function or(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ir(t){return ir=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ir(t)}function ar(t,e,n){return(e=ur(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ur(t){var e=function(t,e){if("object"!==Wn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Wn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Wn(e)?e:String(e)}var sr;Q({elementName:"ib-quizz-dropdown",classes:["ib-quizz-elem"],styles:{display:"inline-block"}})(Vn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&er(t,e)}(u,t);var e,n,r,o,i,a=nr(u);function u(){var t;Qn(this,u);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ar(or(t=a.call.apply(a,[this].concat(n))),"userAns",-1),t}return e=u,n=[{key:"enable",value:function(t){this.button&&(this.button.disabled=!t)}},{key:"getUserInput",value:function(){return this.userAns+""}},{key:"displayRightAnswer",value:function(){this.enable(!1)}},{key:"check",value:(o=Jn().mark((function t(){var e,n,r,o;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((null===(e=this.statusDisplay)||void 0===e?void 0:e.getStatus())!==bn.RIGHT){t.next=4;break}return t.abrupt("return",!0);case 4:if((null===(n=this.statusDisplay)||void 0===n?void 0:n.getStatus())===bn.PENDING){t.next=6;break}return t.abrupt("return",!1);case 6:return o=(null===(r=this.widgetConfig)||void 0===r?void 0:r.ans)===this.userAns+"",this.setStatus(o?bn.RIGHT:bn.WRONG),this.enable(!o),o?this.showFeedback():this.incAttempts(),t.abrupt("return",o);case 11:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){Yn(i,n,r,a,u,"next",t)}function u(t){Yn(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"setLang",value:function(t){Kn(ir(u.prototype),"setLang",this).call(this,t),this.button&&(this.button.innerHTML=tn(t,"chooseone"))}},{key:"render",value:function(){var t,e,n,r,o=this;if(this.widgetConfig){var i=((null===(t=this.widgetConfig)||void 0===t?void 0:t.vars)||[]).filter((function(t){return(t+"").trim().length>0}));if(null!==(e=this.groupContext)&&void 0!==e&&e.s.length&&i.forEach((function(t,e){var n;t.indexOf("#")<0||(i[e]=Nn(t,null===(n=o.groupContext)||void 0===n?void 0:n._s))})),this.dropdown=l("div",{class:"dropdown",style:"display:inline-block;"}),this.widgetConfig,this.widgetConfig){this.button=l("button",{class:"btn btn-outline-primary dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",html:tn(this.lang,"chooseone")}),this.options=l("div",{class:"dropdown-menu","aria-labelledby":"dropdownMenuButton"});for(var a=i.length||0,s=new Array(a),c=0;c<a;c++)s[c]=c;null!==(n=this.widgetConfig)&&void 0!==n&&null!==(r=n.opts)&&void 0!==r&&r.shuffle&&Ne(s),s.forEach((function(t){var e,n=i[t],r=l("a",{class:"dropdown-item",href:"#","data-index":t+"",html:n});r.addEventListener("click",(function(e){o.userAns=t,e.preventDefault(),o.button&&(o.button.innerHTML=n),n.indexOf("\\(")>=0&&o.reflowLatex(),o.setStatus(bn.PENDING)})),null===(e=o.options)||void 0===e||e.append(r)})),this.dropdown.append(this.button),this.dropdown.append(this.options),Kn(ir(u.prototype),"init",this).call(this,this.widgetConfig.pre),this.append(this.dropdown),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}}else console.error("The widgetConfig is not set")}}],n&&Xn(e.prototype,n),r&&Xn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(Zn));function cr(t){return cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cr(t)}function lr(){lr=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new k(o||[]);return r(a,"_invoke",{value:x(t,n,u)}),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function p(){}function h(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(_([])));m&&m!==e&&n.call(m,i)&&(v=m);var b=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,a,u){var s=l(t[r],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==cr(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return o("throw",t,a,u)}))}u(s.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return L()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=E(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=l(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=d,r(b,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:h,configurable:!0}),h.displayName=s(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),s(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new w(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),s(b,u,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=_,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function fr(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function pr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Er(r.key),r)}}function dr(){return dr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=vr(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},dr.apply(this,arguments)}function vr(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wr(t)););return t}function yr(t,e){return yr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yr(t,e)}function mr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wr(t);if(e){var o=wr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return br(this,n)}}function br(t,e){if(e&&("object"===cr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gr(t)}function gr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wr(t){return wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wr(t)}function xr(t,e,n){return(e=Er(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Er(t){var e=function(t,e){if("object"!==cr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==cr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===cr(e)?e:String(e)}function Or(t){return function(t){if(Array.isArray(t))return Sr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Sr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var kr;Q({elementName:"ib-quizz-mchoice",classes:["iedib-quizz-widget"],styles:{display:"flex","align-items":"center"}})(sr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yr(t,e)}(s,t);var e,n,r,o,i,u=mr(s);function s(){var t;pr(this,s);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return xr(gr(t=u.call.apply(u,[this].concat(n))),"radios",[]),xr(gr(t),"userAnsSet",new Set),t}return e=s,n=[{key:"enable",value:function(t){var e;null===(e=this.radios)||void 0===e||e.forEach((function(e){var n,r;t?(e.disabled=!1,null===(n=e.parentElement)||void 0===n||n.classList.remove("disabled")):(e.disabled=!0,null===(r=e.parentElement)||void 0===r||r.classList.add("disabled"))}))}},{key:"getUserInput",value:function(){return Or(this.userAnsSet).join(",")}},{key:"displayRightAnswer",value:function(){this.enable(!1)}},{key:"check",value:(o=lr().mark((function t(){var e,n,r,o,i,a;return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((null===(e=this.statusDisplay)||void 0===e?void 0:e.getStatus())!==bn.RIGHT){t.next=4;break}return t.abrupt("return",!0);case 4:if((null===(n=this.statusDisplay)||void 0===n?void 0:n.getStatus())===bn.PENDING){t.next=6;break}return t.abrupt("return",!1);case 6:return o=((null===(r=this.widgetConfig)||void 0===r?void 0:r.ans)||"").split(",").map((function(t){return t.trim()})),i=new Set(o),u=this.userAnsSet,s=i,c=void 0,c=new Set([].concat(Or(u),Or(s))),a=c.size==u.size&&c.size==s.size,this.setStatus(a?bn.RIGHT:bn.WRONG),this.enable(!a),a?this.showFeedback():this.incAttempts(),t.abrupt("return",a);case 13:case"end":return t.stop()}var u,s,c}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){fr(i,n,r,a,u,"next",t)}function u(t){fr(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"render",value:function(){var t,e,n,r,o,i=this;if(this.groupContext,this.widgetConfig,this.widgetConfig){var u=((null===(t=this.widgetConfig)||void 0===t?void 0:t.vars)||[]).filter((function(t){return(t+"").trim().length>0}));null!==(e=this.groupContext)&&void 0!==e&&e.s.length&&u.forEach((function(t,e){var n;t.indexOf("#")<0||(u[e]=Nn(t,null===(n=i.groupContext)||void 0===n?void 0:n._s))})),this.form=document.createElement("form"),this.form.style.setProperty("display","inline-block");for(var c=(null===(n=this.widgetConfig)||void 0===n?void 0:n.ans.indexOf(","))>0,f=u.length||0,p=new Array(f),h=0;h<f;h++)p[h]=h;null!==(r=this.widgetConfig)&&void 0!==r&&null!==(o=r.opts)&&void 0!==o&&o.shuffle&&Ne(p);var d=a();p.forEach((function(t){var e,n=u[t],r=l("div",{class:"form-check"});null===(e=i.form)||void 0===e||e.append(r);var o=l("input",{class:"form-check-input",type:c?"checkbox":"radio",name:d,id:d+"_"+t}),a=l("label",{class:"form-check-label",for:d+"_"+t,html:n});r.appendChild(o),r.appendChild(a),i.radios.push(o),o.addEventListener("click",(function(e){c?o.checked?i.userAnsSet.add(t+""):i.userAnsSet.delete(t+""):i.userAnsSet=new Set([t+""]),i.setStatus(bn.PENDING)}))})),dr(wr(s.prototype),"init",this).call(this,this.widgetConfig.pre),this.append(this.form),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}}}],n&&hr(e.prototype,n),r&&hr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(Zn));function _r(t){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_r(t)}function Lr(){Lr=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new k(o||[]);return r(a,"_invoke",{value:x(t,n,u)}),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function p(){}function h(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(_([])));m&&m!==e&&n.call(m,i)&&(v=m);var b=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,a,u){var s=l(t[r],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==_r(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return o("throw",t,a,u)}))}u(s.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return L()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=E(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=l(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=d,r(b,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:h,configurable:!0}),h.displayName=s(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),s(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new w(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),s(b,u,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=_,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function jr(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function Pr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Dr(r.key),r)}}function Cr(){return Cr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Ar(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Cr.apply(this,arguments)}function Ar(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qr(t)););return t}function Nr(t,e){return Nr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nr(t,e)}function Ir(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=qr(t);if(e){var o=qr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rr(this,n)}}function Rr(t,e){if(e&&("object"===_r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zr(t)}function zr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qr(t){return qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qr(t)}function Mr(t,e,n){return(e=Dr(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dr(t){var e=function(t,e){if("object"!==_r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==_r(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===_r(e)?e:String(e)}var Gr;Q({elementName:"ib-quizz-numeric",classes:["iedib-quizz-widget"],styles:{display:"inline-block"}})(kr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nr(t,e)}(u,t);var e,n,r,o,i,a=Ir(u);function u(){var t;Pr(this,u);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Mr(zr(t=a.call.apply(a,[this].concat(n))),"userAns",-1),t}return e=u,n=[{key:"enable",value:function(t){this.input&&(this.input.disabled=!t)}},{key:"getUserInput",value:function(){var t;return(null===(t=this.input)||void 0===t?void 0:t.value)||""}},{key:"displayRightAnswer",value:function(){var t;this.input&&(this.input.value=(null===(t=this.widgetConfig)||void 0===t?void 0:t.ans)||"",this.enable(!1))}},{key:"check",value:(o=Lr().mark((function t(){var e,n,r,o,i,a,u,s,c,l,f,p,h;return Lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((null===(e=this.statusDisplay)||void 0===e?void 0:e.getStatus())!==bn.RIGHT){t.next=4;break}return t.abrupt("return",!0);case 4:if((null===(n=this.statusDisplay)||void 0===n?void 0:n.getStatus())===bn.PENDING){t.next=6;break}return t.abrupt("return",!1);case 6:if(r=!1,t.prev=7,i=parseFloat(this.getUserInput()),a=parseFloat((null===(o=this.widgetConfig)||void 0===o?void 0:o.ans)||"0"),isNaN(i)||isNaN(a)){t.next=23;break}f=(null===(u=this.widgetConfig)||void 0===u||null===(s=u.opts)||void 0===s?void 0:s.err)||0,"%"===(p=(null===(c=this.widgetConfig)||void 0===c||null===(l=c.opts)||void 0===l?void 0:l.errunit)||"absolute")&&(f*=.01),0===a&&(p="absolute"),t.t0=p,t.next="absolute"===t.t0?18:20;break;case 18:return r=Math.abs(i-a)<=f,t.abrupt("break",21);case 20:r=Math.abs(i/a-1)<=f;case 21:t.next=26;break;case 23:return console.error("ERROR",this.getUserInput(),null===(h=this.widgetConfig)||void 0===h?void 0:h.ans),this.setStatus(bn.ERROR),t.abrupt("return",!1);case 26:t.next=33;break;case 28:return t.prev=28,t.t1=t.catch(7),console.error(t.t1),this.setStatus(bn.ERROR),t.abrupt("return",!1);case 33:return this.setStatus(r?bn.RIGHT:bn.WRONG),this.getUserInput(),this.enable(!r),r?this.showFeedback():this.incAttempts(),t.abrupt("return",r);case 38:case"end":return t.stop()}}),t,this,[[7,28]])})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){jr(i,n,r,a,u,"next",t)}function u(t){jr(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"render",value:function(){var t,e=this;if(this.widgetConfig){if(null!==(t=this.groupContext)&&void 0!==t&&t.s.length&&this.widgetConfig){var n=this.widgetConfig.ans||"";n.indexOf("#")>=0&&(n=n.replace(/#/g,""),this.widgetConfig.ans=""+h(this.groupContext._s||{},n))}this.input=l("input",{class:"form-control",type:"number",style:"display:inline-block;width:100px;"}),this.input.addEventListener("change",(function(t){e.setStatus(bn.PENDING)})),Cr(qr(u.prototype),"init",this).call(this,this.widgetConfig.pre),this.append(this.input),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}}}],n&&Tr(e.prototype,n),r&&Tr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(Zn));function Fr(t){return Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fr(t)}function $r(){$r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new k(o||[]);return r(a,"_invoke",{value:x(t,n,u)}),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function p(){}function h(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(_([])));m&&m!==e&&n.call(m,i)&&(v=m);var b=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,a,u){var s=l(t[r],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==Fr(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return o("throw",t,a,u)}))}u(s.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return L()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=E(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=l(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=d,r(b,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:h,configurable:!0}),h.displayName=s(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),s(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new w(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),s(b,u,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=_,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function Br(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function Hr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==Fr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Fr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Fr(i)?i:String(i)),r)}var o,i}function Vr(){return Vr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Zr(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Vr.apply(this,arguments)}function Zr(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qr(t)););return t}function Wr(t,e){return Wr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wr(t,e)}function Jr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Qr(t);if(e){var o=Qr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Yr(this,n)}}function Yr(t,e){if(e&&("object"===Fr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Qr(t){return Qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qr(t)}Q({elementName:"ib-quizz-cloze",classes:["iedib-quizz-widget"],styles:{display:"inline-block"}})(Gr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wr(t,e)}(u,t);var e,n,r,o,i,a=Jr(u);function u(){return Hr(this,u),a.apply(this,arguments)}return e=u,n=[{key:"enable",value:function(t){for(var e,n=(null===(e=this.mathInput)||void 0===e?void 0:e.innerFields)||[],r=0,o=n.length;r<o;r++)n[r].__controller.editable=t}},{key:"getUserInput",value:function(){return JSON.stringify(this.getUserInputArray())}},{key:"getUserInputArray",value:function(){var t,e,n=[];null===(t=this.mathInput)||void 0===t||t.innerFields;for(var r=(null===(e=this.mathInput)||void 0===e?void 0:e.innerFields)||[],o=0,i=r.length;o<i;o++)n.push((r[o].latex()||"").replace(/\\\s/g,"").trim());return n}},{key:"displayRightAnswer",value:function(){if(this.mathInput){for(var t,e=JSON.parse((null===(t=this.widgetConfig)||void 0===t?void 0:t.ans)||"[]"),n=this.mathInput.innerFields||[],r=0,o=n.length;r<o;r++)r<e.length&&e.push(n[r].latex(e[r]));this.enable(!1)}}},{key:"check",value:(o=$r().mark((function t(){var e,n,r,o,i,a,u,s,c,l,f,p,h,d;return $r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((null===(e=this.statusDisplay)||void 0===e?void 0:e.getStatus())!==bn.RIGHT){t.next=4;break}return t.abrupt("return",!0);case 4:if((null===(n=this.statusDisplay)||void 0===n?void 0:n.getStatus())===bn.PENDING){t.next=6;break}return t.abrupt("return",!1);case 6:if(r=!1,t.prev=7,null!==(o=this.widgetConfig)&&void 0!==o&&o.cfn)s={u:this.getUserInputArray()},Object.assign(s,null===(i=this.groupContext)||void 0===i?void 0:i._s),s.u.forEach((function(t,e){return s["u"+e]=t})),c=((null===(a=this.widgetConfig)||void 0===a?void 0:a.cfn)||"return true").replace(/#/g,""),r=Cn(c,s,(null===(u=this.groupContext)||void 0===u?void 0:u._s)||{});else for("string"==typeof(f=(null===(l=this.widgetConfig)||void 0===l?void 0:l.ans)||"[]")&&(f=JSON.parse(f)),p=this.getUserInputArray(),r=!0,h=0,d=p.length;h<d;h++)r=h<f.length&&r&&f[h]==(p[h]||"").trim();t.next=16;break;case 11:return t.prev=11,t.t0=t.catch(7),console.error(t.t0),this.setStatus(bn.ERROR),t.abrupt("return",!1);case 16:return this.setStatus(r?bn.RIGHT:bn.WRONG),this.getUserInput(),this.enable(!r),r?this.showFeedback():this.incAttempts(),t.abrupt("return",r);case 21:case"end":return t.stop()}}),t,this,[[7,11]])})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){Br(i,n,r,a,u,"next",t)}function u(t){Br(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"render",value:function(){var t,e=this;if(this.widgetConfig)if(this.widgetConfig,window.MathQuill){if(null!==(t=this.groupContext)&&void 0!==t&&t.s.length&&this.widgetConfig){var n=this.widgetConfig.ans||"";n.indexOf("#")>=0&&(n=n.replace(/#/g,""),this.widgetConfig.ans=""+h(this.groupContext._s||{},n))}this.input=document.createElement("span"),this.input.innerText=An(this.widgetConfig.ini||"?"),this.input.innerText,this.append(this.input);var r=window.MathQuill.getInterface(2);this.mathInput=r.StaticMath(this.input),this.mathInput.innerFields.forEach((function(t){t.__controller.textarea.on("keyup",(function(t){t.preventDefault(),e.setStatus(bn.PENDING)}))})),Vr(Qr(u.prototype),"init",this).call(this,this.widgetConfig.pre),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}else console.error("MathQuill not found on page")}}],n&&Ur(e.prototype,n),r&&Ur(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(Zn));var Xr=/\\begin\{pmatrix\}(.*?)\\end\{pmatrix\}/gm,Kr=0;function to(t){t=(t=t.replace(Xr,(function(t){var e,n,r,o;return e=t,(n=window.nerdamer.getCore()).Symbol,r=(e=e.replace("\\begin{pmatrix}","").replace("\\end{pmatrix}","")).split("\\\\").map((function(t){return t.split("&").map((function(t){return to(t.trim()||"0")})).join(",")})),o="MM_"+Kr,Kr++,window.nerdamer.setVar(o,n.Matrix.fromArray(r)),o}))).replace(/\\,/g," ").replace(/ \\\s+/g," ");var e=window.nerdamer.convertFromLaTeX(t);return window.nerdamer.getVars(),e}function eo(t){return eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eo(t)}function no(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ro(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ro(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ro(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==eo(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==eo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===eo(i)?i:String(i)),r)}var o,i}function io(t){var e;if(Array.isArray(null==t||null===(e=t.symbols)||void 0===e?void 0:e.elements)){var n=t.symbols.elements[0];if(!Array.isArray(n))return!0}return!1}function ao(t){var e=t.text();return e.startsWith("matrix")?window.nerdamer("size("+e+")"):null}var uo,so=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lang=e}var e,n,r;return e=t,n=[{key:"checkRules",value:function(t){var e=this,n=[],r=t.rules||{};"string"==typeof r&&(r=JSON.parse(r));var o=t.latex.join(" ");return r.comma_as_decimal&&(t.latex=t.latex.map((function(t){return t.replace(",",".")}))),r.forbidden&&r.forbidden.forEach((function(t){o[t]&&n.push(tn(e.lang,"sym_notallowed",t))})),r.unique&&r.unique.forEach((function(t){(o.match(new RegExp(t,"g"))||[]).length>1&&n.push(tn(e.lang,"sym_once",t))})),n}},{key:"compare",value:function(e){var n=this,r=window.nerdamer;return e=t.clone(e),new Promise((function(o,i){r.flush(),r.clearVars(),window.nerdamer.getCore().Symbol;var a={x:r("x"),y:r("y"),z:r("z"),t:r("t"),e:r("exp(1)")},u=n.checkRules(e);if(u.length)o({qid:e.qid,msg:u.join(" "),correct:0});else{var s=[];try{if((s=e.latex.map((function(t){return to(t)}))).filter((function(t){return null==t})).length>0)return o({qid:e.qid,correct:-4,msg:tn(n.lang,"error_cantprocess")})}catch(t){return console.error(t),o({qid:e.qid,correct:-4,msg:"Error: No es poden processar les respostes donades: "+t})}s.forEach((function(t,e){r.setVar("ua_"+e,t)}));try{(e.symbols||[]).forEach((function(t){if((t=(t||"").trim()).indexOf(":=")>0){var e=t.indexOf(":="),n=t.substring(0,e),o=t.substring(e+2);r.setVar(n.trim(),o.trim())}else r.setVar(t,t)}))}catch(t){return console.error(t),void o({qid:e.qid,correct:-2,msg:"Error: no es poden processar els símbols: "+t})}!function(t,e){if(Array.isArray(t))for(var n=0,r=t.length;n<r;n++)e(n,t[n]);else for(var o=Object.keys(t),i=0,a=o.length;i<a;i++){var u=o[i];e(u,t[u])}}(a,(function(t,e){e.text()}));var c=[];try{if(e.anse&&(e.ans=[t.decrypt(e.anse)]),e.anse,e.ans,(c=e.ans.map((function(t){return r(t,a)}))).filter((function(t){return null==t})).length>0)return void o({qid:e.qid,correct:-3,msg:"Error: Hi ha respostes 'ans' que no es poden processar"})}catch(t){return console.error(t),void o({qid:e.qid,correct:-3,msg:"Error: No es poden processar les respostes 'ans': "+t})}try{var l=[];if(Re(c,s).forEach((function(t){var e=no(t,2),n=e[0],r=e[1];io(n)&&!io(r)?l.push("S'espera un conjunt per resposta. Per exemple \\(\\{\\sqrt{2},\\, \\pi\\}\\)"):ao(n)&&!ao(r)?l.push("S'espera una matriu per resposta."):!ao(n)&&ao(r)&&l.push("S'espera una expressió per resposta.");var o=ao(n),i=ao(r);o&&i&&(o[0]==i[0]&&o[1]==i[1]||l.push("La matriu resposta no té la dimensió correcta."))})),l.length>0)return void o({qid:e.qid,correct:0,msg:l.join(" ")})}catch(t){return console.error(t),void o({qid:e.qid,correct:-4,msg:"Error: S'ha produït un error comprovant els tipus "+t})}var f=0,p="";try{Re(c,s).forEach((function(t){var r=no(t,2),o=r[0],i=r[1];o.text(),i.text();var a=null,u=e.rules||{};if(u.precision)a=Math.abs(o.toDecimal()-i.toDecimal())<u.precision;else if(ao(o)){var s=o.subtract(i);o.text(),i.text(),s.text(),a=function(t){var e=!0;return t.each((function(t){e=e&&"0"==t.text()})),e}(s)}else a=u.factor||u.expand?o.eq(i):"0"===(a=o.subtract(i).simplify()).toString();if("boolean"==typeof a&&!0===a?(f=1,p=tn(n.lang,"right_answer")):(p=tn(n.lang,"wrong_answer"),f=0),0==f)return!0;if(u.num_terms&&i.isPolynomial()){var c=i.symbols.coeffs().length,l=o.symbols.expand().coeffs().length,h=l-c;"equal"==u.num_terms&&0!=h&&(p="La resposta hauria de tenir "+l+" termes sumats o restats.",f=0)}}))}catch(t){console.error("Exception comparing ",t),p=tn(n.lang,"error_verifying"),f=-1}o({qid:e.qid,correct:f,msg:p})}}))}},{key:"getAnswer",value:function(e){var n=this,r=window.nerdamer;return e=t.clone(e),new Promise((function(t,o){var i={x:r("x"),y:r("y"),z:r("z"),t:r("t"),e:r("exp(1)")};try{(e.symbols||[]).forEach((function(t){if((t=(t||"").trim()).indexOf(":=")>0){var e=t.indexOf(":="),n=t.substring(0,e),o=t.substring(e+2);r.setVar(n.trim(),o.trim())}else r.setVar(t,t)}))}catch(e){return console.error(e),void t({msg:"Error: no es poden processar els símbols: "+e})}if("string"!=typeof e.ans)t({msg:"Vector ans is not supported yet!"});else{var a=r(e.ans,i),u="".concat(tn(n.lang,"expected_ans"),"<br> \\(").concat(a.latex(),"\\)");t({right_answer:btoa(u)})}}))}}],r=[{key:"clone",value:function(t){return JSON.parse(JSON.stringify(t))}},{key:"decrypt",value:function(t){return atob(t)}}],n&&oo(e.prototype,n),r&&oo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function co(t){return co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},co(t)}function lo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==co(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==co(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===co(i)?i:String(i)),r)}var o,i}var fo=[{name:"General",buttons:[{name:"Multiplicació",latex:"\\times",tab:1,icon:"\\times"},{name:"Fracció",latex:"\\frac{}{}",moveto:"Up",movefor:1,tab:1,icon:"\\frac{\\square}{\\square}"},{name:"Exponent",latex:"\\^{}",moveto:"Up",movefor:1,tab:1,icon:"\\square^2"},{name:"Parèntesis",latex:"\\left(\\right)",moveto:"Left",movefor:1,tab:1,icon:"\\left(\\square\\right)"},{name:"Arrel quadrada",latex:"\\sqrt{}",moveto:"Left",movefor:1,tab:1,icon:"\\sqrt{\\square}"},{name:"Arrel cúbica",latex:"\\sqrt[3]{}",moveto:"Left",movefor:1,tab:1,icon:"\\sqrt[3]{\\square}"},{name:"Radical",latex:"\\sqrt[{}]{}",moveto:"Left",movefor:2,tab:1,icon:"\\sqrt[\\square]{\\square}"},{name:"Matriu 2x2",latex:"\\begin{pmatrix} & \\\\ & \\end{pmatrix}",tab:1,icon:"M_{2\\times 2}"},{name:"Matriu 3x3",latex:"\\begin{pmatrix} & & \\\\ & &  \\\\ & & \\end{pmatrix}",tab:1,icon:"M_{3\\times 3}"}]},{name:"Símbols",buttons:[{name:"pi",latex:"\\pi",tab:2,icon:"\\pi"},{name:"e",latex:"e",tab:2,icon:"e"},{name:"infinit",latex:"\\infty",tab:2,icon:"\\infty"},{name:"Més menys",latex:"\\pm",tab:2,icon:"\\pm"},{name:"Diferent",latex:"\\neq",tab:2,icon:"\\neq"},{name:"Major o igual",latex:"\\geq",tab:2,icon:"\\geq"},{name:"Menor o igual",latex:"\\leq",tab:2,icon:"\\leq"},{name:"Major que",latex:"\\gt",tab:2,icon:"\\gt"},{name:"Menor que",latex:"\\lt",tab:2,icon:"\\lt"}]},{name:"Funcions",buttons:[{name:"Sinus",latex:"\\sin()",moveto:"Left",movefor:1,tab:5,icon:"\\sin{\\square}"},{name:"Cosinus",latex:"\\cos()",moveto:"Left",movefor:1,tab:5,icon:"\\cos{\\square}"},{name:"Tangent",latex:"\\tan()",moveto:"Left",movefor:1,tab:5,icon:"\\tan{\\square}"},{name:"Arcsinus",latex:"\\arcsin()",moveto:"Left",movefor:1,tab:5,icon:"\\arcsin{\\square}"},{name:"Arccosinus",latex:"\\arccos()",moveto:"Left",movefor:1,tab:5,icon:"\\arccos{\\square}"},{name:"Arctangent",latex:"\\arctan()",moveto:"Left",movefor:1,tab:5,icon:"\\arctan{\\square}"},{name:"Logaritme Neperià",latex:"\\ln()",moveto:"Left",movefor:1,tab:5,icon:"\\ln{\\square}"},{name:"Logaritme en base b",latex:"\\frac{\\log()}{\\log{b}}",moveto:"Left",movefor:4,tab:5,icon:"\\log_b{\\square}"}]}],po=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.panel=e,this.staticMathFields=[],this.view=l("div",{class:"ibquizz-editor-palette"}),this.createPalettes()}var e,n,r;return e=t,(n=[{key:"createPalettes",value:function(){var t=this;fo.forEach((function(e){var n=document.createElement("div");t.view.append(n),e.buttons.forEach((function(e){n.append(t.createButton(e))}))}))}},{key:"createButton",value:function(t){var e=this,n=document.createElement("span");n.innerHTML=t.icon;var r=window.MathQuill.getInterface(2);this.staticMathFields.push(r.StaticMath(n));var o=l("button",{class:"btn btn-sm ibquizz-me-btn-toolbar",title:t.name});return o.append(n),o.addEventListener("click",(function(n){n.preventDefault(),e.panel.write(t.latex,t.moveto,t.movefor)})),o}},{key:"getView",value:function(){return this.view}},{key:"reflow",value:function(){this.staticMathFields.forEach((function(t){return t.reflow()}))}}])&&lo(e.prototype,n),r&&lo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ho(t){return ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ho(t)}function vo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==ho(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ho(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===ho(i)?i:String(i)),r)}var o,i}var yo=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.view=l("div",{class:"ibquizz-editor-panel"}),this.palette=new po(this),this.view.append(this.palette.getView());var e=window.MathQuill.getInterface(2),n=document.createElement("span");n.style.display="block",n.style.width="100%",n.style.minHeight="100px",this.view.append(n),this.mathInput=e.MathField(n,{})}var e,n,r;return e=t,(n=[{key:"getView",value:function(){return this.view}},{key:"setLatex",value:function(t){this.mathInput.latex(t)}},{key:"getLatex",value:function(){return this.mathInput.latex()}},{key:"write",value:function(t,e,n){if(void 0===n&&(n=1),this.mathInput.write(t),this.mathInput.focus(),e)for(var r=0;r<n;r++)this.mathInput.keystroke(e)}},{key:"reflow",value:function(){this.mathInput.focus(),this.mathInput.reflow(),this.palette.reflow()}}])&&vo(e.prototype,n),r&&vo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function mo(t){return mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mo(t)}function bo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==mo(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==mo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===mo(i)?i:String(i)),r)}var o,i}function go(){return go="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=wo(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},go.apply(this,arguments)}function wo(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=So(t)););return t}function xo(t,e){return xo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xo(t,e)}function Eo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=So(t);if(e){var o=So(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Oo(this,n)}}function Oo(t,e){if(e&&("object"===mo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function So(t){return So=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},So(t)}var ko,_o,Lo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xo(t,e)}(i,t);var e,n,r,o=Eo(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t,Qe.CANCEL_ACCEPT,"")).mathEditorPanel=new yo,e.setBody(e.mathEditorPanel.getView()),e}return e=i,(n=[{key:"setBody",value:function(t){var e=this;this.body.html(""),this.body.append($(t)),this.primaryButton.on("click",(function(t){t.preventDefault(),e.acceptCb&&e.acceptCb(),e.elem.modal("hide")}))}},{key:"setLatex",value:function(t){this.mathEditorPanel.setLatex(t)}},{key:"getLatex",value:function(){return this.mathEditorPanel.getLatex()}},{key:"show",value:function(t){var e=this;go(So(i.prototype),"show",this).call(this,t),setTimeout((function(){return e.mathEditorPanel.reflow()}),300)}}])&&bo(e.prototype,n),r&&bo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(fn);function jo(t){return jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jo(t)}function Po(){Po=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new k(o||[]);return r(a,"_invoke",{value:x(t,n,u)}),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function p(){}function h(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(_([])));m&&m!==e&&n.call(m,i)&&(v=m);var b=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,a,u){var s=l(t[r],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==jo(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return o("throw",t,a,u)}))}u(s.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return L()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=E(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=l(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=d,r(b,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:h,configurable:!0}),h.displayName=s(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),s(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new w(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),s(b,u,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=_,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function To(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function Co(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ao(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==jo(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==jo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===jo(i)?i:String(i)),r)}var o,i}function No(){return No="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Io(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},No.apply(this,arguments)}function Io(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Mo(t)););return t}function Ro(t,e){return Ro=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ro(t,e)}function zo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Mo(t);if(e){var o=Mo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qo(this,n)}}function qo(t,e){if(e&&("object"===jo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Mo(t){return Mo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mo(t)}var Do;Q({elementName:"ib-quizz-mathquill",classes:["iedib-quizz-widget"],styles:{display:"inline-block"}})(_o=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ro(t,e)}(s,t);var e,n,r,o,i,u=zo(s);function s(){return Co(this,s),u.apply(this,arguments)}return e=s,n=[{key:"enable",value:function(t){this.mathInput}},{key:"getUserInput",value:function(){var t,e=null===(t=this.mathInput)||void 0===t?void 0:t.latex();return(e||"").replace(/\\,/g," ").replace(/\\ /g," ").trim()}},{key:"displayRightAnswer",value:function(){if(this.mathInput){var t,e=(null===(t=this.widgetConfig)||void 0===t?void 0:t.ans)||"";this.mathInput.latex(e),this.enable(!1)}}},{key:"check",value:(o=Po().mark((function t(){var e,n,r,o,i,u,s,c,l,f,p,h,d,v,y,m,b,g,w,x,E,O,S;return Po().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((null===(e=this.statusDisplay)||void 0===e?void 0:e.getStatus())!==bn.RIGHT){t.next=4;break}return t.abrupt("return",!0);case 4:if((null===(n=this.statusDisplay)||void 0===n?void 0:n.getStatus())===bn.PENDING){t.next=6;break}return t.abrupt("return",!1);case 6:if(i=!1,u=((null===(r=this.widgetConfig)||void 0===r||null===(o=r.opts)||void 0===o?void 0:o.ngx)||"nermader").trim().toLowerCase(),t.prev=8,null===(s=this.widgetConfig)||void 0===s||!s.cfn){t.next=20;break}p=this.getUserInput()||"",h=null,window.nerdamer&&(h=to(p)),d={uTex:p,uNerd:h},Object.assign(d,null===(c=this.groupContext)||void 0===c?void 0:c._s),v=((null===(l=this.widgetConfig)||void 0===l?void 0:l.cfn)||"return true").replace(/#/g,""),i=Cn(v,d,(null===(f=this.groupContext)||void 0===f?void 0:f._s)||{}),t.next=37;break;case 20:if(!window.nerdamer||"nermader"!==u){t.next=36;break}return window.nerdamer,g=this.getUserInput()||"",w=(null===(y=this.groupContext)||void 0===y?void 0:y._s)||{},x=((null===(m=this.widgetConfig)||void 0===m?void 0:m.vars)||[]).map((function(t){return t.replace(/#([a-zA-Z0-9_]+)/gm,(function(t,e){var n=w[e];return null!=n?"function"==typeof n.text?n.text():"function"==typeof n.toString?n.toString():n+"":t}))})),k=this.lang,uo||(uo=new so(k)),E=uo,O={latex:[g],ans:[(null===(b=this.widgetConfig)||void 0===b?void 0:b.ans)||""],symbols:x,qid:a()},t.next=31,E.compare(O);case 31:S=t.sent,i=S.correct>0,t.next=37;break;case 36:throw new Error("Check function must be set");case 37:t.next=44;break;case 39:return t.prev=39,t.t0=t.catch(8),console.error(t.t0),this.setStatus(bn.ERROR),t.abrupt("return",!1);case 44:return this.setStatus(i?bn.RIGHT:bn.WRONG),this.getUserInput(),this.enable(!i),i?this.showFeedback():this.incAttempts(),t.abrupt("return",i);case 49:case"end":return t.stop()}var k}),t,this,[[8,39]])})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){To(i,n,r,a,u,"next",t)}function u(t){To(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"render",value:function(){var t,e=this;if(this.widgetConfig)if(this.widgetConfig,window.MathQuill){if(null!==(t=this.groupContext)&&void 0!==t&&t.s.length&&this.widgetConfig){var n=this.widgetConfig.ans||"";n.indexOf("#")>=0&&(n=n.replace(/#/g,""),this.widgetConfig.ans=""+h(this.groupContext._s||{},n))}this.input=document.createElement("span"),this.input.innerText=An(this.widgetConfig.ini||"").replace(/\\MathQuillMathField{}/gm,""),this.input.style.minWidth="100px",this.append(this.input);var r=window.MathQuill.getInterface(2);this.mathInput=r.MathField(this.input,{handlers:{edit:function(){e.setStatus(bn.PENDING)}}}),this.dlg_btn_el=l("button",{class:"btn btn-sm ibquizz-me-btn-openeditor",title:tn(this.lang,"open_editor"),html:'<i class="ibquizz-square-root"></i>'}),this.append(this.dlg_btn_el),this.dlg_btn_el.addEventListener("click",(function(t){var n;t.preventDefault();var r=function(t){if(!ko){var e=a();ko=new Lo(e)}return ko.setTitle(t),ko}(tn(e.lang,"math_editor"));r.setLatex(""),r.show((function(){var t,n=r.getLatex();n&&(null===(t=e.mathInput)||void 0===t||t.latex(n))})),r.setLatex((null===(n=e.mathInput)||void 0===n?void 0:n.latex())||"")})),No(Mo(s.prototype),"init",this).call(this,this.widgetConfig.pre),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}else console.error("MathQuill not found on page")}}],n&&Ao(e.prototype,n),r&&Ao(e,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(Zn));function Go(t){return Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Go(t)}function Fo(){Fo=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new k(o||[]);return r(a,"_invoke",{value:x(t,n,u)}),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function p(){}function h(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(_([])));m&&m!==e&&n.call(m,i)&&(v=m);var b=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,a,u){var s=l(t[r],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==Go(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return o("throw",t,a,u)}))}u(s.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return L()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=E(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=l(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=d,r(b,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:h,configurable:!0}),h.displayName=s(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),s(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new w(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),s(b,u,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=_,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function $o(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function Bo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Jo(r.key),r)}}function Ho(t,e){return Ho=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ho(t,e)}function Uo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Wo(t);if(e){var o=Wo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vo(this,n)}}function Vo(t,e){if(e&&("object"===Go(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Zo(t)}function Zo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wo(t){return Wo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wo(t)}function Jo(t){var e=function(t,e){if("object"!==Go(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Go(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Go(e)?e:String(e)}var Yo=Y({name:"quizz",author:"Josep Mulet Pol",version:"1.0",query:"[data-quizz-group]",use$:!0})(Do=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ho(t,e)}(i,t);var e,n,r,o=Uo(i);function i(t){var e,n,r,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t),n=Zo(e),a={s:"",_s:{},o:{hint:2,ans:4}},(r=Jo(r="groupContext"))in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a;var u,s=t.getAttribute("data-lang");s||(s=(null===(u=t.parentElement)||void 0===u?void 0:u.getAttribute("data-lang"))||null);var l=t.getAttribute("data-quizz-group")||"";try{var f=d(l);e.groupContext=Object.assign(e.groupContext,f),e.groupContext.o.hint=c(e.groupContext.o.hint,2),e.groupContext.o.ans=c(e.groupContext.o.ans,4),e.groupContext}catch(t){console.error(t)}return e.lang=s||"ca",e}return e=i,n=[{key:"generateGroup",value:function(){try{Cn(this.groupContext.s,{},this.groupContext._s)}catch(t){console.error("GroupContext:: No es pot interpretar el codi.\n",t)}if(this.groupContext.s.trim().length){var t=l("div",{class:"alert alert-info d-print-none",style:"float:right;display:inline",html:'<svg data-toggle="tooltip" title="'.concat(tn(this.lang,"random_msg"),'+" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" style="height:20px;"><path fill="#154b5e" d="M592 192H473.26c12.69 29.59 7.12 65.2-17 89.32L320 417.58V464c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48V240c0-26.51-21.49-48-48-48zM480 376c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm-46.37-186.7L258.7 14.37c-19.16-19.16-50.23-19.16-69.39 0L14.37 189.3c-19.16 19.16-19.16 50.23 0 69.39L189.3 433.63c19.16 19.16 50.23 19.16 69.39 0L433.63 258.7c19.16-19.17 19.16-50.24 0-69.4zM96 248c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm128 128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm0-128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm0-128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm128 128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"/></svg> \n                ')}),e=this.parent.querySelector(":nth-child(2)");"H4"===(null==e?void 0:e.nodeName)?this.parent.insertBefore(t,e.nextSibling):this.parent.prepend(t)}}},{key:"findPlaceholders",value:function(){0!==this.groupContext.s.trim().length&&(this.findPlaceholdersSpan(),this.findPlaceholdersText())}},{key:"findPlaceholdersText",value:function(){var t=this;(function(t){for(var e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null),r=n.nextNode();null!=r;)e.push(r),r=n.nextNode();return e})(this.parent).forEach((function(e){var n=e.textContent||"";e.textContent=Nn(n,t.groupContext._s)}))}},{key:"findPlaceholdersSpan",value:function(){var t=this;this.parent.querySelectorAll("span[data-quizz-interpol]").forEach((function(e){var n=e.getAttribute("data-quizz-interpol")||"";n.indexOf("#")<0||(e.innerHTML=Nn(n,t.groupContext._s))}))}},{key:"init",value:function(){var t=this,e=this.parent.dataset;if("1"!==e.active)if(e.active="1",this.groupContext.s.trim().length)if(window.nerdamer)this.generateGroup(),this.initProxy();else{var n="https://piworld.es/iedib/snippets/sd/mathquill.min.js",r=document.querySelector('script[src$="sd/quizz-editor.min.js"]');r&&(n=r.src.replace("sd/quizz-editor.min.js","sd/mathquill.min.js")),f(n,"mathquill.matrix4quizz",(function(){t.generateGroup(),t.initProxy()}),(function(){console.error("Cannot load mathquill-nerdamer"),t.generateGroup(),t.initProxy()}))}else this.initProxy()}},{key:"initProxy",value:function(){var t,e,n,r=this;if(this.findPlaceholders(),this.allQuizzElements=this.parent.querySelectorAll("ib-quizz-numeric, ib-quizz-dropdown, ib-quizz-mchoice"),this.allClozeElements=this.parent.querySelectorAll("ib-quizz-cloze, ib-quizz-mathquill"),this.allQuizzElements,this.allClozeElements,this.checkButton=l("button",{class:"btn btn-sm btn-primary d-print-none",style:"margin: 10px;display:block",html:'<i class="fa fas fa-check"></i> '+tn(this.lang,"check")}),this.listener=function(){var t,e=(t=Fo().mark((function t(e){var n,o,i,a;return Fo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),i=[],null===(n=r.allQuizzElements)||void 0===n||n.forEach((function(t){i.push(t.check())})),null===(o=r.allClozeElements)||void 0===o||o.forEach((function(t){i.push(t.check())})),t.next=6,Promise.all(i);case 6:t.sent.every((function(t){return!0===t}))&&(null===(a=r.checkButton)||void 0===a||a.setAttribute("disabled","true"));case 8:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){$o(i,r,o,a,u,"next",t)}function u(t){$o(i,r,o,a,u,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),this.allQuizzElements.length+this.allClozeElements.length>0&&this.parent.append(this.checkButton),this.listener&&(null===(n=this.checkButton)||void 0===n||n.addEventListener("click",this.listener)),null===(t=this.allQuizzElements)||void 0===t||t.forEach((function(t){"function"==typeof t.setLang?(t.setLang(r.lang),t.setGroupContext(r.groupContext)):console.error("No custom element registered for ",t)})),null!==(e=this.allClozeElements)&&void 0!==e&&e.length){var o="https://piworld.es/iedib/snippets/sd/mathquill.min.js",i=document.body.querySelector('script[src$="/sd/quizz.min.js"]');i&&(o=(i.getAttribute("src")||"").replace("/sd/quizz.min.js","/sd/mathquill.min.js")),f(o,"mathquill.matrix4quizz",(function(){var t;null===(t=r.allClozeElements)||void 0===t||t.forEach((function(t){"function"==typeof t.setLang?(t.setLang(r.lang),t.setGroupContext(r.groupContext)):console.error("No custom element registered for ",t)}))}))}}},{key:"dispose",value:function(){var t;"0"!==this.parent.dataset.active&&(this.parent.removeAttribute("data-active"),this.listener&&(null===(t=this.checkButton)||void 0===t||t.removeEventListener("click",this.listener)))}}],n&&Bo(e.prototype,n),r&&Bo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(U))||Do;y([wt,ft,Nt,Ae,Xe,Yo])}()}();