window.IB = window.IB || {}; window.IB.sd = window.IB.sd || {};
        !function(){var l = '  .pw-seccio {   font-size: 110%;   cursor: pointer;   color: #525A91;   margin-top: 40px;   margin-bottom: 5px;  }  .pw-seccio-plus::before {   content: "\\f078";   font-family: "Font Awesome\\ 5 Pro";    font-weight: 700;   margin: 0px 5px;  }  .pw-seccio-minus::before {   content: "\\f077";   font-family: "Font Awesome\\ 5 Pro";    font-weight: 700;   margin: 0px 5px;  }  .pw-seccio:hover {   color: #3d4265;  }  @keyframes anim-desplegable-semi {   0% {     max-height: 1000px;   }   80% {    max-height: 40px;   }   100% {    max-height: 40px;    -webkit-mask-image: -webkit-gradient(linear, left top, left bottom, from(rgba(0,0,0,1)), to(rgba(0,0,0,0)));   }  }  @keyframes anim-seccio-show {   0% {    overflow: hidden;    max-height: 40px;    -webkit-mask-image: -webkit-gradient(linear, left top, left bottom, from(rgba(0,0,0,1)), to(rgba(0,0,0,0)));   }   100% {     max-height: 1000px;   }  }  .pw-seccio-semi {   overflow: hidden;   animation: anim-desplegable-semi 1s ease forwards;  }  .pw-seccio-showing {   animation: anim-desplegable-show 1s ease forwards;  } .vnotify-container {  position: fixed; }  .vnotify-container.vn-top-right {   right: 10px;   top: 10px; }  .vnotify-container.vn-top-left {   top: 10px;   left: 10px; }  .vnotify-container.vn-bottom-right {   bottom: 10px;   right: 10px; }  .vnotify-container.vn-bottom-left {   bottom: 10px;   left: 10px; }  .vnotify-container.vn-center {   top: 50%;   left: 50%;   transform: translate(-50%, -50%); }  .vnotify-container .vn-close {   position: absolute;   top: 5px;   right: 10px;   width: 15px;   height: 15px;   padding: 2px;   cursor: pointer; }   .vnotify-container .vn-close:before, .vnotify-container .vn-close:after {    content: "";    position: absolute;    width: 100%;    top: 50%;    height: 2px;    background: #fff; }   .vnotify-container .vn-close:before {    -webkit-transform: rotate(45deg);    -moz-transform: rotate(45deg);    transform: rotate(45deg); }   .vnotify-container .vn-close:after {    -webkit-transform: rotate(-45deg);    -moz-transform: rotate(-45deg);    transform: rotate(-45deg); } .vnotify-item {  width: 20em;  padding: 15px;  position: relative;  -webkit-border-radius: 5px;  -moz-border-radius: 5px;  -ms-border-radius: 5px;  border-radius: 5px;  margin-bottom: 15px;  opacity: 0.75;  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=75)";  filter: alpha(opacity=75); }  .vnotify-item:hover {   opacity: 1; } .vnotify-title {  font-weight: bold; } .vnotify-info {  background: #3498db;  color: #fff; } .vnotify-success {  background: #2ecc71;  color: #fff; } .vnotify-error {  background: #e74c3c;  color: #fff; } .vnotify-warning {  background: #f39c12;  color: #fff; } .vnotify-notify {  background: #333;  color: #fff; } '; var s = document.createElement('style'); s.type = 'text/css'; s.innerHTML = l; document.getElementsByTagName('head')[0].appendChild(s);}();
        !function(){var s="dynamic_seccio";if(window.IB.sd[s])return console.error("Warning: "+s+" loaded twice."),void(window.IB.sd[s].bind&&window.IB.sd[s].bind());var e=function(s){var e=this;s.classList.add("pw-seccio"),this._elem=s;var t=s.getAttribute("data-target");this.target=document.querySelector(t),this.target&&(this.target.style["max-height"]=this.target.scrollHeight,this.closed=!0,this.target.classList.add("pw-seccio-semi"),s.classList.add("pw-seccio-plus"),this.handler=function(s){e.toggle()},s.addEventListener("click",this.handler))};e.prototype={toggle:function(){this.closed?(this._elem.classList.remove("pw-seccio-plus"),this._elem.classList.add("pw-seccio-minus"),this.target.classList.remove("pw-seccio-semi"),this.target.classList.add("pw-seccio-showing")):(this._elem.classList.remove("pw-seccio-minus"),this._elem.classList.add("pw-seccio-plus"),this.target.classList.add("pw-seccio-semi"),this.target.classList.remove("pw-seccio-showing")),this.closed=!this.closed},show:function(){this._elem.classList.remove("pw-seccio-plus"),this._elem.classList.add("pw-seccio-minus"),this.target.classList.remove("pw-seccio-semi"),this.closed=!1},hide:function(){this._elem.classList.add("pw-seccio-plus"),this.target.classList.add("pw-seccio-semi"),this.closed=!0},dispose:function(){this._elem.classList=[],this._elem.removeEventListener("click",this.handler),this.target.classList.remove("pw-seccio-semi"),this.target.classList.remove("pw-seccio-showing"),this._elem.removeAttribute("data-active")}};var t={inst:{}};window.IB.sd[s]=t;var i=function(){for(var s=document.querySelectorAll('[role="seccio"]'),i=0,c=s.length;c>i;i++){var a=s[i];if(!a.dataset.active){a.dataset.active="1";var o=a.getAttribute("data-target"),l=document.querySelector(o);if(l){var r=new e(a);t.inst[l.id]=r}}}};t.bind=i,t.unbind=function(){for(var s=Object.values(t.inst),e=0,i=lInts.length;i>e;e++)s[e].dispose();t.inst={}},i()}(); 
!function(){function handleInteraction(data,ds,revisited){if(console.log("handle interaction"),console.log(data,ds),ds.collapse)for(var rules=ds.collapse.split(";"),ir=0,lr=rules.length;lr>ir;ir++){for(var rule=rules[ir],ruleParts=rule.split(":"),secname=ruleParts[0].trim(),pregrules=ruleParts[1].trim(),fullfilled=!0,conditions=pregrules.split("+"),ic=0,lc=conditions.length;lc>ic;ic++){var preg=conditions[ic].trim();if(data.preguntes[preg]<5){fullfilled=!1;break}}fullfilled&&console.log("Must collapse ",secname)}if(ds.growl)for(var growls=ds.growl.split(";"),ir=0,lr=growls.length;lr>ir;ir++){var rule=growls[ir],ruleParts=rule.split(":"),text=ruleParts[0].trim(),condition=ruleParts[1].trim(),fullfilled=eval(""+data.score+condition);if(fullfilled){revisited||console.log("Must say aloud if not revisited ",text),window.vNotify&&window.vNotify.info({text:text,title:"Resultat",fadeInDuration:1e3,fadeOutDuration:1e3,fadeInterval:50,visibleDuration:8e3,postHoverVisibleDuration:500,position:"center",sticky:!1,showClose:!0});break}}if(ds.scroll)for(var scrolls=ds.scroll.split(";"),ir=0,lr=scrolls.length;lr>ir;ir++){var scroll=scrolls[ir],ruleParts=scroll.split(":"),sec=ruleParts[0].trim(),condition=ruleParts[1].trim(),fullfilled=eval(""+data.score+condition);if(fullfilled){if(!revisited){console.log("Must scroll to ",sec);var aTag=$("a[name='"+sec+"']");$("html,body").animate({scrollTop:aTag.offset().top},"fast")}console.log("I would not go to ",sec);break}}}function initApi(){var e=function(e){if(!e)return"";if("object"!=typeof e)return e;for(var t=Object.keys(e),l="",r=0,o=t.length;o>r;r++)l+=e[t[r]]+" ";return l},t=document.querySelector('[role="smartquizz"]'),l=t.querySelector("iframe");if(l){var r=l.contentWindow;console.log(r);var o=r.document.querySelector("iframe.h5p-iframe");if(console.log(o),!o)return!1;o=o.contentWindow,console.log(o);var i=o.H5P;if(console.log(i),!i)return console.log("NO H5P trying latter"),!1;var n={};return i.externalDispatcher.on("xAPI",function(l){console.log(l);var r=l.data,o=r.statement,i=o.verb.id,s=o.result,a="http://adlnet.gov/expapi/verbs/completed"==i,c=e(o.object.definition.name).trim();if(n[c]=10*l.getScore()/l.getMaxScore(),a){t.style.display="none",$("#main_hidden").css("display","block");var d={completion:s.completion,success:s.success,score:10*s.score.scaled,preguntes:n};localStorage.setItem(t.dataset.name,JSON.stringify(d)),handleInteraction(d,t.dataset,!1)}}),$("#main_hidden").css("display","none"),!0}}var COMPONENT_NAME="dynamic_smartquizz";if(window.IB.sd[COMPONENT_NAME])return console.error("Warning: "+COMPONENT_NAME+" loaded twice."),void(window.IB.sd[COMPONENT_NAME].bind&&window.IB.sd[COMPONENT_NAME].bind());var FunctionAttemptExec=function(e,t,l){var r=e();!r&&t>0&&window.setTimeout(function(){FunctionAttemptExec(e,t-1,l)},l)},alias={inst:{}};window.IB.sd[COMPONENT_NAME]=alias;var bind=function(){for(var e=document.querySelectorAll('[role="smartquizz"]'),t=0,l=e.length;l>t;t++)if(!e[t].dataset.active){e[t].dataset.active="1";var r=e[t].dataset.name;if(localStorage.getItem(r)){var o=JSON.parse(localStorage.getItem(r));console.log(o),e[t].style.display="none",$("#main_hidden").css("display","block"),handleInteraction(o,e[t].dataset,!0)}else FunctionAttemptExec(initApi,5,1e3)}};alias.bind=bind,alias.unbind=function(){console.error("Not implemented")},bind()}(); 
var vNotify=function(){var t={topLeft:"topLeft",topRight:"topRight",bottomLeft:"bottomLeft",bottomRight:"bottomRight",center:"center"},n={fadeInDuration:1e3,fadeOutDuration:1e3,fadeInterval:50,visibleDuration:5e3,postHoverVisibleDuration:500,position:t.topRight,sticky:!1,showClose:!0},e=function(t){return t.notifyClass="vnotify-info",u(t)},o=function(t){return t.notifyClass="vnotify-success",u(t)},i=function(t){return t.notifyClass="vnotify-error",u(t)},r=function(t){return t.notifyClass="vnotify-warning",u(t)},a=function(t){return t.notifyClass="vnotify-notify",u(t)},s=function(t){return u(t)},u=function(t){if(!t.title&&!t.text)return null;var n=document.createDocumentFragment(),e=document.createElement("div");e.classList.add("vnotify-item"),e.classList.add(t.notifyClass),e.style.opacity=0,e.options=y(t),t.title&&e.appendChild(c(t.title)),t.text&&e.appendChild(l(t.text)),e.options.showClose&&e.appendChild(f(e)),e.visibleDuration=e.options.visibleDuration;var o=function(){e.fadeInterval=D("out",e.options.fadeOutDuration,e)},i=function(){clearTimeout(e.interval),clearTimeout(e.fadeInterval),e.style.opacity=null,e.visibleDuration=e.options.postHoverVisibleDuration},r=function(){e.interval=setTimeout(o,e.visibleDuration)};n.appendChild(e);var a=d(e.options.position);return a.appendChild(n),e.addEventListener("mouseover",i),D("in",e.options.fadeInDuration,e),e.options.sticky||(e.addEventListener("mouseout",r),r()),e},l=function(t){var n=document.createElement("div");return n.classList.add("vnotify-text"),n.innerHTML=t,n},c=function(t){var n=document.createElement("div");return n.classList.add("vnotify-title"),n.innerHTML=t,n},f=function(t){var n=document.createElement("span");return n.classList.add("vn-close"),n.addEventListener("click",function(){m(t)}),n},d=function(t){var n=p(t),e=document.querySelector("."+n);return e?e:v(n)},v=function(t){var n=document.createDocumentFragment();return container=document.createElement("div"),container.classList.add("vnotify-container"),container.classList.add(t),container.setAttribute("role","alert"),n.appendChild(container),document.body.appendChild(n),container},p=function(n){switch(n){case t.topLeft:return"vn-top-left";case t.bottomRight:return"vn-bottom-right";case t.bottomLeft:return"vn-bottom-left";case t.center:return"vn-center";default:return"vn-top-right"}},y=function(t){return{fadeInDuration:t.fadeInDuration||n.fadeInDuration,fadeOutDuration:t.fadeOutDuration||n.fadeOutDuration,fadeInterval:t.fadeInterval||n.fadeInterval,visibleDuration:t.visibleDuration||n.visibleDuration,postHoverVisibleDuration:t.postHoverVisibleDuration||n.postHoverVisibleDuration,position:t.position||n.position,sticky:null!=t.sticky?t.sticky:n.sticky,showClose:null!=t.showClose?t.showClose:n.showClose}},m=function(t){t.style.display="none",t.outerHTML="",t=null},D=function(t,e,o){function i(){a=r?a+u:a-u,o.style.opacity=a,0>=a&&(m(o),b()),(!r&&s>=a||r&&a>=s)&&window.clearInterval(l)}var r="in"===t,a=r?0:o.style.opacity||1,s=r?.8:0,u=n.fadeInterval/e;r&&(o.style.display="block",o.style.opacity=a);var l=window.setInterval(i,n.fadeInterval);return l},b=function(){var t=document.querySelector(".vnotify-item");if(!t)for(var n=document.querySelectorAll(".vnotify-container"),e=0;e<n.length;e++)n[e].outerHTML="",n[e]=null};return{info:e,success:o,error:i,warning:r,notify:a,custom:s,options:n,positionOption:t}}();