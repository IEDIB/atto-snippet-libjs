window.IB = window.IB || {}; window.IB.sd = window.IB.sd || {};
        !function(){if(document.getElementById("sd_css_general")){return;}; var l = '.modal-fullscreen-xl .modal-header {   padding: 0rem 1rem;   border: none; } .modal-fullscreen-xl .close {   font-size: 200%;   border-radius: 50%;   background: black; } .modal-fullscreen-xl .modal-dialog {   width: 95%;   height: 95%;   max-width: none;   margin: auto; } .modal-fullscreen-xl .modal-content {   height: 100%;   border: 0;   border-radius: 0;   background: rgba(0,0,0,0); } .modal-fullscreen-xl .modal-body {   width: 100%;   overflow: auto;   background: rgba(0,0,0,0); } .navigate-left-arrow, .navigate-right-arrow {   font-size: 300%;   color: whitesmoke; }'; var s = document.createElement('style'); s.type = 'text/css'; s.innerHTML = l; s.id="sd_css_general"; document.getElementsByTagName('head')[0].appendChild(s);}();
        !function(){"use strict";var t="<span>&#10094;</span>",i="<span>&#10095;</span>",n="snptModal_lightbox",a="lightbox";if(window.IB.sd[a])return console.error("Warning: "+a+" loaded twice."),void(window.IB.sd[a].bind&&window.IB.sd[a].bind());var e=$('[role="snptd_lightbox"]');$.each(e,function(t,i){i.id="imglightbox_"+t});var o=function(t){this.currentIndex=parseInt(t.id.split("_")[1]),this.originalIndex=this.currentIndex,this._setup(t)};o.prototype._setup=function(t){var i=this;this.$container=$(t),this.$container.css("cursor","pointer"),this.$container.attr("data-toggle","modal"),this.$container.attr("data-target","#"+n),this.$modal=$("#"+n),this.$modal.length?this.$img=this.$modal.find("img"):this._createModal(),this.$container.off(),this.$container.on("click",function(t){i.currentIndex=i.originalIndex,i._loadImageDynamically()})},o.prototype._loadImageDynamically=function(){var t=this;if(!e[this.currentIndex])return void console.error("Noting at currentIndex",this.currentIndex);var i=$(e[this.currentIndex]);if(t.$img.length){var n=new Image,a=i.attr("data-src")||i.attr("src");n.onload=function(){t._resize(n.width,n.height),t.$img.attr("src",a)},n.onerror=function(i){console.error("Cannot load image ",i),t.$img.attr("src","")},n.src=a}},o.prototype._createModal=function(){var a=this,o=e.length>1,r='<a class="navigate-left-arrow" href="javascript:void(0);">'+t+"</a>",s='<a class="navigate-right-arrow" href="javascript:void(0);">'+i+"</a>",d=$('<div class="modal fade modal-fullscreen-xl" id="'+n+'" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close text-white" data-dismiss="modal">&times;</button></div><div class="modal-body p-0" style="text-align:center;">'+(o?r:"")+'<img src="">'+(o?s:"")+"</div></div></div></div>");this.$modal=$(d),this.$img=this.$modal.find("img"),this.$close=this.$modal.find("button"),$("body").append(this.$modal),this.$modal.on("hide.bs.modal",function(){a.$img.attr("src","")}),$("#modalCloseBtn").on("click",function(){a.$img.attr("src","")}),o&&(this.$modal.find(".navigate-left-arrow").on("click",function(t){t.preventDefault(),a._navigateLeft()}),this.$modal.find(".navigate-right-arrow").on("click",function(t){t.preventDefault(),a._navigateRight()}))},o.prototype._resize=function(t,i){var n=1;i>0&&(n=t/i);var a=$(window).height(),e=$(window).width(),o=1;e>0&&(o=a/e),n>o?(this.$img.css("width","initial"),this.$img.css("height","100%")):(this.$img.css("height","initial"),this.$img.css("width","100%"))},o.prototype._navigateLeft=function(){0==this.currentIndex?this.currentIndex=e.length-1:this.currentIndex-=1,this._loadImageDynamically()},o.prototype._navigateRight=function(){this.currentIndex==e.length-1?this.currentIndex=0:this.currentIndex+=1,this._loadImageDynamically()},o.prototype.dispose=function(){this.$container.off()};var r={author:"Josep Mulet",version:"1.0",inst:{}};window.IB.sd[a]=r;var s=function(){for(var t=document.querySelectorAll('[role="snptd_'+a+'"]'),i=0,n=t.length;n>i;i++){var e=t[i];if(!e.dataset.active){e.dataset.active="1";var r=new o(e),s=e.getAttribute("id");s||(s="dynamic_"+Math.random().toString(32).substring(2),e.id=s),window.IB.sd[a].inst[s]=r}}};r.bind=s,r.unbind=function(){for(var t=Object.values(r.inst),i=0,n=t.length;n>i;i++)t[i].dispose();r.inst={}},s()}(); 
$(function(){var a={},e=' .pw-laser-nw{position:relative;}\n .pw-laser-nw::after{content:"";position:absolute;left:0;top:0;width:10px;height:10px;border-radius:50%;background:rgba(255,0,0,0.6);box-shadow: 0 0 5px 3px red;}\n ';e+=' .pw-laser-ne{position:relative;}\n .pw-laser-ne::after{content:"";position:absolute;right:0;top:0;width:10px;height:10px;border-radius:50%;background:rgba(255,0,0,0.6);box-shadow: 0 0 5px 3px red;}\n ',e+=' .pw-laser-sw{position:relative;}\n .pw-laser-sw::after{content:"";position:absolute;left:0;bottom:0;width:10px;height:10px;border-radius:50%;background:rgba(255,0,0,0.6);box-shadow: 0 0 5px 3px red;} \n',e+=' .pw-laser-se{position:relative;}\n .pw-laser-se::after{content:"";position:absolute;right:0;bottom:0;width:10px;height:10px;border-radius:50%;background:rgba(255,0,0,0.6);box-shadow: 0 0 5px 3px red;}\n ',e+=' .pw-laser-md{position:relative;}\n .pw-laser-md::after{content:"";position:absolute;left:50%;bottom:50%;width:10px;height:10px;border-radius:50%;background:rgba(255,0,0,0.6);box-shadow: 0 0 5px 3px red;}\n ',e+=" .audible-media-player{max-width:600px;padding:6px;border-radius:7px;display:flex;margin:auto;margin-bottom:15px;}\n ",e+="  \n .audible-frog span, .audible-frog button{color: #4f6e46;}\n .audible-sky{background:rgb(241,245,254);}\n .audible-frog{background:#e6ede6;}\n .audible-sky span, .audible-sky button{color:rgb(31,106,219);} \n ",e+=" .pw-audible-btn{background: none; border: none; color: #4f6e46; margin: 0 5px;} \n",e+=" .pw-pen-yellow{-webkit-box-shadow: #FFF 0 -1px 4px, #ff0 0 -2px 10px, 5px 5px 15px 5px rgba(0,0,0,0);box-shadow: #FFF 0 -1px 4px, #ff0 0 -2px 10px, 5px 5px 15px 5px rgba(0,0,0,0);background: rgb(255,255,193,0.5);} \n ",e+=" .pw-pen-green{-webkit-box-shadow: #FFF 0 -1px 4px, #3f3 0 -2px 10px, 5px 5px 15px 5px rgba(0,0,0,0);box-shadow: #FFF 0 -1px 4px, #3f3 0 -2px 10px, 5px 5px 15px 5px rgba(0,0,0,0);background: rgb(193,255,200,0.5);}\n ",e+=" .pw-pen-red{-webkit-box-shadow: #FFF 0 -1px 4px, #f33 0 -2px 10px, 5px 5px 15px 5px rgba(0,0,0,0);box-shadow: #FFF 0 -1px 4px, #f33 0 -2px 10px, 5px 5px 15px 5px rgba(0,0,0,0);background: rgb(255,193,193,0.5);} \n ",e+="  @media print{.audible-media-player{display:none;} }\n";var n=function(a,e){if(!e||!document.getElementById(e)){var n=document.createElement("style");n.type="text/css",n.innerHTML=a,e&&(n.id=e),document.getElementsByTagName("head")[0].appendChild(n)}};n(e,"audible_css"),$.fn.snpt_overlaypen=function(a){this.old_display||(this.old_display=this.css("display")),this.old_position||(this.old_position=this.css("position")),this.css({position:"relative",display:"inline-block"});for(var e=$.extend({width:"15px",height:"60%",background:"orange",opacity:"0.37","z-index":"100","border-radius":"20%"},a),n=Object.keys(e),t=[],r=0,s=n.length;s>r;r++){var o=n[r];t.push(o+":"+e[o])}var p=$('<div class="pw-overlaypen" style="position:absolute;'+t.join(";")+'"></div>');return this.append(p),this},$.fn.snpt_erasepen=function(){this.css({position:this.old_position,display:this.old_display}),this.find(".pw-overlaypen").remove()},$.fn.snpt_player=function(e){if(!window.Audio)return console.error("No HTML5 Audio support"),this;var n=$.extend({id:"p"+Math.random().toString(32).substring(2),src:[],skin:"frog",css:""},e),t="";n.css&&(t='style="'+n.css+'"');var r=!1,s=new Audio;s.id=n.id,a[n.id]=s;var o=$('<button class="pw-audible-btn" style="background: none; border: none; margin: 0 5px;" id="'+n.id+'_stop"><i class="fas fa-sync"></i></button>'),p=$('<input type="range" value="0" min="0" max="100" style="margin-left:5px;flex-grow:96;"/>'),i=$('<span style="margin-left:5px;font-family:arial;">00:00</span>'),d=$('<button style="background: none; border: none; margin: 0 5px;" class="pw-audible-btn"><i class="fas fa-play"></i></button>'),l=$('<div class="audible-media-player audible-'+n.skin+'" '+t+' id="pwmplayer_'+n.id+'" title="AudioPlayer by Josep Mulet"></div>');$.each(n.src,function(a,e){var t=$('<source id="'+n.id+"_src"+a+'" src="'+e+'"></source>');$(s).append(t)}),s.load(),s.addEventListener("loadeddata",function(){var a=s.duration;o.on("click",function(a){s.pause(),$(d).html('<i class="fas fa-play"></i>'),s.currentTime=0,i.html("00:00"),p.val(0),n.onStop&&n.onStop()}),d.on("click",function(a){s.stopped=!1,s.paused?(s.play(),$(d).html('<i class="fas fa-pause"></i>')):(s.pause(),$(d).html('<i class="fas fa-play"></i>'))}),s.addEventListener("timeupdate",function(e){var t=e.target;if(!r){var s=Math.floor(t.currentTime),o=Math.floor(s/60)+"",d=s-60*o+"";o.length<2&&(o="0"+o),d.length<2&&(d="0"+d),i.html(o+":"+d);var l=Math.round(100*s/a);p.val(l),n.onTimeupdate&&n.onTimeupdate(t.currentTime)}}),s.addEventListener("ended",function(a){var e=$(a.target);e.val(100),$(d).html('<i class="fas fa-play"></i>'),i.html("00:00"),p.val(0),s.stopped=!0,s.currentTime=0}),p.on("mousedown",function(a){r=!0}),p.on("mouseup",function(a){r=!1}),p.on("change",function(e){var n=e.target,t=Math.floor(.01*$(n).val()*a),r=Math.floor(t/60)+"",o=t-60*r+"";r.length<2&&(r="0"+r),o.length<2&&(o="0"+o),i.html(r+":"+o),0==t&&i.html("00:00"),s.currentTime=t}),l.append(d),l.append(p),l.append(i),l.append(o)}),this.prepend(l)},$.fn.snpt_narracio=function(a){var e=this,n=e.parent(),t="";n&&(n=n.parent(),n&&(t=n.attr("data-lang")));var r=e.find("a.accordion-toggle");r&&("ca"==t?r.append($('<span title="Explicació en àudio"> narrada </span>')):"es"==t?r.append($('<span title="Explicación con audio"> narrada </span>')):"en"==t&&r.append($('<span title="Explanation with audio"> with audio </span>')),r.append($('<i class="fas fa-headphones"></i>')));var s=e.find(".accordion-inner"),o=e.attr("data-audible"),p=o,i=[];p.startsWith("http")?i.push(p):(p="https://piworld.es/iedib/audible/"+o,i.push(p+".m4a"),i.push(p+".mp3"));var d=e.find("[data-from]"),l=e.find("[data-laser]"),u=e.find("[data-pen]");d.each(function(a,e){var n=$(e).attr("data-from");e.fromTime=n}),l.each(function(a,e){var n=$(e).attr("data-laser");e.lasers=[];for(var t=n.split("|"),r=0,s=t.length;s>r;r++){var o=t[r],p=o.split(",");if(p.length>=2){var i=0,d=0,l="md";i=parseInt(p[0]),d=parseInt(p[1]),p.length>2&&(l=(p[2]||"md").trim().toLowerCase()),e.lasers.push({start:i,end:d,pos:l})}else console.error("Invalid laser ",o)}}),u.each(function(a,e){var n=$(e).attr("data-pen");e.pen=[];for(var t=n.split("|"),r=0,s=t.length;s>r;r++){var o=t[r],p=o.split(",");if(3===p.length){var i=0,d=0,l={};i=parseInt(p[0]),d=parseInt(p[1]);for(var u=p[2].split(";"),a=0,c=u.length;c>a;a++){var f=u[a],h=f.split(":");if(2==h.length){var x=h[0].trim(),b=h[1].trim();l[x]=b}}e.pen.push({start:i,end:d,opts:l})}else console.error("Invalid penmarker ",o)}});var c=function(a){if(0==a)return d.fadeTo("fast",1),l.removeClass("pw-laser-md").removeClass("pw-laser-nw").removeClass("pw-laser-ne").removeClass("pw-laser-sw").removeClass("pw-laser-se"),void u.each(function(a,e){var n=$(e);n.snpt_erasepen()});for(var e=0,n=d.length;n>e;e++){var t=d[e];t.fromTime>a?$(t).fadeTo("fast",0):$(t).fadeTo("fast",1)}for(var e=0,n=l.length;n>e;e++){for(var t=l[e],r=null,s=0,o=t.lasers.length;o>s;s++){var p=t.lasers[s];if(p.start<=a&&a<=p.end){r=p.pos;break}}r?$(t).addClass("pw-laser-"+r):$(t).removeClass("pw-laser-md").removeClass("pw-laser-nw").removeClass("pw-laser-ne").removeClass("pw-laser-sw").removeClass("pw-laser-se")}for(var e=0,n=u.length;n>e;e++){var t=u[e],i=$(t);i.each(function(a,e){var n=$(e);n.snpt_erasepen()});for(var s=0,o=t.pen.length;o>s;s++){var p=t.pen[s];if(p.start<=a&&a<=p.end){var c=p.opts;c&&i.snpt_overlaypen(c)}}}},f=function(){d.fadeTo("fast",1)};s.snpt_player({id:o,src:i,onTimeupdate:c,onStop:f})},$('[role="snptd_narracio"]').each(function(a,e){$(e).snpt_narracio()})}); 
!function(){var e="xcode",n=function(e,n){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,n&&(t.id=n),document.getElementsByTagName("head")[0].appendChild(t)},t=function(e,n,t){var s=document.createElement("script");s.src=e,n&&(s.id=n),t&&(s.onload=function(){t()}),document.getElementsByTagName("head")[0].appendChild(s)},s=function(){var e=function(){console.log("Load done"),i()};console.log("loading...."),t("https://iedib.net/assets/js/highlight.min.js","highlight.min.js",e)},i=function(){hljs.initHighlightingOnLoad(),hljs.initLineNumbersOnLoad&&hljs.initLineNumbersOnLoad(),window.document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:!0,cancelable:!0}))};document.querySelector("#hljs_styles")||(console.log("Loading css..."),n("https://iedib.net/assets/css/"+e+".min.css","hljs_styles")),window.hljs?i():s()}();