window.IB = window.IB || {}; window.IB.sd = window.IB.sd || {}; window.wheelzoom=function(){var e={zoom:.03,maxZoom:10,initialZoom:1,initialX:.5,initialY:.5},t=function(t,n){function o(e){e.style.backgroundRepeat="no-repeat",e.style.backgroundImage='url("'+e.src+'")',b="data:image/svg+xml;base64,"+window.btoa('<svg xmlns="http://www.w3.org/2000/svg" width="'+e.naturalWidth+'" height="'+e.naturalHeight+'"></svg>'),e.src=b}function i(){w>0?w=0:c-g>w&&(w=c-g),f>0?f=0:v-p>f&&(f=v-p),t.style.backgroundSize=g+"px "+p+"px",t.style.backgroundPosition=w+"px "+f+"px"}function a(){g=c,p=v,w=f=0,i()}function r(e){var n=0;e.preventDefault(),e.deltaY?n=e.deltaY:e.wheelDelta&&(n=-e.wheelDelta);var o=t.getBoundingClientRect(),r=e.pageX-o.left-window.pageXOffset,d=e.pageY-o.top-window.pageYOffset,s=r-w,u=d-f,l=s/g,m=u/p;0>n?(g+=g*y.zoom,p+=p*y.zoom):(g-=g*y.zoom,p-=p*y.zoom),y.maxZoom&&(g=Math.min(c*y.maxZoom,g),p=Math.min(v*y.maxZoom,p)),w=r-g*l,f=d-p*m,c>=g||v>=p?a():i()}function d(e){e.preventDefault(),w+=e.pageX-h.pageX,f+=e.pageY-h.pageY,h=e,i()}function s(){document.removeEventListener("mouseup",s),document.removeEventListener("mousemove",d)}function u(e){e.preventDefault(),h=e,document.addEventListener("mousemove",d),document.addEventListener("mouseup",s)}function l(){var e=Math.max(y.initialZoom,1);if(t.src!==b){var n=window.getComputedStyle(t,null);c=parseInt(n.width,10),v=parseInt(n.height,10),g=c*e,p=v*e,w=-(g-c)*y.initialX,f=-(p-v)*y.initialY,o(t),t.style.backgroundSize=g+"px "+p+"px",t.style.backgroundPosition=w+"px "+f+"px",t.style.cursor="nesw-resize",t.addEventListener("wheelzoom.reset",a),t.addEventListener("wheel",r),t.addEventListener("mousedown",u)}}function m(){if(t.src==b){var e=Math.max(y.initialZoom,1),n=window.getComputedStyle(t,null);c=parseInt(n.width,10),v=parseInt(n.height,10),g=c*e,p=v*e,w=-(g-c)*y.initialX,f=-(p-v)*y.initialY,t.style.backgroundSize=g+"px "+p+"px",t.style.backgroundPosition=w+"px "+f+"px"}}if(t&&t.nodeName&&"IMG"===t.nodeName){var c,v,g,p,w,f,h,b,y={},z=function(e){t.removeEventListener("wheelzoom.destroy",z),t.removeEventListener("wheelzoom.reset",a),t.removeEventListener("load",l),t.removeEventListener("mouseup",s),t.removeEventListener("mousemove",d),t.removeEventListener("mousedown",u),t.removeEventListener("wheel",r),window.removeEventListener("resize",m),t.style.backgroundImage=e.backgroundImage,t.style.backgroundRepeat=e.backgroundRepeat,t.src=e.src,t.style.cursor="default"}.bind(null,{backgroundImage:t.style.backgroundImage,backgroundRepeat:t.style.backgroundRepeat,src:t.src});t.addEventListener("wheelzoom.destroy",z),n=n||{},Object.keys(e).forEach(function(t){y[t]=void 0!==n[t]?n[t]:e[t]}),t.complete&&l(),t.addEventListener("load",l),window.addEventListener("resize",m)}};return"function"!=typeof window.btoa?function(e){return e}:function(e,n){return e&&e.length?Array.prototype.forEach.call(e,function(e){t(e,n)}):e&&e.nodeName&&t(e,n),e}}(),function(){var e="zoom";if(window.IB.sd[e])return console.error("Warning: "+e+" loaded twice."),void(window.IB.sd[e].bind&&window.IB.sd[e].bind());var t={author:"Josep Mulet, Pep Mut",version:"2.2",inst:{}};window.IB.sd[e]=t;var n=function(e){for(var n=0,o=e.length;o>n;n++){var i=e[n];if(!i.dataset.active){setTimeout(function(e){i.style.maxWidth="98%",wheelzoom(i)},1e3),i.dataset.active="1";var a=i.getAttribute("id");a||(a="sd_"+Math.random().toString(32).substring(2),i.setAttribute("id",a)),t.inst[a]=i}}},o=function(){for(var e=document.querySelectorAll('div[data-snptd="zoom"], table[data-snptd="zoom"]'),t=0,o=e.length;o>t;t++){var i=e[t].querySelectorAll("img");n(i)}var a=document.querySelectorAll('img[role="snptd_zoom"], img[data-snptd="zoom"]');n(a)};t.unbind=function(){for(var e=Object.values(t.inst),n=0,o=e.length;o>n;n++)e[n].dispatchEvent(new Event("wheelzoom.destroy")),e[n].removeAttribute("data-active");t.inst={}},t.bind=o,o()}();